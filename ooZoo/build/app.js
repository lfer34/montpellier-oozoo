// minifier: path aliases
enyo.path.addPaths({onyx: "/Users/cyril/Desktop/bootplate/enyo/../lib/onyx/", onyx: "/Users/cyril/Desktop/bootplate/enyo/../lib/onyx/source/", layout: "/Users/cyril/Desktop/bootplate/enyo/../lib/layout/", DividerDrawer: "/Users/cyril/Desktop/bootplate/enyo/../lib/DividerDrawer/", map: "source/map/"});

// Icon.js
enyo.kind({name:"onyx.Icon",published:{src:"",disabled:!1},classes:"onyx-icon",create:function(){this.inherited(arguments),this.src&&this.srcChanged(),this.disabledChanged()},disabledChanged:function(){this.addRemoveClass("disabled",this.disabled)},srcChanged:function(){this.applyStyle("background-image","url("+enyo.path.rewrite(this.src)+")")}});

// Button.js
enyo.kind({name:"onyx.Button",kind:"enyo.Button",classes:"onyx-button enyo-unselectable",create:function(){enyo.platform.firefoxOS&&(this.handlers.ondown="fxosDown",this.handlers.onenter="fxosEnter",this.handlers.ondrag="fxosDrag",this.handlers.onleave="fxosLeave",this.handlers.onup="fxosUp"),this.inherited(arguments)},fxosDown:function(){this.addClass("pressed"),this._isInControl=!0},fxosEnter:function(){this._isInControl=!0},fxosDrag:function(){this.addRemoveClass("pressed",this._isInControl)},fxosLeave:function(){this.removeClass("pressed"),this._isInControl=!1},fxosUp:function(){this.removeClass("pressed"),this._isInControl=!1}});

// IconButton.js
enyo.kind({name:"onyx.IconButton",kind:"onyx.Icon",published:{active:!1},classes:"onyx-icon-button",create:function(){enyo.platform.firefoxOS&&(this.handlers.ondown="fxosDown",this.handlers.onenter="fxosEnter",this.handlers.ondrag="fxosDrag",this.handlers.onleave="fxosLeave",this.handlers.onup="fxosUp"),this.inherited(arguments)},fxosDown:function(){this.addClass("pressed"),this._isInControl=!0},fxosEnter:function(){this._isInControl=!0},fxosDrag:function(){this.addRemoveClass("pressed",this._isInControl)},fxosLeave:function(){this.removeClass("pressed"),this._isInControl=!1},fxosUp:function(){this.removeClass("pressed"),this._isInControl=!1},rendered:function(){this.inherited(arguments),this.activeChanged()},tap:function(){return this.disabled?!0:(this.setActive(!0),void 0)},activeChanged:function(){this.bubble("onActivate")}});

// Checkbox.js
enyo.kind({name:"onyx.Checkbox",classes:"onyx-checkbox",kind:enyo.Checkbox,tag:"div",handlers:{onclick:""},tap:function(){return this.disabled||(this.setChecked(!this.getChecked()),this.bubble("onchange")),!this.disabled},dragstart:function(){}});

// Drawer.js
enyo.kind({name:"onyx.Drawer",kind:"enyo.Drawer"});

// Grabber.js
enyo.kind({name:"onyx.Grabber",classes:"onyx-grabber"});

// Groupbox.js
enyo.kind({name:"onyx.Groupbox",classes:"onyx-groupbox"}),enyo.kind({name:"onyx.GroupboxHeader",classes:"onyx-groupbox-header"});

// Input.js
enyo.kind({name:"onyx.Input",kind:"enyo.Input",classes:"onyx-input"});

// Popup.js
enyo.kind({name:"onyx.Popup",kind:"Popup",classes:"onyx-popup",published:{scrimWhenModal:!0,scrim:!1,scrimClassName:""},statics:{count:0},defaultZ:120,showingChanged:function(){this.showing?(onyx.Popup.count++,this.applyZIndex()):onyx.Popup.count>0&&onyx.Popup.count--,this.showHideScrim(this.showing),this.inherited(arguments)},showHideScrim:function(n){if(this.floating&&(this.scrim||this.modal&&this.scrimWhenModal)){var s=this.getScrim();if(n){var e=this.getScrimZIndex();this._scrimZ=e,s.showAtZIndex(e)}else s.hideAtZIndex(this._scrimZ);enyo.call(s,"addRemoveClass",[this.scrimClassName,s.showing])}},getScrimZIndex:function(){return this.findZIndex()-1},getScrim:function(){return this.modal&&this.scrimWhenModal&&!this.scrim?onyx.scrimTransparent.make():onyx.scrim.make()},applyZIndex:function(){this._zIndex=2*onyx.Popup.count+this.findZIndex()+1,this.applyStyle("z-index",this._zIndex)},findZIndex:function(){var n=this.defaultZ;return this._zIndex?n=this._zIndex:this.hasNode()&&(n=Number(enyo.dom.getComputedStyleValue(this.node,"z-index"))||n),this._zIndex=n,this._zIndex}});

// TextArea.js
enyo.kind({name:"onyx.TextArea",kind:"enyo.TextArea",classes:"onyx-textarea"});

// RichText.js
enyo.kind({name:"onyx.RichText",kind:"enyo.RichText",classes:"onyx-richtext"});

// InputDecorator.js
enyo.kind({name:"onyx.InputDecorator",kind:"enyo.ToolDecorator",tag:"label",classes:"onyx-input-decorator",published:{alwaysLooksFocused:!1},handlers:{onDisabledChange:"disabledChange",onfocus:"receiveFocus",onblur:"receiveBlur"},create:function(){this.inherited(arguments),this.updateFocus(!1)},alwaysLooksFocusedChanged:function(){this.updateFocus(this.focus)},updateFocus:function(n){this.focused=n,this.addRemoveClass("onyx-focused",this.alwaysLooksFocused||this.focused)},receiveFocus:function(){this.updateFocus(!0)},receiveBlur:function(){this.updateFocus(!1)},disabledChange:function(n,e){this.addRemoveClass("onyx-disabled",e.originator.disabled)}});

// Tooltip.js
enyo.kind({name:"onyx.Tooltip",kind:"onyx.Popup",classes:"onyx-tooltip below left-arrow",autoDismiss:!1,showDelay:500,defaultLeft:-6,handlers:{onRequestShowTooltip:"requestShow",onRequestHideTooltip:"requestHide"},requestShow:function(){return this.showJob=setTimeout(this.bindSafely("show"),this.showDelay),!0},cancelShow:function(){clearTimeout(this.showJob)},requestHide:function(){return this.cancelShow(),this.inherited(arguments)},showingChanged:function(){this.cancelShow(),this.adjustPosition(!0),this.inherited(arguments)},applyPosition:function(e){var s="";for(var n in e)s+=n+":"+e[n]+(isNaN(e[n])?"; ":"px; ");this.addStyles(s)},adjustPosition:function(){if(this.showing&&this.hasNode()){var e=this.node.getBoundingClientRect();e.top+e.height>window.innerHeight?(this.addRemoveClass("below",!1),this.addRemoveClass("above",!0)):(this.addRemoveClass("above",!1),this.addRemoveClass("below",!0)),e.left+e.width>window.innerWidth&&(this.applyPosition({"margin-left":-e.width,bottom:"auto"}),this.addRemoveClass("left-arrow",!1),this.addRemoveClass("right-arrow",!0))}},resizeHandler:function(){this.applyPosition({"margin-left":this.defaultLeft,bottom:"auto"}),this.addRemoveClass("left-arrow",!0),this.addRemoveClass("right-arrow",!1),this.adjustPosition(!0),this.inherited(arguments)}});

// TooltipDecorator.js
enyo.kind({name:"onyx.TooltipDecorator",defaultKind:"onyx.Button",classes:"onyx-popup-decorator",handlers:{onenter:"enter",onleave:"leave"},enter:function(){this.requestShowTooltip()},leave:function(){this.requestHideTooltip()},tap:function(){this.requestHideTooltip()},requestShowTooltip:function(){this.waterfallDown("onRequestShowTooltip")},requestHideTooltip:function(){this.waterfallDown("onRequestHideTooltip")}});

// MenuDecorator.js
enyo.kind({name:"onyx.MenuDecorator",kind:"onyx.TooltipDecorator",defaultKind:"onyx.Button",classes:"onyx-popup-decorator enyo-unselectable",handlers:{onActivate:"activated",onHide:"menuHidden"},activated:function(e,n){this.requestHideTooltip(),n.originator.active&&(this.menuActive=!0,this.activator=n.originator,this.activator.addClass("active"),this.requestShowMenu())},requestShowMenu:function(){this.waterfallDown("onRequestShowMenu",{activator:this.activator})},requestHideMenu:function(){this.waterfallDown("onRequestHideMenu")},menuHidden:function(){this.menuActive=!1,this.activator&&(this.activator.setActive(!1),this.activator.removeClass("active"))},enter:function(){this.menuActive||this.inherited(arguments)},leave:function(){this.menuActive||this.inherited(arguments)}});

// Menu.js
enyo.kind({name:"onyx.Menu",kind:"onyx.Popup",modal:!0,defaultKind:"onyx.MenuItem",classes:"onyx-menu",published:{maxHeight:200,scrolling:!0},handlers:{onActivate:"itemActivated",onRequestShowMenu:"requestMenuShow",onRequestHideMenu:"requestHide"},childComponents:[{name:"client",kind:"enyo.Scroller",strategyKind:"TouchScrollStrategy"}],showOnTop:!1,scrollerName:"client",create:function(){this.inherited(arguments),this.maxHeightChanged()},initComponents:function(){this.scrolling&&this.createComponents(this.childComponents,{isChrome:!0}),this.inherited(arguments)},getScroller:function(){return this.$[this.scrollerName]},maxHeightChanged:function(){this.scrolling&&this.getScroller().setMaxHeight(this.maxHeight+"px")},itemActivated:function(t,e){return e.originator.setActive(!1),!0},showingChanged:function(){this.inherited(arguments),this.scrolling&&this.getScroller().setShowing(this.showing),this.adjustPosition(!0)},requestMenuShow:function(t,e){if(this.floating){var i=e.activator.hasNode();if(i){var n=this.activatorOffset=this.getPageOffset(i);this.applyPosition({top:n.top+(this.showOnTop?0:n.height),left:n.left,width:n.width})}}return this.show(),!0},applyPosition:function(t){var e="";for(var i in t)e+=i+":"+t[i]+(isNaN(t[i])?"; ":"px; ");this.addStyles(e)},getPageOffset:function(t){var e=t.getBoundingClientRect(),i=void 0===window.pageYOffset?document.documentElement.scrollTop:window.pageYOffset,n=void 0===window.pageXOffset?document.documentElement.scrollLeft:window.pageXOffset,o=void 0===e.height?e.bottom-e.top:e.height,s=void 0===e.width?e.right-e.left:e.width;return{top:e.top+i,left:e.left+n,height:o,width:s}},adjustPosition:function(){if(this.showing&&this.hasNode()){this.scrolling&&!this.showOnTop&&this.getScroller().setMaxHeight(this.maxHeight+"px"),this.removeClass("onyx-menu-up"),this.floating||this.applyPosition({left:"auto"});var t=this.node.getBoundingClientRect(),e=void 0===t.height?t.bottom-t.top:t.height,i=void 0===window.innerHeight?document.documentElement.clientHeight:window.innerHeight,n=void 0===window.innerWidth?document.documentElement.clientWidth:window.innerWidth;if(this.menuUp=t.top+e>i&&i-t.bottom<t.top-e,this.addRemoveClass("onyx-menu-up",this.menuUp),this.floating){var o=this.activatorOffset;this.menuUp?this.applyPosition({top:o.top-e+(this.showOnTop?o.height:0),bottom:"auto"}):t.top<o.top&&i>o.top+(this.showOnTop?0:o.height)+e&&this.applyPosition({top:o.top+(this.showOnTop?0:o.height),bottom:"auto"})}if(t.right>n&&(this.floating?this.applyPosition({left:n-t.width}):this.applyPosition({left:-(t.right-n)})),0>t.left&&(this.floating?this.applyPosition({left:0,right:"auto"}):"auto"==this.getComputedStyleValue("right")?this.applyPosition({left:-t.left}):this.applyPosition({right:t.left})),this.scrolling&&!this.showOnTop){t=this.node.getBoundingClientRect();var s;s=this.menuUp?this.maxHeight<t.bottom?this.maxHeight:t.bottom:i>t.top+this.maxHeight?this.maxHeight:i-t.top,this.getScroller().setMaxHeight(s+"px")}}},resizeHandler:function(){this.inherited(arguments),this.adjustPosition()},requestHide:function(){this.setShowing(!1)}});

// MenuItem.js
enyo.kind({name:"onyx.MenuItem",kind:"enyo.Button",events:{onSelect:"",onItemContentChange:""},classes:"onyx-menu-item",tag:"div",create:function(){this.inherited(arguments),this.active&&this.bubble("onActivate")},tap:function(){this.inherited(arguments),this.bubble("onRequestHideMenu"),this.doSelect({selected:this,content:this.content})},contentChanged:function(){this.inherited(arguments),this.doItemContentChange({content:this.content})}});

// PickerDecorator.js
enyo.kind({name:"onyx.PickerDecorator",kind:"onyx.MenuDecorator",classes:"onyx-picker-decorator",defaultKind:"onyx.PickerButton",handlers:{onChange:"change"},change:function(t,e){this.waterfallDown("onChange",e)}});

// PickerButton.js
enyo.kind({name:"onyx.PickerButton",kind:"onyx.Button",handlers:{onChange:"change"},change:function(t,e){void 0!==e.content&&this.setContent(e.content)}});

// Picker.js
enyo.kind({name:"onyx.Picker",kind:"onyx.Menu",classes:"onyx-picker enyo-unselectable",published:{selected:null},events:{onChange:""},handlers:{onItemContentChange:"itemContentChange"},floating:!0,showOnTop:!0,initComponents:function(){this.setScrolling(!0),this.inherited(arguments)},showingChanged:function(){this.getScroller().setShowing(this.showing),this.inherited(arguments),this.showing&&this.selected&&this.scrollToSelected()},scrollToSelected:function(){this.getScroller().scrollToControl(this.selected,!this.menuUp)},itemActivated:function(t,e){return this.processActivatedItem(e.originator),this.inherited(arguments)},processActivatedItem:function(t){t.active&&this.setSelected(t)},selectedChanged:function(t){t&&t.removeClass("selected"),this.selected&&(this.selected.addClass("selected"),this.doChange({selected:this.selected,content:this.selected.content}))},itemContentChange:function(t,e){e.originator==this.selected&&this.doChange({selected:this.selected,content:this.selected.content})},resizeHandler:function(){this.inherited(arguments),this.adjustPosition()}});

// FlyweightPicker.js
enyo.kind({name:"onyx.FlyweightPicker",kind:"onyx.Picker",classes:"onyx-flyweight-picker",published:{count:0},events:{onSetupItem:"",onSelect:""},handlers:{onSelect:"itemSelect"},components:[{name:"scroller",kind:"enyo.Scroller",strategyKind:"TouchScrollStrategy",components:[{name:"flyweight",kind:"FlyweightRepeater",noSelect:!0,ontap:"itemTap"}]}],scrollerName:"scroller",initComponents:function(){this.controlParentName="flyweight",this.inherited(arguments),this.$.flyweight.$.client.children[0].setActive(!0)},create:function(){this.inherited(arguments),this.countChanged()},rendered:function(){this.inherited(arguments),this.selectedChanged()},scrollToSelected:function(){var e=this.$.flyweight.fetchRowNode(this.selected);this.getScroller().scrollToNode(e,!this.menuUp)},countChanged:function(){this.$.flyweight.count=this.count},processActivatedItem:function(e){this.item=e},selectedChanged:function(e){if(this.item){null!=e&&(this.item.removeClass("selected"),this.$.flyweight.renderRow(e));var t;null!=this.selected&&(this.item.addClass("selected"),this.$.flyweight.renderRow(this.selected),this.item.removeClass("selected"),t=this.$.flyweight.fetchRowNode(this.selected)),this.doChange({selected:this.selected,content:t&&t.textContent||this.item.content})}},itemTap:function(e,t){this.setSelected(t.rowIndex),this.doSelect({selected:this.item,content:this.item.content})},itemSelect:function(e,t){return t.originator!=this?!0:void 0}});

// DatePicker.js
enyo.kind({name:"onyx.DatePicker",classes:"onyx-toolbar-inline",published:{disabled:!1,locale:"en_us",dayHidden:!1,monthHidden:!1,yearHidden:!1,minYear:1900,maxYear:2099,value:null},events:{onSelect:""},create:function(){this.inherited(arguments),enyo.g11n&&(this.locale=enyo.g11n.currentLocale().getLocale()),this.initDefaults()},initDefaults:function(){var e=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];enyo.g11n&&(this._tf=new enyo.g11n.Fmts({locale:this.locale}),e=this._tf.getMonthFields()),this.setupPickers(this._tf?this._tf.getDateFieldOrder():"mdy"),this.dayHiddenChanged(),this.monthHiddenChanged(),this.yearHiddenChanged();for(var t,n=this.value=this.value||new Date,i=0;t=e[i];i++)this.$.monthPicker.createComponent({content:t,value:i,active:i==n.getMonth()});var o=n.getFullYear();for(this.$.yearPicker.setSelected(o-this.minYear),i=1;this.monthLength(n.getYear(),n.getMonth())>=i;i++)this.$.dayPicker.createComponent({content:i,value:i,active:i==n.getDate()})},monthLength:function(e,t){return 32-new Date(e,t,32).getDate()},setupYear:function(e,t){return this.$.year.setContent(this.minYear+t.index),!0},setupPickers:function(e){var t,n,i,o=e.split("");for(n=0,i=o.length;i>n;n++)switch(t=o[n]){case"d":this.createDay();break;case"m":this.createMonth();break;case"y":this.createYear();break;default:}},createYear:function(){var e=this.maxYear-this.minYear;this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateYear",components:[{classes:"onyx-datepicker-year",name:"yearPickerButton",disabled:this.disabled},{name:"yearPicker",kind:"onyx.FlyweightPicker",count:++e,onSetupItem:"setupYear",components:[{name:"year"}]}]})},createMonth:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateMonth",components:[{classes:"onyx-datepicker-month",name:"monthPickerButton",disabled:this.disabled},{name:"monthPicker",kind:"onyx.Picker"}]})},createDay:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateDay",components:[{classes:"onyx-datepicker-day",name:"dayPickerButton",disabled:this.disabled},{name:"dayPicker",kind:"onyx.Picker"}]})},localeChanged:function(){this.refresh()},dayHiddenChanged:function(){this.$.dayPicker.getParent().setShowing(this.dayHidden?!1:!0)},monthHiddenChanged:function(){this.$.monthPicker.getParent().setShowing(this.monthHidden?!1:!0)},yearHiddenChanged:function(){this.$.yearPicker.getParent().setShowing(this.yearHidden?!1:!0)},minYearChanged:function(){this.refresh()},maxYearChanged:function(){this.refresh()},valueChanged:function(){this.refresh()},disabledChanged:function(){this.$.yearPickerButton.setDisabled(this.disabled),this.$.monthPickerButton.setDisabled(this.disabled),this.$.dayPickerButton.setDisabled(this.disabled)},updateDay:function(e,t){var n=this.calcDate(this.value.getFullYear(),this.value.getMonth(),t.selected.value);return this.doSelect({name:this.name,value:n}),this.setValue(n),!0},updateMonth:function(e,t){var n=this.calcDate(this.value.getFullYear(),t.selected.value,this.value.getDate());return this.doSelect({name:this.name,value:n}),this.setValue(n),!0},updateYear:function(e,t){if(-1!=t.originator.selected){var n=this.calcDate(this.minYear+t.originator.selected,this.value.getMonth(),this.value.getDate());this.doSelect({name:this.name,value:n}),this.setValue(n)}return!0},calcDate:function(e,t,n){return new Date(e,t,n,this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds())},refresh:function(){this.destroyClientControls(),this.initDefaults(),this.render()}});

// TimePicker.js
enyo.kind({name:"onyx.TimePicker",classes:"onyx-toolbar-inline",published:{disabled:!1,locale:"en_us",is24HrMode:null,value:null},events:{onSelect:""},create:function(){this.inherited(arguments),enyo.g11n&&(this.locale=enyo.g11n.currentLocale().getLocale()),this.initDefaults()},initDefaults:function(){var e="AM",t="PM";null==this.is24HrMode&&(this.is24HrMode=!1),enyo.g11n&&(this._tf=new enyo.g11n.Fmts({locale:this.locale}),e=this._tf.getAmCaption(),t=this._tf.getPmCaption(),null==this.is24HrMode&&(this.is24HrMode=!this._tf.isAmPm())),this.setupPickers(this._tf?this._tf.getTimeFieldOrder():"hma");var n,i=this.value=this.value||new Date;if(this.is24HrMode)for(n=0;24>n;n++)this.$.hourPicker.createComponent({content:n,value:n,active:n==i.getHours()});else{var s=i.getHours();for(s=0===s?12:s,n=1;12>=n;n++)this.$.hourPicker.createComponent({content:n,value:n,active:n==(s>12?s%12:s)})}for(n=0;59>=n;n++)this.$.minutePicker.createComponent({content:10>n?"0"+n:n,value:n,active:n==i.getMinutes()});i.getHours()>=12?this.$.ampmPicker.createComponents([{content:e},{content:t,active:!0}]):this.$.ampmPicker.createComponents([{content:e,active:!0},{content:t}]),this.$.ampmPicker.getParent().setShowing(!this.is24HrMode)},setupPickers:function(e){var t,n,i,s=e.split("");for(n=0,i=s.length;i>n;n++)switch(t=s[n]){case"h":this.createHour();break;case"m":this.createMinute();break;case"a":this.createAmPm();break;default:}},createHour:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateHour",components:[{classes:"onyx-timepicker-hour",name:"hourPickerButton",disabled:this.disabled},{name:"hourPicker",kind:"onyx.Picker"}]})},createMinute:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateMinute",components:[{classes:"onyx-timepicker-minute",name:"minutePickerButton",disabled:this.disabled},{name:"minutePicker",kind:"onyx.Picker"}]})},createAmPm:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateAmPm",components:[{classes:"onyx-timepicker-ampm",name:"ampmPickerButton",disabled:this.disabled},{name:"ampmPicker",kind:"onyx.Picker"}]})},disabledChanged:function(){this.$.hourPickerButton.setDisabled(this.disabled),this.$.minutePickerButton.setDisabled(this.disabled),this.$.ampmPickerButton.setDisabled(this.disabled)},localeChanged:function(){this.is24HrMode=null,this.refresh()},is24HrModeChanged:function(){this.refresh()},valueChanged:function(){this.refresh()},updateHour:function(e,t){var n=t.selected.value;if(!this.is24HrMode){var i=this.$.ampmPicker.getParent().controlAtIndex(0).content;n=n+(12==n?-12:0)+(this.isAm(i)?0:12)}return this.value=this.calcTime(n,this.value.getMinutes()),this.doSelect({name:this.name,value:this.value}),!0},updateMinute:function(e,t){return this.value=this.calcTime(this.value.getHours(),t.selected.value),this.doSelect({name:this.name,value:this.value}),!0},updateAmPm:function(e,t){var n=this.value.getHours();return this.is24HrMode||(n+=n>11?this.isAm(t.content)?-12:0:this.isAm(t.content)?0:12),this.value=this.calcTime(n,this.value.getMinutes()),this.doSelect({name:this.name,value:this.value}),!0},calcTime:function(e,t){return new Date(this.value.getFullYear(),this.value.getMonth(),this.value.getDate(),e,t,this.value.getSeconds(),this.value.getMilliseconds())},isAm:function(e){var t,n;try{t=this._tf.getAmCaption(),n=this._tf.getPmCaption()}catch(i){t="AM",n="PM"}return e==t?!0:!1},refresh:function(){this.destroyClientControls(),this.initDefaults(),this.render()}});

// RadioButton.js
enyo.kind({name:"onyx.RadioButton",kind:"Button",classes:"onyx-radiobutton"});

// RadioGroup.js
enyo.kind({name:"onyx.RadioGroup",kind:"Group",defaultKind:"onyx.RadioButton",highlander:!0});

// ToggleButton.js
enyo.kind({name:"onyx.ToggleButton",classes:"onyx-toggle-button",published:{active:!1,value:!1,onContent:"On",offContent:"Off",disabled:!1},events:{onChange:""},handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish"},components:[{name:"contentOn",classes:"onyx-toggle-content on"},{name:"contentOff",classes:"onyx-toggle-content off"},{classes:"onyx-toggle-button-knob"}],create:function(){this.inherited(arguments),this.value=Boolean(this.value||this.active),this.onContentChanged(),this.offContentChanged(),this.disabledChanged()},rendered:function(){this.inherited(arguments),this.updateVisualState()},updateVisualState:function(){this.addRemoveClass("off",!this.value),this.$.contentOn.setShowing(this.value),this.$.contentOff.setShowing(!this.value),this.setActive(this.value)},valueChanged:function(){this.updateVisualState(),this.doChange({value:this.value})},activeChanged:function(){this.setValue(this.active),this.bubble("onActivate")},onContentChanged:function(){this.$.contentOn.setContent(this.onContent||""),this.$.contentOn.addRemoveClass("empty",!this.onContent)},offContentChanged:function(){this.$.contentOff.setContent(this.offContent||""),this.$.contentOff.addRemoveClass("empty",!this.onContent)},disabledChanged:function(){this.addRemoveClass("disabled",this.disabled)},updateValue:function(e){this.disabled||this.setValue(e)},tap:function(){this.updateValue(!this.value)},dragstart:function(e,t){return t.horizontal?(t.preventDefault(),this.dragging=!0,this.dragged=!1,!0):void 0},drag:function(e,t){if(this.dragging){var n=t.dx;return Math.abs(n)>10&&(this.updateValue(n>0),this.dragged=!0),!0}},dragfinish:function(e,t){this.dragging=!1,this.dragged&&t.preventTap()}});

// ToggleIconButton.js
enyo.kind({name:"onyx.ToggleIconButton",kind:"onyx.Icon",published:{active:!1,value:!1},events:{onChange:""},classes:"onyx-icon-button onyx-icon-toggle",activeChanged:function(){this.addRemoveClass("active",this.value),this.bubble("onActivate")},updateValue:function(e){this.disabled||(this.setValue(e),this.doChange({value:this.value}))},tap:function(){this.updateValue(!this.value)},valueChanged:function(){this.setActive(this.value)},create:function(){this.inherited(arguments),this.value=Boolean(this.value||this.active)},rendered:function(){this.inherited(arguments),this.valueChanged(),this.removeClass("onyx-icon")}});

// Toolbar.js
enyo.kind({name:"onyx.Toolbar",classes:"onyx onyx-toolbar onyx-toolbar-inline",create:function(){this.inherited(arguments),this.hasClass("onyx-menu-toolbar")&&enyo.platform.android>=4&&this.applyStyle("position","static")}});

// ProgressBar.js
enyo.kind({name:"onyx.ProgressBar",classes:"onyx-progress-bar",published:{progress:0,min:0,max:100,barClasses:"",showStripes:!0,animateStripes:!0,increment:0},events:{onAnimateProgressFinish:""},components:[{name:"progressAnimator",kind:"Animator",onStep:"progressAnimatorStep",onEnd:"progressAnimatorComplete"},{name:"bar",classes:"onyx-progress-bar-bar"}],create:function(){this.inherited(arguments),this.progressChanged(),this.barClassesChanged(),this.showStripesChanged(),this.animateStripesChanged()},barClassesChanged:function(e){this.$.bar.removeClass(e),this.$.bar.addClass(this.barClasses)},showStripesChanged:function(){this.$.bar.addRemoveClass("striped",this.showStripes)},animateStripesChanged:function(){this.$.bar.addRemoveClass("animated",this.animateStripes)},progressChanged:function(){this.progress=this.clampValue(this.min,this.max,this.progress);var e=this.calcPercent(this.progress);this.updateBarPosition(e)},calcIncrement:function(e){return Math.round(e/this.increment)*this.increment},clampValue:function(e,t,n){return Math.max(e,Math.min(n,t))},calcRatio:function(e){return(e-this.min)/(this.max-this.min)},calcPercent:function(e){return 100*this.calcRatio(e)},updateBarPosition:function(e){this.$.bar.applyStyle("width",e+"%")},animateProgressTo:function(e){this.$.progressAnimator.play({startValue:this.progress,endValue:e,node:this.hasNode()})},progressAnimatorStep:function(e){return this.setProgress(e.value),!0},progressAnimatorComplete:function(e){return this.doAnimateProgressFinish(e),!0}});

// ProgressButton.js
enyo.kind({name:"onyx.ProgressButton",kind:"onyx.ProgressBar",classes:"onyx-progress-button",events:{onCancel:""},components:[{name:"progressAnimator",kind:"Animator",onStep:"progressAnimatorStep",onEnd:"progressAnimatorComplete"},{name:"bar",classes:"onyx-progress-bar-bar onyx-progress-button-bar"},{name:"client",classes:"onyx-progress-button-client"},{kind:"onyx.Icon",src:"$lib/onyx/images/progress-button-cancel.png",classes:"onyx-progress-button-icon",ontap:"cancelTap"}],cancelTap:function(){this.doCancel()}});

// Scrim.js
enyo.kind({name:"onyx.Scrim",showing:!1,classes:"onyx-scrim enyo-fit",floating:!1,create:function(){this.inherited(arguments),this.zStack=[],this.floating&&this.setParent(enyo.floatingLayer)},showingChanged:function(){this.floating&&this.showing&&!this.hasNode()&&this.render(),this.inherited(arguments)},addZIndex:function(e){0>enyo.indexOf(e,this.zStack)&&this.zStack.push(e)},removeZIndex:function(e){enyo.remove(e,this.zStack)},showAtZIndex:function(e){this.addZIndex(e),void 0!==e&&this.setZIndex(e),this.show()},hideAtZIndex:function(e){if(this.removeZIndex(e),this.zStack.length){var t=this.zStack[this.zStack.length-1];this.setZIndex(t)}else this.hide()},setZIndex:function(e){this.zIndex=e,this.applyStyle("z-index",e)},make:function(){return this}}),enyo.kind({name:"onyx.scrimSingleton",kind:null,constructor:function(e,t){this.instanceName=e,enyo.setPath(this.instanceName,this),this.props=t||{}},make:function(){var e=new onyx.Scrim(this.props);return enyo.setPath(this.instanceName,e),e},showAtZIndex:function(e){var t=this.make();t.showAtZIndex(e)},hideAtZIndex:enyo.nop,show:function(){var e=this.make();e.show()}}),new onyx.scrimSingleton("onyx.scrim",{floating:!0,classes:"onyx-scrim-translucent"}),new onyx.scrimSingleton("onyx.scrimTransparent",{floating:!0,classes:"onyx-scrim-transparent"});

// Slider.js
enyo.kind({name:"onyx.Slider",kind:"onyx.ProgressBar",classes:"onyx-slider",published:{value:0,lockBar:!0,tappable:!0},events:{onChange:"",onChanging:"",onAnimateFinish:""},showStripes:!1,handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish"},moreComponents:[{kind:"Animator",onStep:"animatorStep",onEnd:"animatorComplete"},{classes:"onyx-slider-taparea"},{name:"knob",classes:"onyx-slider-knob"}],create:function(){this.inherited(arguments),enyo.platform.firefoxOS&&(this.moreComponents[2].ondown="fxosDown",this.moreComponents[2].onenter="fxosEnter",this.moreComponents[2].ondrag="fxosDrag",this.moreComponents[2].onleave="fxosLeave",this.moreComponents[2].onup="fxosUp"),this.createComponents(this.moreComponents),this.valueChanged()},valueChanged:function(){this.value=this.clampValue(this.min,this.max,this.value);var e=this.calcPercent(this.value);this.updateKnobPosition(e),this.lockBar&&this.setProgress(this.value)},updateKnobPosition:function(e){this.$.knob.applyStyle("left",e+"%")},calcKnobPosition:function(e){var t=e.clientX-this.hasNode().getBoundingClientRect().left;return t/this.getBounds().width*(this.max-this.min)+this.min},dragstart:function(e,t){return t.horizontal?(t.preventDefault(),this.dragging=!0,!0):void 0},drag:function(e,t){if(this.dragging){var n=this.calcKnobPosition(t);return n=this.increment?this.calcIncrement(n):n,this.setValue(n),this.doChanging({value:this.value}),!0}},dragfinish:function(e,t){return this.dragging=!1,t.preventTap(),this.doChange({value:this.value}),!0},tap:function(e,t){if(this.tappable){var n=this.calcKnobPosition(t);return n=this.increment?this.calcIncrement(n):n,this.tapped=!0,this.animateTo(n),!0}},fxosDown:function(){this.$.knob.addClass("pressed"),this._isInControl=!0},fxosEnter:function(){this._isInControl=!0},fxosDrag:function(){this.$.knob.addRemoveClass("pressed",this._isInControl)},fxosLeave:function(){this.$.knob.removeClass("pressed"),this._isInControl=!1},fxosUp:function(){this.$.knob.removeClass("pressed"),this._isInControl=!1},animateTo:function(e){this.$.animator.play({startValue:this.value,endValue:e,node:this.hasNode()})},animatorStep:function(e){return this.setValue(e.value),!0},animatorComplete:function(e){return this.tapped&&(this.tapped=!1,this.doChange({value:this.value})),this.doAnimateFinish(e),!0}});

// RangeSlider.js
enyo.kind({name:"onyx.RangeSlider",kind:"onyx.ProgressBar",classes:"onyx-slider",published:{rangeMin:0,rangeMax:100,rangeStart:0,rangeEnd:100,beginValue:0,endValue:0},events:{onChange:"",onChanging:""},showStripes:!1,showLabels:!1,handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish",ondown:"down"},moreComponents:[{name:"startKnob",classes:"onyx-slider-knob"},{name:"endKnob",classes:"onyx-slider-knob onyx-range-slider-knob"}],create:function(){this.inherited(arguments),this.createComponents(this.moreComponents),this.initControls()},rendered:function(){this.inherited(arguments);var e=this.calcPercent(this.beginValue);this.updateBarPosition(e)},initControls:function(){this.$.bar.applyStyle("position","relative"),this.refreshRangeSlider(),this.showLabels&&(this.$.startKnob.createComponent({name:"startLabel",kind:"onyx.RangeSliderKnobLabel"}),this.$.endKnob.createComponent({name:"endLabel",kind:"onyx.RangeSliderKnobLabel"}))},refreshRangeSlider:function(){this.beginValue=this.calcKnobPercent(this.rangeStart),this.endValue=this.calcKnobPercent(this.rangeEnd),this.beginValueChanged(),this.endValueChanged()},calcKnobRatio:function(e){return(e-this.rangeMin)/(this.rangeMax-this.rangeMin)},calcKnobPercent:function(e){return 100*this.calcKnobRatio(e)},beginValueChanged:function(e){if(void 0===e){var t=this.calcPercent(this.beginValue);this.updateKnobPosition(t,this.$.startKnob)}},endValueChanged:function(e){if(void 0===e){var t=this.calcPercent(this.endValue);this.updateKnobPosition(t,this.$.endKnob)}},calcKnobPosition:function(e){var t=e.clientX-this.hasNode().getBoundingClientRect().left;return t/this.getBounds().width*(this.max-this.min)+this.min},updateKnobPosition:function(e,t){t.applyStyle("left",e+"%"),this.updateBarPosition()},updateBarPosition:function(){if(void 0!==this.$.startKnob&&void 0!==this.$.endKnob){var e=this.calcKnobPercent(this.rangeStart),t=this.calcKnobPercent(this.rangeEnd)-e;this.$.bar.applyStyle("left",e+"%"),this.$.bar.applyStyle("width",t+"%")}},calcRangeRatio:function(e){return e/100*(this.rangeMax-this.rangeMin)+this.rangeMin-this.increment/2},swapZIndex:function(e){"startKnob"===e?(this.$.startKnob.applyStyle("z-index",1),this.$.endKnob.applyStyle("z-index",0)):"endKnob"===e&&(this.$.startKnob.applyStyle("z-index",0),this.$.endKnob.applyStyle("z-index",1))},down:function(e){this.swapZIndex(e.name)},dragstart:function(e,t){return t.horizontal?(t.preventDefault(),this.dragging=!0,!0):void 0},drag:function(e,t){if(this.dragging){var n,i,s,o=this.calcKnobPosition(t);if("startKnob"===e.name&&o>=0){if(!(this.endValue>=o&&-1===t.xDirection||this.endValue>=o))return this.drag(this.$.endKnob,t);this.setBeginValue(o),n=this.calcRangeRatio(this.beginValue),i=this.increment?this.calcIncrement(n+.5*this.increment):n,s=this.calcKnobPercent(i),this.updateKnobPosition(s,this.$.startKnob),this.setRangeStart(i),this.doChanging({value:i})}else if("endKnob"===e.name&&100>=o){if(!(o>=this.beginValue&&1===t.xDirection||o>=this.beginValue))return this.drag(this.$.startKnob,t);this.setEndValue(o),n=this.calcRangeRatio(this.endValue),i=this.increment?this.calcIncrement(n+.5*this.increment):n,s=this.calcKnobPercent(i),this.updateKnobPosition(s,this.$.endKnob),this.setRangeEnd(i),this.doChanging({value:i})}return!0}},dragfinish:function(e,t){this.dragging=!1,t.preventTap();var n;return"startKnob"===e.name?(n=this.calcRangeRatio(this.beginValue),this.doChange({value:n,startChanged:!0})):"endKnob"===e.name&&(n=this.calcRangeRatio(this.endValue),this.doChange({value:n,startChanged:!1})),!0},rangeMinChanged:function(){this.refreshRangeSlider()},rangeMaxChanged:function(){this.refreshRangeSlider()},rangeStartChanged:function(){this.refreshRangeSlider()},rangeEndChanged:function(){this.refreshRangeSlider()},setStartLabel:function(e){this.$.startKnob.waterfallDown("onSetLabel",e)},setEndLabel:function(e){this.$.endKnob.waterfallDown("onSetLabel",e)}}),enyo.kind({name:"onyx.RangeSliderKnobLabel",classes:"onyx-range-slider-label",handlers:{onSetLabel:"setLabel"},setLabel:function(e,t){this.setContent(t)}});

// Item.js
enyo.kind({name:"onyx.Item",classes:"onyx-item",tapHighlight:!0,handlers:{onhold:"hold",onrelease:"release"},hold:function(e,t){this.tapHighlight&&onyx.Item.addRemoveFlyweightClass(this.controlParent||this,"onyx-highlight",!0,t)},release:function(e,t){this.tapHighlight&&onyx.Item.addRemoveFlyweightClass(this.controlParent||this,"onyx-highlight",!1,t)},statics:{addRemoveFlyweightClass:function(e,t,n,i,s){var o=i.flyweight;if(o){var a=void 0!==s?s:i.index;o.performOnRow(a,function(){e.addRemoveClass(t,n)})}}}});

// Spinner.js
enyo.kind({name:"onyx.Spinner",classes:"onyx-spinner",stop:function(){this.setShowing(!1)},start:function(){this.setShowing(!0)},toggle:function(){this.setShowing(!this.getShowing())}});

// MoreToolbar.js
enyo.kind({name:"onyx.MoreToolbar",classes:"onyx-toolbar onyx-more-toolbar",menuClass:"",movedClass:"",layoutKind:"FittableColumnsLayout",noStretch:!0,handlers:{onHide:"reflow"},published:{clientLayoutKind:"FittableColumnsLayout"},tools:[{name:"client",noStretch:!0,fit:!0,classes:"onyx-toolbar-inline"},{name:"nard",kind:"onyx.MenuDecorator",showing:!1,onActivate:"activated",components:[{kind:"onyx.IconButton",classes:"onyx-more-button"},{name:"menu",kind:"onyx.Menu",scrolling:!1,classes:"onyx-more-menu"}]}],initComponents:function(){this.menuClass&&this.menuClass.length>0&&!this.$.menu.hasClass(this.menuClass)&&this.$.menu.addClass(this.menuClass),this.createChrome(this.tools),this.inherited(arguments),this.$.client.setLayoutKind(this.clientLayoutKind)},clientLayoutKindChanged:function(){this.$.client.setLayoutKind(this.clientLayoutKind)},reflow:function(){this.inherited(arguments),this.isContentOverflowing()?(this.$.nard.show(),this.popItem()&&this.reflow()):this.tryPushItem()?this.reflow():this.$.menu.children.length||(this.$.nard.hide(),this.$.menu.hide())},activated:function(e,t){this.addRemoveClass("active",t.originator.active)},popItem:function(){var e=this.findCollapsibleItem();if(e){this.movedClass&&this.movedClass.length>0&&!e.hasClass(this.movedClass)&&e.addClass(this.movedClass),this.$.menu.addChild(e,null);var t=this.$.menu.hasNode();return t&&e.hasNode()&&e.insertNodeInParent(t),!0}},pushItem:function(){var e=this.$.menu.children,t=e[0];if(t){this.movedClass&&this.movedClass.length>0&&t.hasClass(this.movedClass)&&t.removeClass(this.movedClass),this.$.client.addChild(t);var n=this.$.client.hasNode();if(n&&t.hasNode()){for(var i,s,o=0;this.$.client.children.length>o;o++){var a=this.$.client.children[o];if(void 0!==a.toolbarIndex&&a.toolbarIndex!=o){i=a,s=o;break}}if(i&&i.hasNode()){t.insertNodeInParent(n,i.node);var h=this.$.client.children.pop();this.$.client.children.splice(s,0,h)}else t.appendNodeToParent(n)}return!0}},tryPushItem:function(){if(this.pushItem()){if(!this.isContentOverflowing())return!0;this.popItem()}},isContentOverflowing:function(){if(this.$.client.hasNode()){var e=this.$.client.children,t=e.length&&e[e.length-1].hasNode();if(t)return this.$.client.reflow(),t.offsetLeft+t.offsetWidth>this.$.client.node.clientWidth}},findCollapsibleItem:function(){for(var e,t=this.$.client.children,n=t.length-1;e=t[n];n--){if(!e.unmoveable)return e;void 0===e.toolbarIndex&&(e.toolbarIndex=n)}}});

// IntegerPicker.js
enyo.kind({name:"onyx.IntegerPicker",kind:"onyx.Picker",published:{value:0,min:0,max:9},create:function(){this.inherited(arguments),this.rangeChanged()},minChanged:function(){this.destroyClientControls(),this.rangeChanged(),this.render()},maxChanged:function(){this.destroyClientControls(),this.rangeChanged(),this.render()},rangeChanged:function(){for(var e=this.min;this.max>=e;e++)this.createComponent({content:e,active:e===this.value?!0:!1})},valueChanged:function(){var e=this.getClientControls(),t=e.length;this.value=this.value>=this.min&&this.value<=this.max?this.value:this.min;for(var n=0;t>n;n++)if(this.value===parseInt(e[n].content,10)){this.setSelected(e[n]);break}},selectedChanged:function(e){e&&e.removeClass("selected"),this.selected&&(this.selected.addClass("selected"),this.doChange({selected:this.selected,content:this.selected.content})),this.value=parseInt(this.selected.content,10)}});

// ContextualPopup.js
enyo.kind({name:"onyx.ContextualPopup",kind:"enyo.Popup",modal:!0,autoDismiss:!0,floating:!1,classes:"onyx-contextual-popup enyo-unselectable",published:{maxHeight:100,scrolling:!0,title:void 0,actionButtons:[]},vertFlushMargin:60,horizFlushMargin:50,widePopup:200,longPopup:200,horizBuffer:16,events:{onTap:""},handlers:{onRequestShowMenu:"requestShow",onRequestHideMenu:"requestHide"},components:[{name:"title",classes:"onyx-contextual-popup-title"},{classes:"onyx-contextual-popup-scroller",components:[{name:"client",kind:"enyo.Scroller",vertical:"auto",classes:"enyo-unselectable",thumb:!1,strategyKind:"TouchScrollStrategy"}]},{name:"actionButtons",classes:"onyx-contextual-popup-action-buttons"}],scrollerName:"client",create:function(){this.inherited(arguments),this.maxHeightChanged(),this.titleChanged(),this.actionButtonsChanged()},getScroller:function(){return this.$[this.scrollerName]},titleChanged:function(){this.$.title.setContent(this.title)},actionButtonsChanged:function(){for(var t=0;this.actionButtons.length>t;t++)this.$.actionButtons.createComponent({kind:"onyx.Button",content:this.actionButtons[t].content,classes:this.actionButtons[t].classes+" onyx-contextual-popup-action-button",name:this.actionButtons[t].name?this.actionButtons[t].name:"ActionButton"+t,index:t,tap:this.actionButtons[t].ontap?this.owner.bindSafely(this.actionButtons[t].ontap):this.bindSafely(this.tapHandler)})},tapHandler:function(t,e){return e.actionButton=!0,e.popup=this,this.bubble("ontap",e),!0},maxHeightChanged:function(){this.scrolling&&this.getScroller().setMaxHeight(this.maxHeight+"px")},showingChanged:function(){this.inherited(arguments),this.scrolling&&this.getScroller().setShowing(this.showing),this.adjustPosition()},requestShow:function(t,e){var i=e.activator.hasNode();return i&&(this.activatorOffset=this.getPageOffset(i)),this.show(),!0},applyPosition:function(t){var e="";for(var i in t)e+=i+":"+t[i]+(isNaN(t[i])?"; ":"px; ");this.addStyles(e)},getPageOffset:function(t){var e=this.getBoundingRect(t),i=void 0===window.pageYOffset?document.documentElement.scrollTop:window.pageYOffset,n=void 0===window.pageXOffset?document.documentElement.scrollLeft:window.pageXOffset,s=void 0===e.height?e.bottom-e.top:e.height,o=void 0===e.width?e.right-e.left:e.width;return{top:e.top+i,left:e.left+n,height:s,width:o}},adjustPosition:function(){if(this.showing&&this.hasNode()){this.resetPositioning();var t=this.getViewWidth(),e=this.getViewHeight(),i=this.vertFlushMargin,n=e-this.vertFlushMargin,s=this.horizFlushMargin,o=t-this.horizFlushMargin;if(i>this.activatorOffset.top+this.activatorOffset.height||this.activatorOffset.top>n){if(this.applyVerticalFlushPositioning(s,o))return;if(this.applyHorizontalFlushPositioning(s,o))return;if(this.applyVerticalPositioning())return}else if((s>this.activatorOffset.left+this.activatorOffset.width||this.activatorOffset.left>o)&&this.applyHorizontalPositioning())return;var a=this.getBoundingRect(this.node);if(a.width>this.widePopup){if(this.applyVerticalPositioning())return}else if(a.height>this.longPopup&&this.applyHorizontalPositioning())return;if(this.applyVerticalPositioning())return;if(this.applyHorizontalPositioning())return}},initVerticalPositioning:function(){this.resetPositioning(),this.addClass("vertical");var t=this.getBoundingRect(this.node),e=this.getViewHeight();return this.floating?e/2>this.activatorOffset.top?(this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height,bottom:"auto"}),this.addClass("below")):(this.applyPosition({top:this.activatorOffset.top-t.height,bottom:"auto"}),this.addClass("above")):t.top+t.height>e&&e-t.bottom<t.top-t.height?this.addClass("above"):this.addClass("below"),t=this.getBoundingRect(this.node),t.top+t.height>e||0>t.top?!1:!0},applyVerticalPositioning:function(){if(!this.initVerticalPositioning())return!1;var t=this.getBoundingRect(this.node),e=this.getViewWidth();if(this.floating){var i=this.activatorOffset.left+this.activatorOffset.width/2-t.width/2;i+t.width>e?(this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width-t.width}),this.addClass("left")):0>i?(this.applyPosition({left:this.activatorOffset.left}),this.addClass("right")):this.applyPosition({left:i})}else{var n=this.activatorOffset.left+this.activatorOffset.width/2-t.left-t.width/2;t.right+n>e?(this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width-t.right}),this.addRemoveClass("left",!0)):0>t.left+n?this.addRemoveClass("right",!0):this.applyPosition({left:n})}return!0},applyVerticalFlushPositioning:function(t,e){if(!this.initVerticalPositioning())return!1;var i=this.getBoundingRect(this.node),n=this.getViewWidth();return t>this.activatorOffset.left+this.activatorOffset.width/2?(this.activatorOffset.left+this.activatorOffset.width/2<this.horizBuffer?this.applyPosition({left:this.horizBuffer+(this.floating?0:-i.left)}):this.applyPosition({left:this.activatorOffset.width/2+(this.floating?this.activatorOffset.left:0)}),this.addClass("right"),this.addClass("corner"),!0):this.activatorOffset.left+this.activatorOffset.width/2>e?(this.activatorOffset.left+this.activatorOffset.width/2>n-this.horizBuffer?this.applyPosition({left:n-this.horizBuffer-i.right}):this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width/2-i.right}),this.addClass("left"),this.addClass("corner"),!0):!1},initHorizontalPositioning:function(){this.resetPositioning();var t=this.getBoundingRect(this.node),e=this.getViewWidth();return this.floating?e/2>this.activatorOffset.left+this.activatorOffset.width?(this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width}),this.addRemoveClass("left",!0)):(this.applyPosition({left:this.activatorOffset.left-t.width}),this.addRemoveClass("right",!0)):this.activatorOffset.left-t.width>0?(this.applyPosition({left:this.activatorOffset.left-t.left-t.width}),this.addRemoveClass("right",!0)):(this.applyPosition({left:this.activatorOffset.width}),this.addRemoveClass("left",!0)),this.addRemoveClass("horizontal",!0),t=this.getBoundingRect(this.node),0>t.left||t.left+t.width>e?!1:!0},applyHorizontalPositioning:function(){if(!this.initHorizontalPositioning())return!1;var t=this.getBoundingRect(this.node),e=this.getViewHeight(),i=this.activatorOffset.top+this.activatorOffset.height/2;return this.floating?i>=e/2-.05*e&&e/2+.05*e>=i?this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height/2-t.height/2,bottom:"auto"}):e/2>this.activatorOffset.top+this.activatorOffset.height?(this.applyPosition({top:this.activatorOffset.top-this.activatorOffset.height,bottom:"auto"}),this.addRemoveClass("high",!0)):(this.applyPosition({top:this.activatorOffset.top-t.height+2*this.activatorOffset.height,bottom:"auto"}),this.addRemoveClass("low",!0)):i>=e/2-.05*e&&e/2+.05*e>=i?this.applyPosition({top:(this.activatorOffset.height-t.height)/2}):e/2>this.activatorOffset.top+this.activatorOffset.height?(this.applyPosition({top:-this.activatorOffset.height}),this.addRemoveClass("high",!0)):(this.applyPosition({top:t.top-t.height-this.activatorOffset.top+this.activatorOffset.height}),this.addRemoveClass("low",!0)),!0},applyHorizontalFlushPositioning:function(t,e){if(!this.initHorizontalPositioning())return!1;var i=this.getBoundingRect(this.node);return this.getViewWidth(),this.floating?innerHeight/2>this.activatorOffset.top?(this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height/2}),this.addRemoveClass("high",!0)):(this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height/2-i.height}),this.addRemoveClass("low",!0)):i.top+i.height>innerHeight&&innerHeight-i.bottom<i.top-i.height?(this.applyPosition({top:i.top-i.height-this.activatorOffset.top-this.activatorOffset.height/2}),this.addRemoveClass("low",!0)):(this.applyPosition({top:this.activatorOffset.height/2}),this.addRemoveClass("high",!0)),t>this.activatorOffset.left+this.activatorOffset.width?(this.addClass("left"),this.addClass("corner"),!0):this.activatorOffset.left>e?(this.addClass("right"),this.addClass("corner"),!0):!1},getBoundingRect:function(t){var e=t.getBoundingClientRect();return e.width&&e.height?e:{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.right-e.left,height:e.bottom-e.top}},getViewHeight:function(){return void 0===window.innerHeight?document.documentElement.clientHeight:window.innerHeight},getViewWidth:function(){return void 0===window.innerWidth?document.documentElement.clientWidth:window.innerWidth},resetPositioning:function(){this.removeClass("right"),this.removeClass("left"),this.removeClass("high"),this.removeClass("low"),this.removeClass("corner"),this.removeClass("below"),this.removeClass("above"),this.removeClass("vertical"),this.removeClass("horizontal"),this.applyPosition({left:"auto"}),this.applyPosition({top:"auto"})},resizeHandler:function(){this.inherited(arguments),this.adjustPosition()},requestHide:function(){this.setShowing(!1)}});

// ContextualLayout.js
enyo.kind({name:"enyo.ContextualLayout",kind:"Layout",adjustPosition:function(){if(this.container.showing&&this.container.hasNode()){this.resetPositioning();var t=this.getViewWidth(),e=this.getViewHeight(),i=this.container.vertFlushMargin,n=e-this.container.vertFlushMargin,s=this.container.horizFlushMargin,o=t-this.container.horizFlushMargin;if(i>this.offset.top+this.offset.height||this.offset.top>n){if(this.applyVerticalFlushPositioning(s,o))return;if(this.applyHorizontalFlushPositioning(s,o))return;if(this.applyVerticalPositioning())return}else if((s>this.offset.left+this.offset.width||this.offset.left>o)&&this.applyHorizontalPositioning())return;var a=this.getBoundingRect(this.container.node);if(a.width>this.container.widePopup){if(this.applyVerticalPositioning())return}else if(a.height>this.container.longPopup&&this.applyHorizontalPositioning())return;if(this.applyVerticalPositioning())return;if(this.applyHorizontalPositioning())return}},initVerticalPositioning:function(){this.resetPositioning(),this.container.addClass("vertical");var t=this.getBoundingRect(this.container.node),e=this.getViewHeight();return this.container.floating?e/2>this.offset.top?(this.applyPosition({top:this.offset.top+this.offset.height,bottom:"auto"}),this.container.addClass("below")):(this.applyPosition({top:this.offset.top-t.height,bottom:"auto"}),this.container.addClass("above")):t.top+t.height>e&&e-t.bottom<t.top-t.height?this.container.addClass("above"):this.container.addClass("below"),t=this.getBoundingRect(this.container.node),t.top+t.height>e||0>t.top?!1:!0},applyVerticalPositioning:function(){if(!this.initVerticalPositioning())return!1;var t=this.getBoundingRect(this.container.node),e=this.getViewWidth();if(this.container.floating){var i=this.offset.left+this.offset.width/2-t.width/2;i+t.width>e?(this.applyPosition({left:this.offset.left+this.offset.width-t.width}),this.container.addClass("left")):0>i?(this.applyPosition({left:this.offset.left}),this.container.addClass("right")):this.applyPosition({left:i})}else{var n=this.offset.left+this.offset.width/2-t.left-t.width/2;t.right+n>e?(this.applyPosition({left:this.offset.left+this.offset.width-t.right}),this.container.addRemoveClass("left",!0)):0>t.left+n?this.container.addRemoveClass("right",!0):this.applyPosition({left:n})}return!0},applyVerticalFlushPositioning:function(t,e){if(!this.initVerticalPositioning())return!1;var i=this.getBoundingRect(this.container.node),n=this.getViewWidth();return t>this.offset.left+this.offset.width/2?(this.offset.left+this.offset.width/2<this.container.horizBuffer?this.applyPosition({left:this.container.horizBuffer+(this.container.floating?0:-i.left)}):this.applyPosition({left:this.offset.width/2+(this.container.floating?this.offset.left:0)}),this.container.addClass("right"),this.container.addClass("corner"),!0):this.offset.left+this.offset.width/2>e?(this.offset.left+this.offset.width/2>n-this.container.horizBuffer?this.applyPosition({left:n-this.container.horizBuffer-i.right}):this.applyPosition({left:this.offset.left+this.offset.width/2-i.right}),this.container.addClass("left"),this.container.addClass("corner"),!0):!1},initHorizontalPositioning:function(){this.resetPositioning();var t=this.getBoundingRect(this.container.node),e=this.getViewWidth();return this.container.floating?e/2>this.offset.left+this.offset.width?(this.applyPosition({left:this.offset.left+this.offset.width}),this.container.addRemoveClass("left",!0)):(this.applyPosition({left:this.offset.left-t.width}),this.container.addRemoveClass("right",!0)):this.offset.left-t.width>0?(this.applyPosition({left:this.offset.left-t.left-t.width}),this.container.addRemoveClass("right",!0)):(this.applyPosition({left:this.offset.width}),this.container.addRemoveClass("left",!0)),this.container.addRemoveClass("horizontal",!0),t=this.getBoundingRect(this.container.node),0>t.left||t.left+t.width>e?!1:!0},applyHorizontalPositioning:function(){if(!this.initHorizontalPositioning())return!1;var t=this.getBoundingRect(this.container.node),e=this.getViewHeight(),i=this.offset.top+this.offset.height/2;return this.container.floating?i>=e/2-.05*e&&e/2+.05*e>=i?this.applyPosition({top:this.offset.top+this.offset.height/2-t.height/2,bottom:"auto"}):e/2>this.offset.top+this.offset.height?(this.applyPosition({top:this.offset.top-this.offset.height,bottom:"auto"}),this.container.addRemoveClass("high",!0)):(this.applyPosition({top:this.offset.top-t.height+2*this.offset.height,bottom:"auto"}),this.container.addRemoveClass("low",!0)):i>=e/2-.05*e&&e/2+.05*e>=i?this.applyPosition({top:(this.offset.height-t.height)/2}):e/2>this.offset.top+this.offset.height?(this.applyPosition({top:-this.offset.height}),this.container.addRemoveClass("high",!0)):(this.applyPosition({top:t.top-t.height-this.offset.top+this.offset.height}),this.container.addRemoveClass("low",!0)),!0},applyHorizontalFlushPositioning:function(t,e){if(!this.initHorizontalPositioning())return!1;var i=this.getBoundingRect(this.container.node),n=this.getViewHeight();return this.container.floating?n/2>this.offset.top?(this.applyPosition({top:this.offset.top+this.offset.height/2}),this.container.addRemoveClass("high",!0)):(this.applyPosition({top:this.offset.top+this.offset.height/2-i.height}),this.container.addRemoveClass("low",!0)):i.top+i.height>n&&n-i.bottom<i.top-i.height?(this.applyPosition({top:i.top-i.height-this.offset.top-this.offset.height/2}),this.container.addRemoveClass("low",!0)):(this.applyPosition({top:this.offset.height/2}),this.container.addRemoveClass("high",!0)),t>this.offset.left+this.offset.width?(this.container.addClass("left"),this.container.addClass("corner"),!0):this.offset.left>e?(this.container.addClass("right"),this.container.addClass("corner"),!0):!1},getBoundingRect:function(t){var e=t.getBoundingClientRect();return e.width&&e.height?e:{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.right-e.left,height:e.bottom-e.top}},getViewHeight:function(){return void 0===window.innerHeight?document.documentElement.clientHeight:window.innerHeight},getViewWidth:function(){return void 0===window.innerWidth?document.documentElement.clientWidth:window.innerWidth},applyPosition:function(t){var e="";for(var i in t)e+=i+":"+t[i]+(isNaN(t[i])?"; ":"px; ");this.container.addStyles(e)},resetPositioning:function(){this.container.removeClass("right"),this.container.removeClass("left"),this.container.removeClass("high"),this.container.removeClass("low"),this.container.removeClass("corner"),this.container.removeClass("below"),this.container.removeClass("above"),this.container.removeClass("vertical"),this.container.removeClass("horizontal"),this.applyPosition({left:"auto"}),this.applyPosition({top:"auto"})},reflow:function(){this.offset=this.container.activatorOffset,this.adjustPosition()}});

// FittableLayout.js
enyo.kind({name:"enyo.FittableLayout",kind:"Layout",calcFitIndex:function(){for(var t,e=0,i=this.container.children;t=i[e];e++)if(t.fit&&t.showing)return e},getFitControl:function(){var t=this.container.children,e=t[this.fitIndex];return e&&e.fit&&e.showing||(this.fitIndex=this.calcFitIndex(),e=t[this.fitIndex]),e},getLastControl:function(){for(var t=this.container.children,e=t.length-1,i=t[e];(i=t[e])&&!i.showing;)e--;return i},_reflow:function(t,e,i,n){this.container.addRemoveClass("enyo-stretch",!this.container.noStretch);var s=this.getFitControl();if(s){var o,a=0,h=0,r=0,l=this.container.hasNode();l&&(o=enyo.dom.calcPaddingExtents(l),a=l[e]-(o[i]+o[n]));var d=s.getBounds();h=d[i]-(o&&o[i]||0);var c=this.getLastControl();if(c){var u=enyo.dom.getComputedBoxValue(c.hasNode(),"margin",n)||0;if(c!=s){var f=c.getBounds(),g=d[i]+d[t],p=f[i]+f[t]+u;r=p-g}else r=u}var m=a-(h+r);s.applyStyle(t,m+"px")}},reflow:function(){"h"==this.orient?this._reflow("width","clientWidth","left","right"):this._reflow("height","clientHeight","top","bottom")}}),enyo.kind({name:"enyo.FittableColumnsLayout",kind:"FittableLayout",orient:"h",layoutClass:"enyo-fittable-columns-layout"}),enyo.kind({name:"enyo.FittableRowsLayout",kind:"FittableLayout",layoutClass:"enyo-fittable-rows-layout",orient:"v"});

// FittableRows.js
enyo.kind({name:"enyo.FittableRows",layoutKind:"FittableRowsLayout",noStretch:!1});

// FittableColumns.js
enyo.kind({name:"enyo.FittableColumns",layoutKind:"FittableColumnsLayout",noStretch:!1});

// FlyweightRepeater.js
enyo.kind({name:"enyo.FlyweightRepeater",published:{count:0,noSelect:!1,multiSelect:!1,toggleSelected:!1,clientClasses:"",clientStyle:"",rowOffset:0,orient:"v"},events:{onSetupItem:"",onRenderRow:""},bottomUp:!1,components:[{kind:"Selection",onSelect:"selectDeselect",onDeselect:"selectDeselect"},{name:"client"}],create:function(){this.inherited(arguments),this.noSelectChanged(),this.multiSelectChanged(),this.clientClassesChanged(),this.clientStyleChanged()},noSelectChanged:function(){this.noSelect&&this.$.selection.clear()},multiSelectChanged:function(){this.$.selection.setMulti(this.multiSelect)},clientClassesChanged:function(){this.$.client.setClasses(this.clientClasses)},clientStyleChanged:function(){this.$.client.setStyle(this.clientStyle)},setupItem:function(t){this.doSetupItem({index:t,selected:this.isSelected(t)})},generateChildHtml:function(){var t="";this.index=null;for(var e=0,i=0;this.count>e;e++)i=this.rowOffset+(this.bottomUp?this.count-e-1:e),this.setupItem(i),this.$.client.setAttribute("data-enyo-index",i),"h"==this.orient&&this.$.client.setStyle("display:inline-block;"),t+=this.inherited(arguments),this.$.client.teardownRender();return t},previewDomEvent:function(t){var e=this.index=this.rowForEvent(t);t.rowIndex=t.index=e,t.flyweight=this},decorateEvent:function(t,e){var i=e&&null!=e.index?e.index:this.index;e&&null!=i&&(e.index=i,e.flyweight=this),this.inherited(arguments)},tap:function(t,e){this.noSelect||-1===e.index||(this.toggleSelected?this.$.selection.toggle(e.index):this.$.selection.select(e.index))},selectDeselect:function(t,e){this.renderRow(e.key)},getSelection:function(){return this.$.selection},isSelected:function(t){return this.getSelection().isSelected(t)},renderRow:function(t){if(!(this.rowOffset>t||t>=this.count+this.rowOffset)){this.setupItem(t);var e=this.fetchRowNode(t);e&&(enyo.dom.setInnerHtml(e,this.$.client.generateChildHtml()),this.$.client.teardownChildren(),this.doRenderRow({rowIndex:t}))}},fetchRowNode:function(t){return this.hasNode()?this.node.querySelector('[data-enyo-index="'+t+'"]'):void 0},rowForEvent:function(t){if(!this.hasNode())return-1;for(var e=t.target;e&&e!==this.node;){var i=e.getAttribute&&e.getAttribute("data-enyo-index");if(null!==i)return Number(i);e=e.parentNode}return-1},prepareRow:function(t){if(!(this.rowOffset>t||t>=this.count+this.rowOffset)){this.setupItem(t);var e=this.fetchRowNode(t);enyo.FlyweightRepeater.claimNode(this.$.client,e)}},lockRow:function(){this.$.client.teardownChildren()},performOnRow:function(t,e,i){this.rowOffset>t||t>=this.count+this.rowOffset||e&&(this.prepareRow(t),enyo.call(i||null,e),this.lockRow())},statics:{claimNode:function(t,e){var i;e&&(i=e.id!==t.id?e.querySelector("#"+t.id):e),t.generated=Boolean(i||!t.tag),t.node=i,t.node&&t.rendered();for(var n,s=0,o=t.children;n=o[s];s++)this.claimNode(n,e)}}});

// List.js
enyo.kind({name:"enyo.List",kind:"Scroller",classes:"enyo-list",published:{count:0,rowsPerPage:50,orient:"v",bottomUp:!1,noSelect:!1,multiSelect:!1,toggleSelected:!1,fixedSize:!1,reorderable:!1,centerReorderContainer:!0,reorderComponents:[],pinnedReorderComponents:[],swipeableComponents:[],enableSwipe:!1,persistSwipeableItem:!1},events:{onSetupItem:"",onSetupReorderComponents:"",onSetupPinnedReorderComponents:"",onReorder:"",onSetupSwipeItem:"",onSwipeDrag:"",onSwipe:"",onSwipeComplete:""},handlers:{onAnimateFinish:"animateFinish",onRenderRow:"rowRendered",ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish",onup:"up",onholdpulse:"holdpulse",onflick:"flick"},rowSize:0,listTools:[{name:"port",classes:"enyo-list-port enyo-border-box",components:[{name:"generator",kind:"FlyweightRepeater",canGenerate:!1,components:[{tag:null,name:"client"}]},{name:"holdingarea",allowHtml:!0,classes:"enyo-list-holdingarea"},{name:"page0",allowHtml:!0,classes:"enyo-list-page"},{name:"page1",allowHtml:!0,classes:"enyo-list-page"},{name:"placeholder",classes:"enyo-list-placeholder"},{name:"swipeableComponents",style:"position:absolute; display:block; top:-1000px; left:0;"}]}],reorderHoldTimeMS:600,draggingRowIndex:-1,initHoldCounter:3,holdCounter:3,holding:!1,draggingRowNode:null,placeholderRowIndex:-1,dragToScrollThreshold:.1,prevScrollTop:0,autoScrollTimeoutMS:20,autoScrollTimeout:null,autoscrollPageY:0,pinnedReorderMode:!1,initialPinPosition:-1,itemMoved:!1,currentPageNumber:-1,completeReorderTimeout:null,swipeIndex:null,swipeDirection:null,persistentItemVisible:!1,persistentItemOrigin:null,swipeComplete:!1,completeSwipeTimeout:null,completeSwipeDelayMS:500,normalSwipeSpeedMS:200,fastSwipeSpeedMS:100,percentageDraggedThreshold:.2,importProps:function(t){t&&t.reorderable&&(this.touch=!0),this.inherited(arguments)},create:function(){this.pageSizes=[],this.orientV="v"==this.orient,this.vertical=this.orientV?"default":"hidden",this.inherited(arguments),this.$.generator.orient=this.orient,this.getStrategy().translateOptimized=!0,this.pageBound=this.orientV?"top":"left",this.$.port.addRemoveClass("horizontal",!this.orientV),this.$.page0.addRemoveClass("vertical",this.orientV),this.$.page1.addRemoveClass("vertical",this.orientV),this.bottomUpChanged(),this.noSelectChanged(),this.multiSelectChanged(),this.toggleSelectedChanged(),this.$.generator.setRowOffset(0),this.$.generator.setCount(this.count)},initComponents:function(){this.createReorderTools(),this.inherited(arguments),this.createSwipeableComponents()},createReorderTools:function(){this.createComponent({name:"reorderContainer",classes:"enyo-list-reorder-container",ondown:"sendToStrategy",ondrag:"sendToStrategy",ondragstart:"sendToStrategy",ondragfinish:"sendToStrategy",onflick:"sendToStrategy"})},createStrategy:function(){this.controlParentName="strategy",this.inherited(arguments),this.createChrome(this.listTools),this.controlParentName="client",this.discoverControlParent()},createSwipeableComponents:function(){for(var t=0;this.swipeableComponents.length>t;t++)this.$.swipeableComponents.createComponent(this.swipeableComponents[t],{owner:this.owner})},rendered:function(){this.inherited(arguments),this.$.generator.node=this.$.port.hasNode(),this.$.generator.generated=!0,this.reset()},resizeHandler:function(){this.inherited(arguments),this.refresh()},bottomUpChanged:function(){this.$.generator.bottomUp=this.bottomUp,this.$.page0.applyStyle(this.pageBound,null),this.$.page1.applyStyle(this.pageBound,null),this.pageBound=this.orientV?this.bottomUp?"bottom":"top":this.bottomUp?"right":"left",!this.orientV&&this.bottomUp&&(this.$.page0.applyStyle("left","auto"),this.$.page1.applyStyle("left","auto")),this.hasNode()&&this.reset()},noSelectChanged:function(){this.$.generator.setNoSelect(this.noSelect)},multiSelectChanged:function(){this.$.generator.setMultiSelect(this.multiSelect)},toggleSelectedChanged:function(){this.$.generator.setToggleSelected(this.toggleSelected)},countChanged:function(){this.hasNode()&&this.updateMetrics()},sendToStrategy:function(t,e){this.$.strategy.dispatchEvent("on"+e.type,e,t)},updateMetrics:function(){this.defaultPageSize=this.rowsPerPage*(this.rowSize||100),this.pageCount=Math.ceil(this.count/this.rowsPerPage),this.portSize=0;for(var t=0;this.pageCount>t;t++)this.portSize+=this.getPageSize(t);this.adjustPortSize()},holdpulse:function(t,e){return this.getReorderable()&&!this.isReordering()?e.holdTime>=this.reorderHoldTimeMS&&this.shouldStartReordering(t,e)?(e.preventDefault(),this.startReordering(e),!1):void 0:void 0},dragstart:function(t,e){return this.isReordering()?!0:this.isSwipeable()?this.swipeDragStart(t,e):void 0},drag:function(t,e){return this.shouldDoReorderDrag(e)?(e.preventDefault(),this.reorderDrag(e),!0):this.isSwipeable()?(e.preventDefault(),this.swipeDrag(t,e),!0):void 0},dragfinish:function(t,e){this.isReordering()?this.finishReordering(t,e):this.isSwipeable()&&this.swipeDragFinish(t,e)},up:function(t,e){this.isReordering()&&this.finishReordering(t,e)},generatePage:function(t,e){this.page=t;var i=this.rowsPerPage*this.page;this.$.generator.setRowOffset(i);var n=Math.min(this.count-i,this.rowsPerPage);this.$.generator.setCount(n);var o=this.$.generator.generateChildHtml();e.setContent(o),this.getReorderable()&&this.draggingRowIndex>-1&&this.hideReorderingRow();var s=e.getBounds(),a=this.orientV?s.height:s.width;if(!this.rowSize&&a>0&&(this.rowSize=Math.floor(a/n),this.updateMetrics()),!this.fixedSize){var h=this.getPageSize(t);h!=a&&a>0&&(this.pageSizes[t]=a,this.portSize+=a-h)}},pageForRow:function(t){return Math.floor(t/this.rowsPerPage)},preserveDraggingRowNode:function(t){this.draggingRowNode&&this.pageForRow(this.draggingRowIndex)===t&&(this.$.holdingarea.hasNode().appendChild(this.draggingRowNode),this.draggingRowNode=null,this.removedInitialPage=!0)},update:function(t){var e=!1,i=this.positionToPageInfo(t),n=i.pos+this.scrollerSize/2,o=Math.floor(n/Math.max(i.size,this.scrollerSize)+.5)+i.no,s=0===o%2?o:o-1;this.p0!=s&&this.isPageInRange(s)&&(this.preserveDraggingRowNode(this.p0),this.generatePage(s,this.$.page0),this.positionPage(s,this.$.page0),this.p0=s,e=!0,this.p0RowBounds=this.getPageRowSizes(this.$.page0)),s=0===o%2?Math.max(1,o-1):o,this.p1!=s&&this.isPageInRange(s)&&(this.preserveDraggingRowNode(this.p1),this.generatePage(s,this.$.page1),this.positionPage(s,this.$.page1),this.p1=s,e=!0,this.p1RowBounds=this.getPageRowSizes(this.$.page1)),e&&(this.$.generator.setRowOffset(0),this.$.generator.setCount(this.count),this.fixedSize||(this.adjustBottomPage(),this.adjustPortSize()))},getPageRowSizes:function(t){for(var e,i,n={},o=t.hasNode().querySelectorAll("div[data-enyo-index]"),s=0;o.length>s;s++)e=o[s].getAttribute("data-enyo-index"),null!==e&&(i=enyo.dom.getBounds(o[s]),n[parseInt(e,10)]={height:i.height,width:i.width});return n},updateRowBounds:function(t){this.p0RowBounds[t]?this.updateRowBoundsAtIndex(t,this.p0RowBounds,this.$.page0):this.p1RowBounds[t]&&this.updateRowBoundsAtIndex(t,this.p1RowBounds,this.$.page1)},updateRowBoundsAtIndex:function(t,e,i){var n=i.hasNode().querySelector('div[data-enyo-index="'+t+'"]'),o=enyo.dom.getBounds(n);e[t].height=o.height,e[t].width=o.width},updateForPosition:function(t){this.update(this.calcPos(t))},calcPos:function(t){return this.bottomUp?this.portSize-this.scrollerSize-t:t},adjustBottomPage:function(){var t=this.p0>=this.p1?this.$.page0:this.$.page1;this.positionPage(t.pageNo,t)},adjustPortSize:function(){this.scrollerSize=this.orientV?this.getBounds().height:this.getBounds().width;var t=Math.max(this.scrollerSize,this.portSize);this.$.port.applyStyle(this.orientV?"height":"width",t+"px"),this.orientV||this.$.port.applyStyle("height",this.getBounds().height+"px")},positionPage:function(t,e){e.pageNo=t;var i=this.pageToPosition(t);e.applyStyle(this.pageBound,i+"px")},pageToPosition:function(t){for(var e=0,i=t;i>0;)i--,e+=this.getPageSize(i);return e},positionToPageInfo:function(t){for(var e=-1,i=this.calcPos(t),n=this.defaultPageSize;i>=0;)e++,n=this.getPageSize(e),i-=n;return e=Math.max(e,0),{no:e,size:n,pos:i+n,startRow:e*this.rowsPerPage,endRow:Math.min((e+1)*this.rowsPerPage-1,this.count-1)}},isPageInRange:function(t){return t==Math.max(0,Math.min(this.pageCount-1,t))},getPageSize:function(t){var e=this.pageSizes[t];if(!e){var i=this.rowsPerPage*t,n=Math.min(this.count-i,this.rowsPerPage);e=this.defaultPageSize*(n/this.rowsPerPage)}return Math.max(1,e)},invalidatePages:function(){this.p0=this.p1=null,this.p0RowBounds={},this.p1RowBounds={},this.$.page0.setContent(""),this.$.page1.setContent("")},invalidateMetrics:function(){this.pageSizes=[],this.rowSize=0,this.updateMetrics()},scroll:function(t,e){var i=this.inherited(arguments),n=this.orientV?this.getScrollTop():this.getScrollLeft();return this.lastPos===n?i:(this.lastPos=n,this.update(n),this.pinnedReorderMode&&this.reorderScroll(t,e),i)},setScrollTop:function(t){this.update(t),this.inherited(arguments),this.twiddle()},getScrollPosition:function(){return this.calcPos(this[this.orientV?"getScrollTop":"getScrollLeft"]())},setScrollPosition:function(t){this[this.orientV?"setScrollTop":"setScrollLeft"](this.calcPos(t))},scrollToBottom:function(){this.update(this.getScrollBounds().maxTop),this.inherited(arguments)},scrollToRow:function(t){var e=this.pageForRow(t),i=this.pageToPosition(e);if(this.updateForPosition(i),i=this.pageToPosition(e),this.setScrollPosition(i),e==this.p0||e==this.p1){var n=this.$.generator.fetchRowNode(t);if(n){var o=this.orientV?n.offsetTop:n.offsetLeft;this.bottomUp&&(o=this.getPageSize(e)-(this.orientV?n.offsetHeight:n.offsetWidth)-o);var s=this.getScrollPosition()+o;this.setScrollPosition(s)}}},scrollToStart:function(){this[this.bottomUp?this.orientV?"scrollToBottom":"scrollToRight":"scrollToTop"]()},scrollToEnd:function(){this[this.bottomUp?this.orientV?"scrollToTop":"scrollToLeft":this.orientV?"scrollToBottom":"scrollToRight"]()},refresh:function(){this.invalidatePages(),this.update(this[this.orientV?"getScrollTop":"getScrollLeft"]()),this.stabilize(),4===enyo.platform.android&&this.twiddle()},reset:function(){this.getSelection().clear(),this.invalidateMetrics(),this.invalidatePages(),this.stabilize(),this.scrollToStart()},getSelection:function(){return this.$.generator.getSelection()},select:function(t,e){return this.getSelection().select(t,e)},deselect:function(t){return this.getSelection().deselect(t)},isSelected:function(t){return this.$.generator.isSelected(t)},renderRow:function(t){this.$.generator.renderRow(t)},rowRendered:function(t,e){this.updateRowBounds(e.rowIndex)},prepareRow:function(t){this.$.generator.prepareRow(t)},lockRow:function(){this.$.generator.lockRow()},performOnRow:function(t,e,i){this.$.generator.performOnRow(t,e,i)},animateFinish:function(){return this.twiddle(),!0},twiddle:function(){var t=this.getStrategy();enyo.call(t,"twiddle")},pageForPageNumber:function(t,e){return 0===t%2?e&&t!==this.p0?null:this.$.page0:e&&t!==this.p1?null:this.$.page1},shouldStartReordering:function(t,e){return!this.getReorderable()||null==e.rowIndex||0>e.rowIndex||this.pinnedReorderMode||t!==this.$.strategy||null==e.index||0>e.index?!1:!0},startReordering:function(t){this.$.strategy.listReordering=!0,this.buildReorderContainer(),this.doSetupReorderComponents(t),this.styleReorderContainer(t),this.draggingRowIndex=this.placeholderRowIndex=t.rowIndex,this.draggingRowNode=t.target,this.removedInitialPage=!1,this.itemMoved=!1,this.initialPageNumber=this.currentPageNumber=this.pageForRow(t.rowIndex),this.prevScrollTop=this.getScrollTop(),this.replaceNodeWithPlaceholder(t.rowIndex)},buildReorderContainer:function(){this.$.reorderContainer.destroyClientControls();for(var t=0;this.reorderComponents.length>t;t++)this.$.reorderContainer.createComponent(this.reorderComponents[t],{owner:this.owner});this.$.reorderContainer.render()},styleReorderContainer:function(t){this.setItemPosition(this.$.reorderContainer,t.rowIndex),this.setItemBounds(this.$.reorderContainer,t.rowIndex),this.$.reorderContainer.setShowing(!0),this.centerReorderContainer&&this.centerReorderContainerOnPointer(t)},appendNodeToReorderContainer:function(t){this.$.reorderContainer.createComponent({allowHtml:!0,content:t.innerHTML}).render()},centerReorderContainerOnPointer:function(t){var e=enyo.dom.calcNodePosition(this.hasNode()),i=t.pageX-e.left-parseInt(this.$.reorderContainer.domStyles.width,10)/2,n=t.pageY-e.top+this.getScrollTop()-parseInt(this.$.reorderContainer.domStyles.height,10)/2;"ScrollStrategy"!=this.getStrategyKind()&&(i-=this.getScrollLeft(),n-=this.getScrollTop()),this.positionReorderContainer(i,n)},positionReorderContainer:function(t,e){this.$.reorderContainer.addClass("enyo-animatedTopAndLeft"),this.$.reorderContainer.addStyles("left:"+t+"px;top:"+e+"px;"),this.setPositionReorderContainerTimeout()},setPositionReorderContainerTimeout:function(){this.clearPositionReorderContainerTimeout(),this.positionReorderContainerTimeout=setTimeout(this.bindSafely(function(){this.$.reorderContainer.removeClass("enyo-animatedTopAndLeft"),this.clearPositionReorderContainerTimeout()}),100)},clearPositionReorderContainerTimeout:function(){this.positionReorderContainerTimeout&&(clearTimeout(this.positionReorderContainerTimeout),this.positionReorderContainerTimeout=null)},shouldDoReorderDrag:function(){return!this.getReorderable()||0>this.draggingRowIndex||this.pinnedReorderMode?!1:!0},reorderDrag:function(t){this.positionReorderNode(t),this.checkForAutoScroll(t),this.updatePlaceholderPosition(t.pageY)},updatePlaceholderPosition:function(t){var e=this.getRowIndexFromCoordinate(t);-1!==e&&(e>=this.placeholderRowIndex?this.movePlaceholderToIndex(Math.min(this.count,e+1)):this.movePlaceholderToIndex(e))},positionReorderNode:function(t){var e=this.$.reorderContainer.getBounds(),i=e.left+t.ddx,n=e.top+t.ddy;n="ScrollStrategy"==this.getStrategyKind()?n+(this.getScrollTop()-this.prevScrollTop):n,this.$.reorderContainer.addStyles("top: "+n+"px ; left: "+i+"px"),this.prevScrollTop=this.getScrollTop()},checkForAutoScroll:function(t){var e,i=enyo.dom.calcNodePosition(this.hasNode()),n=this.getBounds();this.autoscrollPageY=t.pageY,t.pageY-i.top<n.height*this.dragToScrollThreshold?(e=100*(1-(t.pageY-i.top)/(n.height*this.dragToScrollThreshold)),this.scrollDistance=-1*e):t.pageY-i.top>n.height*(1-this.dragToScrollThreshold)?(e=100*((t.pageY-i.top-n.height*(1-this.dragToScrollThreshold))/(n.height-n.height*(1-this.dragToScrollThreshold))),this.scrollDistance=1*e):this.scrollDistance=0,0===this.scrollDistance?this.stopAutoScrolling():this.autoScrollTimeout||this.startAutoScrolling()},stopAutoScrolling:function(){this.autoScrollTimeout&&(clearTimeout(this.autoScrollTimeout),this.autoScrollTimeout=null)},startAutoScrolling:function(){this.autoScrollTimeout=setInterval(this.bindSafely(this.autoScroll),this.autoScrollTimeoutMS)},autoScroll:function(){0===this.scrollDistance?this.stopAutoScrolling():this.autoScrollTimeout||this.startAutoScrolling(),this.setScrollPosition(this.getScrollPosition()+this.scrollDistance),this.positionReorderNode({ddx:0,ddy:0}),this.updatePlaceholderPosition(this.autoscrollPageY)},movePlaceholderToIndex:function(t){var e,i;if(!(0>t)){t>=this.count?(e=null,i=this.pageForPageNumber(this.pageForRow(this.count-1)).hasNode()):(e=this.$.generator.fetchRowNode(t),i=e.parentNode);var n=this.pageForRow(t);n>=this.pageCount&&(n=this.currentPageNumber),i.insertBefore(this.placeholderNode,e),this.currentPageNumber!==n&&(this.updatePageSize(this.currentPageNumber),this.updatePageSize(n),this.updatePagePositions(n)),this.placeholderRowIndex=t,this.currentPageNumber=n,this.itemMoved=!0}},finishReordering:function(t,e){return!this.isReordering()||this.pinnedReorderMode||this.completeReorderTimeout?void 0:(this.stopAutoScrolling(),this.$.strategy.listReordering=!1,this.moveReorderedContainerToDroppedPosition(e),this.completeReorderTimeout=setTimeout(this.bindSafely(this.completeFinishReordering,e),100),e.preventDefault(),!0)},moveReorderedContainerToDroppedPosition:function(){var t=this.getRelativeOffset(this.placeholderNode,this.hasNode()),e="ScrollStrategy"==this.getStrategyKind()?t.top:t.top-this.getScrollTop(),i=t.left-this.getScrollLeft();this.positionReorderContainer(i,e)},completeFinishReordering:function(t){return this.completeReorderTimeout=null,this.placeholderRowIndex>this.draggingRowIndex&&(this.placeholderRowIndex=Math.max(0,this.placeholderRowIndex-1)),this.draggingRowIndex!=this.placeholderRowIndex||!this.pinnedReorderComponents.length||this.pinnedReorderMode||this.itemMoved?(this.removeDraggingRowNode(),this.removePlaceholderNode(),this.emptyAndHideReorderContainer(),this.pinnedReorderMode=!1,this.reorderRows(t),this.draggingRowIndex=this.placeholderRowIndex=-1,this.refresh(),void 0):(this.beginPinnedReorder(t),void 0)},beginPinnedReorder:function(t){this.buildPinnedReorderContainer(),this.doSetupPinnedReorderComponents(enyo.mixin(t,{index:this.draggingRowIndex})),this.pinnedReorderMode=!0,this.initialPinPosition=t.pageY},emptyAndHideReorderContainer:function(){this.$.reorderContainer.destroyComponents(),this.$.reorderContainer.setShowing(!1)},buildPinnedReorderContainer:function(){this.$.reorderContainer.destroyClientControls();for(var t=0;this.pinnedReorderComponents.length>t;t++)this.$.reorderContainer.createComponent(this.pinnedReorderComponents[t],{owner:this.owner});this.$.reorderContainer.render()},reorderRows:function(t){this.doReorder(this.makeReorderEvent(t)),this.positionReorderedNode(),this.updateListIndices()},makeReorderEvent:function(t){return t.reorderFrom=this.draggingRowIndex,t.reorderTo=this.placeholderRowIndex,t},positionReorderedNode:function(){if(!this.removedInitialPage){var t=this.$.generator.fetchRowNode(this.placeholderRowIndex);if(t&&(t.parentNode.insertBefore(this.hiddenNode,t),this.showNode(this.hiddenNode)),this.hiddenNode=null,this.currentPageNumber!=this.initialPageNumber){var e,i,n=this.pageForPageNumber(this.currentPageNumber),o=this.pageForPageNumber(this.currentPageNumber+1);this.initialPageNumber<this.currentPageNumber?(e=n.hasNode().firstChild,o.hasNode().appendChild(e)):(e=n.hasNode().lastChild,i=o.hasNode().firstChild,o.hasNode().insertBefore(e,i)),this.correctPageSizes(),this.updatePagePositions(this.initialPageNumber)}}},updateListIndices:function(){if(this.shouldDoRefresh())return this.refresh(),this.correctPageSizes(),void 0;var t,e,i,n,o=Math.min(this.draggingRowIndex,this.placeholderRowIndex),s=Math.max(this.draggingRowIndex,this.placeholderRowIndex),a=this.draggingRowIndex-this.placeholderRowIndex>0?1:-1;if(1===a){for(t=this.$.generator.fetchRowNode(this.draggingRowIndex),t&&t.setAttribute("data-enyo-index","reordered"),e=s-1,i=s;e>=o;e--)t=this.$.generator.fetchRowNode(e),t&&(n=parseInt(t.getAttribute("data-enyo-index"),10),i=n+1,t.setAttribute("data-enyo-index",i));t=this.hasNode().querySelector('[data-enyo-index="reordered"]'),t.setAttribute("data-enyo-index",this.placeholderRowIndex)}else for(t=this.$.generator.fetchRowNode(this.draggingRowIndex),t&&t.setAttribute("data-enyo-index",this.placeholderRowIndex),e=o+1,i=o;s>=e;e++)t=this.$.generator.fetchRowNode(e),t&&(n=parseInt(t.getAttribute("data-enyo-index"),10),i=n-1,t.setAttribute("data-enyo-index",i))},shouldDoRefresh:function(){return Math.abs(this.initialPageNumber-this.currentPageNumber)>1},getNodeStyle:function(t){var e=this.$.generator.fetchRowNode(t);if(e){var i=this.getRelativeOffset(e,this.hasNode()),n=enyo.dom.getBounds(e);return{h:n.height,w:n.width,left:i.left,top:i.top}}},getRelativeOffset:function(t,e){var i={top:0,left:0};if(t!==e&&t.parentNode)do i.top+=t.offsetTop||0,i.left+=t.offsetLeft||0,t=t.offsetParent;while(t&&t!==e);return i},replaceNodeWithPlaceholder:function(t){var e=this.$.generator.fetchRowNode(t);if(!e)return enyo.log("No node - "+t),void 0;this.placeholderNode=this.createPlaceholderNode(e),this.hiddenNode=this.hideNode(e);var i=this.pageForPageNumber(this.currentPageNumber);i.hasNode().insertBefore(this.placeholderNode,this.hiddenNode)},createPlaceholderNode:function(t){var e=this.$.placeholder.hasNode().cloneNode(!0),i=enyo.dom.getBounds(t);return e.style.height=i.height+"px",e.style.width=i.width+"px",e},removePlaceholderNode:function(){this.removeNode(this.placeholderNode),this.placeholderNode=null},removeDraggingRowNode:function(){this.draggingRowNode=null;var t=this.$.holdingarea.hasNode();t.innerHTML=""},removeNode:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},updatePageSize:function(t){if(!(0>t)){var e=this.pageForPageNumber(t,!0);if(e){var i=this.pageSizes[t],n=Math.max(1,e.getBounds().height);this.pageSizes[t]=n,this.portSize+=n-i}}},updatePagePositions:function(t){this.positionPage(this.currentPageNumber,this.pageForPageNumber(this.currentPageNumber)),this.positionPage(t,this.pageForPageNumber(t))},correctPageSizes:function(){var t=this.initialPageNumber%2;this.updatePageSize(this.currentPageNumber,this.$["page"+this.currentPage]),t!=this.currentPageNumber&&this.updatePageSize(this.initialPageNumber,this.$["page"+t])},hideNode:function(t){return t.style.display="none",t},showNode:function(t){return t.style.display="block",t},dropPinnedRow:function(t){this.moveReorderedContainerToDroppedPosition(t),this.completeReorderTimeout=setTimeout(this.bindSafely(this.completeFinishReordering,t),100)},cancelPinnedMode:function(t){this.placeholderRowIndex=this.draggingRowIndex,this.dropPinnedRow(t)},getRowIndexFromCoordinate:function(t){var e=this.getScrollTop()+t-enyo.dom.calcNodePosition(this.hasNode()).top;if(0>e)return-1;var i=this.positionToPageInfo(e),n=i.no==this.p0?this.p0RowBounds:this.p1RowBounds;if(!n)return this.count;for(var o=i.pos,s=this.placeholderNode?enyo.dom.getBounds(this.placeholderNode).height:0,a=0,h=i.startRow;i.endRow>=h;++h){if(h===this.placeholderRowIndex&&(a+=s,a>=o))return-1;if(h!==this.draggingRowIndex&&(a+=n[h].height,a>=o))return h}return h},getIndexPosition:function(t){return enyo.dom.calcNodePosition(this.$.generator.fetchRowNode(t))},setItemPosition:function(t,e){var i=this.getNodeStyle(e),n="ScrollStrategy"==this.getStrategyKind()?i.top:i.top-this.getScrollTop(),o="top:"+n+"px; left:"+i.left+"px;";t.addStyles(o)},setItemBounds:function(t,e){var i=this.getNodeStyle(e),n="width:"+i.w+"px; height:"+i.h+"px;";t.addStyles(n)},reorderScroll:function(){"ScrollStrategy"==this.getStrategyKind()&&this.$.reorderContainer.addStyles("top:"+(this.initialPinPosition+this.getScrollTop()-this.rowSize)+"px;"),this.updatePlaceholderPosition(this.initialPinPosition)},hideReorderingRow:function(){var t=this.hasNode().querySelector('[data-enyo-index="'+this.draggingRowIndex+'"]');t&&(this.hiddenNode=this.hideNode(t))},isReordering:function(){return this.draggingRowIndex>-1},isSwiping:function(){return null!=this.swipeIndex&&!this.swipeComplete&&null!=this.swipeDirection},swipeDragStart:function(t,e){return null==e.index||e.vertical?!0:(this.completeSwipeTimeout&&this.completeSwipe(e),this.swipeComplete=!1,this.swipeIndex!=e.index&&(this.clearSwipeables(),this.swipeIndex=e.index),this.swipeDirection=e.xDirection,this.persistentItemVisible||this.startSwipe(e),this.draggedXDistance=0,this.draggedYDistance=0,!0)},swipeDrag:function(t,e){return this.persistentItemVisible?(this.dragPersistentItem(e),this.preventDragPropagation):this.isSwiping()?(this.dragSwipeableComponents(this.calcNewDragPosition(e.ddx)),this.draggedXDistance=e.dx,this.draggedYDistance=e.dy,!0):!1},swipeDragFinish:function(t,e){if(this.persistentItemVisible)this.dragFinishPersistentItem(e);else{if(!this.isSwiping())return!1;var i=this.calcPercentageDragged(this.draggedXDistance);i>this.percentageDraggedThreshold&&e.xDirection===this.swipeDirection?this.swipe(this.fastSwipeSpeedMS):this.backOutSwipe(e)}return this.preventDragPropagation},isSwipeable:function(){return this.enableSwipe&&0!==this.$.swipeableComponents.controls.length&&!this.isReordering()&&!this.pinnedReorderMode},positionSwipeableContainer:function(t,e){var i=this.$.generator.fetchRowNode(t);if(i){var n=this.getRelativeOffset(i,this.hasNode()),o=enyo.dom.getBounds(i),s=1==e?-1*o.width:o.width;this.$.swipeableComponents.addStyles("top: "+n.top+"px; left: "+s+"px; height: "+o.height+"px; width: "+o.width+"px;")}},calcNewDragPosition:function(t){var e=this.$.swipeableComponents.getBounds(),i=e.left,n=this.$.swipeableComponents.getBounds(),o=1==this.swipeDirection?0:-1*n.width,s=1==this.swipeDirection?i+t>o?o:i+t:o>i+t?o:i+t;return s},dragSwipeableComponents:function(t){this.$.swipeableComponents.applyStyle("left",t+"px")},startSwipe:function(t){t.index=this.swipeIndex,this.positionSwipeableContainer(this.swipeIndex,t.xDirection),this.$.swipeableComponents.setShowing(!0),this.setPersistentItemOrigin(t.xDirection),this.doSetupSwipeItem(t)},dragPersistentItem:function(t){var e=0,i="right"==this.persistentItemOrigin?Math.max(e,e+t.dx):Math.min(e,e+t.dx);this.$.swipeableComponents.applyStyle("left",i+"px")},dragFinishPersistentItem:function(t){var e=this.calcPercentageDragged(t.dx)>.2,i=t.dx>0?"right":0>t.dx?"left":null;this.persistentItemOrigin==i?e?this.slideAwayItem():this.bounceItem(t):this.bounceItem(t)},setPersistentItemOrigin:function(t){this.persistentItemOrigin=1==t?"left":"right"},calcPercentageDragged:function(t){return Math.abs(t/this.$.swipeableComponents.getBounds().width)},swipe:function(t){this.swipeComplete=!0,this.animateSwipe(0,t)},backOutSwipe:function(){var t=this.$.swipeableComponents.getBounds(),e=1==this.swipeDirection?-1*t.width:t.width;this.animateSwipe(e,this.fastSwipeSpeedMS),this.swipeDirection=null},bounceItem:function(){var t=this.$.swipeableComponents.getBounds();t.left!=t.width&&this.animateSwipe(0,this.normalSwipeSpeedMS)},slideAwayItem:function(){var t=this.$.swipeableComponents,e=t.getBounds().width,i="left"==this.persistentItemOrigin?-1*e:e;this.animateSwipe(i,this.normalSwipeSpeedMS),this.persistentItemVisible=!1,this.setPersistSwipeableItem(!1)},clearSwipeables:function(){this.$.swipeableComponents.setShowing(!1),this.persistentItemVisible=!1,this.setPersistSwipeableItem(!1)},completeSwipe:function(){this.completeSwipeTimeout&&(clearTimeout(this.completeSwipeTimeout),this.completeSwipeTimeout=null),this.getPersistSwipeableItem()?this.persistentItemVisible=!0:(this.$.swipeableComponents.setShowing(!1),this.swipeComplete&&this.doSwipeComplete({index:this.swipeIndex,xDirection:this.swipeDirection})),this.swipeIndex=null,this.swipeDirection=null},animateSwipe:function(t,e){var i=enyo.now(),n=this.$.swipeableComponents,o=parseInt(n.domStyles.left,10),s=t-o;this.stopAnimateSwipe();var a=this.bindSafely(function(){var t=enyo.now()-i,h=t/e,r=o+s*Math.min(h,1);n.applyStyle("left",r+"px"),this.job=enyo.requestAnimationFrame(a),t/e>=1&&(this.stopAnimateSwipe(),this.completeSwipeTimeout=setTimeout(this.bindSafely(function(){this.completeSwipe()}),this.completeSwipeDelayMS))});this.job=enyo.requestAnimationFrame(a)},stopAnimateSwipe:function(){this.job&&(this.job=enyo.cancelRequestAnimationFrame(this.job))}});

// PulldownList.js
enyo.kind({name:"enyo.PulldownList",kind:"List",touch:!0,pully:null,pulldownTools:[{name:"pulldown",classes:"enyo-list-pulldown",components:[{name:"puller",kind:"Puller"}]}],events:{onPullStart:"",onPullCancel:"",onPull:"",onPullRelease:"",onPullComplete:""},handlers:{onScrollStart:"scrollStartHandler",onScrollStop:"scrollStopHandler",ondragfinish:"dragfinish"},pullingMessage:"Pull down to refresh...",pulledMessage:"Release to refresh...",loadingMessage:"Loading...",pullingIconClass:"enyo-puller-arrow enyo-puller-arrow-down",pulledIconClass:"enyo-puller-arrow enyo-puller-arrow-up",loadingIconClass:"",create:function(){var t={kind:"Puller",showing:!1,text:this.loadingMessage,iconClass:this.loadingIconClass,onCreate:"setPully"};this.listTools.splice(0,0,t),this.inherited(arguments),this.setPulling()},initComponents:function(){this.createChrome(this.pulldownTools),this.accel=enyo.dom.canAccelerate(),this.translation=this.accel?"translate3d":"translate",this.strategyKind=this.resetStrategyKind(),this.inherited(arguments)},resetStrategyKind:function(){return enyo.platform.android>=3?"TranslateScrollStrategy":"TouchScrollStrategy"},setPully:function(t,e){this.pully=e.originator},scrollStartHandler:function(){this.firedPullStart=!1,this.firedPull=!1,this.firedPullCancel=!1},scroll:function(){var t=this.inherited(arguments);this.completingPull&&this.pully.setShowing(!1);var e=this.getStrategy().$.scrollMath||this.getStrategy(),i=-1*this.getScrollTop();return e.isInOverScroll()&&i>0&&(enyo.dom.transformValue(this.$.pulldown,this.translation,"0,"+i+"px"+(this.accel?",0":"")),this.firedPullStart||(this.firedPullStart=!0,this.pullStart(),this.pullHeight=this.$.pulldown.getBounds().height),i>this.pullHeight&&!this.firedPull&&(this.firedPull=!0,this.firedPullCancel=!1,this.pull()),this.firedPull&&!this.firedPullCancel&&this.pullHeight>i&&(this.firedPullCancel=!0,this.firedPull=!1,this.pullCancel())),t},scrollStopHandler:function(){this.completingPull&&(this.completingPull=!1,this.doPullComplete())},dragfinish:function(){if(this.firedPull){var t=this.getStrategy().$.scrollMath||this.getStrategy();t.setScrollY(-1*this.getScrollTop()-this.pullHeight),this.pullRelease()}},completePull:function(){this.completingPull=!0;var t=this.getStrategy().$.scrollMath||this.getStrategy();t.setScrollY(this.pullHeight),t.start()},pullStart:function(){this.setPulling(),this.pully.setShowing(!1),this.$.puller.setShowing(!0),this.doPullStart()},pull:function(){this.setPulled(),this.doPull()},pullCancel:function(){this.setPulling(),this.doPullCancel()},pullRelease:function(){this.$.puller.setShowing(!1),this.pully.setShowing(!0),this.doPullRelease()},setPulling:function(){this.$.puller.setText(this.pullingMessage),this.$.puller.setIconClass(this.pullingIconClass)},setPulled:function(){this.$.puller.setText(this.pulledMessage),this.$.puller.setIconClass(this.pulledIconClass)}}),enyo.kind({name:"enyo.Puller",classes:"enyo-puller",published:{text:"",iconClass:""},events:{onCreate:""},components:[{name:"icon"},{name:"text",tag:"span",classes:"enyo-puller-text"}],create:function(){this.inherited(arguments),this.doCreate(),this.textChanged(),this.iconClassChanged()},textChanged:function(){this.$.text.setContent(this.text)},iconClassChanged:function(){this.$.icon.setClasses(this.iconClass)}});

// AroundList.js
enyo.kind({name:"enyo.AroundList",kind:"enyo.List",listTools:[{name:"port",classes:"enyo-list-port enyo-border-box",components:[{name:"aboveClient"},{name:"generator",kind:"FlyweightRepeater",canGenerate:!1,components:[{tag:null,name:"client"}]},{name:"holdingarea",allowHtml:!0,classes:"enyo-list-holdingarea"},{name:"page0",allowHtml:!0,classes:"enyo-list-page"},{name:"page1",allowHtml:!0,classes:"enyo-list-page"},{name:"belowClient"},{name:"placeholder"},{name:"swipeableComponents",style:"position:absolute; display:block; top:-1000px; left:0px;"}]}],aboveComponents:null,initComponents:function(){this.inherited(arguments),this.aboveComponents&&this.$.aboveClient.createComponents(this.aboveComponents,{owner:this.owner}),this.belowComponents&&this.$.belowClient.createComponents(this.belowComponents,{owner:this.owner})},updateMetrics:function(){this.defaultPageSize=this.rowsPerPage*(this.rowSize||100),this.pageCount=Math.ceil(this.count/this.rowsPerPage),this.aboveHeight=this.$.aboveClient.getBounds().height,this.belowHeight=this.$.belowClient.getBounds().height,this.portSize=this.aboveHeight+this.belowHeight;for(var t=0;this.pageCount>t;t++)this.portSize+=this.getPageSize(t);this.adjustPortSize()},positionPage:function(t,e){e.pageNo=t;var i=this.pageToPosition(t),n=this.bottomUp?this.belowHeight:this.aboveHeight;i+=n,e.applyStyle(this.pageBound,i+"px")},scrollToContentStart:function(){var t=this.bottomUp?this.belowHeight:this.aboveHeight;this.setScrollPosition(t)}});

// GridFlyweightRepeater.js
enyo.kind({name:"enyo.GridFlyWeightRepeater",kind:"enyo.FlyweightRepeater",events:{onSizeupItem:""},itemsPerRow:0,_itemsFromPreviousPage:0,generateChildHtml:function(){return this.itemFluidWidth||this.itemFixedSize?this._generateChildHtmlEqualSizedItems():this._generateChildHtmlVariableSizedItems()},_generateChildHtmlEqualSizedItems:function(){var t=this.owner.hasNode().clientWidth,e=this.$.client,i="",n=0,o=this.itemWidth,s=this.itemHeight;if(this.itemFluidWidth){n=100/this.itemsPerRow;var a=0;this.itemSpacing>=0&&(a=(this.itemsPerRow+1)*this.itemSpacing,n=100/this.itemsPerRow-100*a/(this.itemsPerRow*t)),o=n/100*t,s=o*(this.itemHeight/this.itemWidth)}for(var h=this.rowOffset;this.rowOffset+this.count>h;h++)e.setAttribute("data-enyo-index",h),this.doSetupItem({index:h,selected:this.isSelected(h)}),this.itemFluidWidth?e.addStyles("width:"+n+"%;height:"+s+"px;"):e.addStyles("width:"+this.itemWidth+"px;height:"+this.itemHeight+"px;"),this.itemSpacing>=0&&(e.addStyles("margin-top:"+this.itemSpacing+"px; margin-left:"+this.itemSpacing+"px;"),h%this.itemsPerRow==this.itemsPerRow-1?e.addStyles("margin-right:"+this.itemSpacing+"px;"):e.addStyles("margin-right: 0px;"),h>=this.count-this.itemsPerRow&&e.addStyles("margin-bottom:"+this.itemSpacing+"px;")),i+=e.generateHtml(),e.teardownRender();return i},_generateChildHtmlVariableSizedItems:function(){this.index=null;var t,e,i=null,n=this.$.client,o=this.owner.hasNode().clientWidth,s=0,a=0,h=0,r=0,l=0,d=0,c=0,u=0,g=0,p=this.itemMinWidth/this.itemMinHeight,f=[{index:0,items:[]}],m=this.owner.$._dummy_.hasNode();0===this.owner.page&&(this._itemsFromPreviousPage=0);var w=this.count+this._itemsFromPreviousPage;for(t=0,e=t+this.rowOffset-this._itemsFromPreviousPage;w>t;t++,e++){u=0,g=0,this.doSizeupItem({index:e,selected:this.isSelected(e)}),u=this.itemWidth,g=this.itemHeight,(!u||0>=u)&&(this.doSetupItem({index:e,selected:this.isSelected(e)}),m.innerHTML=n.generateChildHtml(),u=m.clientWidth,g=m.clientHeight),(!u||0>=u)&&(u=this.itemMinWidth,g=this.itemMinHeight),(!g||0>=g)&&(g=this.itemMinHeight),p=u/g,s=Math.min(u,o),this.itemMinWidth&&this.itemMinWidth>0&&(s=Math.max(u,this.itemMinWidth));var v=t==w-1;if(h=s/p,a+=s,r+=h,i={index:e,pageIndex:t,width:s,height:h},f[c].items.push(i),this.normalizeRows&&(l=a/f[c].items.length,d=r/f[c].items.length,a>=o||v)){f[c].avgHeight=d,f[c].index=c;var y=f[c].items.length,C=(o-a)/y;if(this._itemsFromPreviousPage=0,v&&C+l>1.5*l){this._itemsFromPreviousPage=y,f[c]={avgHeight:0,index:c,items:[]};break}this._normalizeRow(f[c]),v||(c++,f[c]={avgHeight:0,index:0,items:[]}),a=r=d=l=s=h=u=g=0}}m.innerHTML="";var S,P="",x="";for(t=0;f.length>t;t++)if(S=f[t],S.items&&0!==S.items.length)for(var b=0;S.items.length>b;b++)i=S.items[b],this.doSetupItem({index:i.index,selected:this.isSelected(i.index)}),n.setAttribute("data-enyo-index",i.index),n.addStyles("width:"+i.width+"px;height:"+i.height+"px;"),this.itemSpacing>=0&&n.addStyles("margin-top:"+this.itemSpacing+"px;margin-left:"+this.itemSpacing+"px;"),x=n.generateHtml(),n.teardownRender(),P+=x;return P},_normalizeRow:function(t){if(this.normalizeRows&&t.items&&0!==t.items.length){var e,i,n=this.owner.hasNode().clientWidth,o=0,s=0,a="",h=0,r=0,l=0,d=0;for(i=0;t.items.length>i;i++)e=t.items[i],h=e.width,r=e.height,s=Math.floor(t.avgHeight/r*h),a+=" "+s,e.width=s,e.height=t.avgHeight,o+=s,this.itemSpacing>=0&&(o+=this.itemSpacing,i==t.items.length-1&&(o+=this.itemSpacing));for(d=n-o,l=n/(n-d),o=0,s=0,a="",i=0;t.items.length>i;i++){e=t.items[i],h=e.width,r=e.height,s=Math.floor(h*l),a+=" "+s;var c=Math.floor(r*l);e.width=s,e.height=c,o+=s,this.itemSpacing>=0&&(o+=this.itemSpacing,i==t.items.length-1&&(o+=this.itemSpacing))}d=n-o,e=t.items[t.items.length-1],h=e.width,r=e.height,e.width=h+d,e.height=r}}});

// GridList.js
enyo.kind({name:"enyo.GridList",kind:"enyo.List",classes:"enyo-gridlist",published:{itemFluidWidth:!1,itemFixedSize:!1,itemMinWidth:160,itemMinHeight:160,itemWidth:160,itemHeight:160,itemSpacing:0,normalizeRows:!1},horizontal:"hidden",events:{onSizeupItem:""},show:function(t){this._calculateItemsPerRow(),this.setCount(t),this.reset()},create:function(){this._setComponents(),this.inherited(arguments),this.itemFluidWidthChanged(),this.itemFixedSizeChanged(),this.itemMinWidthChanged(),this.itemMinHeightChanged(),this.itemWidthChanged(),this.itemHeightChanged(),this.itemSpacingChanged(),this.normalizeRowsChanged(),this.$.generator.setClientClasses("enyo-gridlist-row")},itemFluidWidthChanged:function(){this.$.generator.itemFluidWidth=this.itemFluidWidth,this.setNormalizeRows(!this.itemFluidWidth&&!this.itemFixedSize)},itemFixedSizeChanged:function(){this.$.generator.itemFixedSize=this.itemFixedSize,this.setNormalizeRows(!this.itemFluidWidth&&!this.itemFixedSize)},itemWidthChanged:function(){this.$.generator.itemWidth=this.itemWidth},itemHeightChanged:function(){this.$.generator.itemHeight=this.itemHeight},itemMinWidthChanged:function(){var t=this.hasNode();t&&(this.itemMinWidth||(this.itemMinWidth=160),this.itemMinWidth=Math.min(this.itemMinWidth,t.clientWidth)),this.$.generator.itemMinWidth=this.itemMinWidth},itemMinHeightChanged:function(){var t=this.hasNode();t&&(this.itemMinHeight||(this.itemMinHeight=160),this.itemMinHeight=Math.min(this.itemMinHeight,t.clientHeight)),this.$.generator.itemMinHeight=this.itemMinHeight},itemSpacingChanged:function(){0>this.itemSpacing&&(this.itemSpacing=0),this.itemSpacing=this.itemSpacing,this.$.generator.itemSpacing=this.itemSpacing},normalizeRowsChanged:function(){this.$.generator.normalizeRows=this.normalizeRows},bottomUpChanged:function(){this.bottomUp=!1,this.pageBound="top"},reflow:function(){this._calculateItemsPerRow(),this.inherited(arguments)},_calculateItemsPerRow:function(){var t=this.hasNode();if(t){this.itemsPerRow=Math.floor((t.clientWidth-this.itemSpacing)/(this.itemMinWidth+this.itemSpacing));var e=Math.round((t.clientHeight-this.itemSpacing)/(this.itemMinHeight+this.itemSpacing));if(this.itemFixedSize||this.itemFluidWidth){var i=Math.floor((t.clientWidth-this.itemSpacing)/(this.itemWidth+this.itemSpacing)),n=Math.floor(i),o=Math.ceil(i),s=t.clientWidth-this.itemSpacing-o*(this.itemWidth+this.itemSpacing);this.itemsPerRow=s>0?o:n,e=Math.round((t.clientHeight-this.itemSpacing)/(this.itemHeight+this.itemSpacing))}this.itemsPerRow=Math.max(1,this.itemsPerRow),this.rowsPerPage=3*this.itemsPerRow*e,this.$.generator.itemsPerRow=this.itemsPerRow}},_setComponents:function(){var t,e=this.listTools[0].components;this.createComponent(new enyo.Component({name:"_dummy_",allowHtml:!0,classes:"enyo-gridlist-dummy",showing:!1},{owner:this}));for(var i=0;e.length>i;i++)if(t=e[i],"generator"==t.name)return t.kind="enyo.GridFlyWeightRepeater",void 0}});

// GridListImageItem.js
enyo.kind({name:"enyo.GridList.ImageItem",classes:"enyo-gridlist-imageitem",components:[{name:"image",kind:"enyo.Image"},{name:"caption",classes:"caption"},{name:"subCaption",classes:"sub-caption"}],create:function(){this.inherited(arguments),this.sourceChanged()},published:{source:"",caption:"",subCaption:"",selected:!1},sourceChanged:function(){this.source&&this.$.image.setAttribute("src",this.source)},captionChanged:function(){return this.caption?(this.$.caption.setShowing(!0),this.$.caption.setContent(this.caption),void 0):(this.$.caption.setContent(this.caption),this.$.caption.setShowing(!1),void 0)},subCaptionChanged:function(){return this.subCaption?(this.$.subCaption.setShowing(!0),this.$.subCaption.setContent(this.subCaption),void 0):(this.$.subCaption.setContent(this.subCaption),this.$.subCaption.setShowing(!1),void 0)},selectedChanged:function(){this.addRemoveClass("selected",this.selected)}});

// Slideable.js
enyo.kind({name:"enyo.Slideable",kind:"Control",published:{axis:"h",value:0,unit:"px",min:0,max:0,accelerated:"auto",overMoving:!0,draggable:!0},events:{onAnimateFinish:"",onChange:""},preventDragPropagation:!1,tools:[{kind:"Animator",onStep:"animatorStep",onEnd:"animatorComplete"}],handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish"},kDragScalar:1,dragEventProp:"dx",unitModifier:!1,canTransform:!1,create:function(){this.inherited(arguments),this.acceleratedChanged(),this.transformChanged(),this.axisChanged(),this.valueChanged(),this.addClass("enyo-slideable")},initComponents:function(){this.createComponents(this.tools),this.inherited(arguments)},rendered:function(){this.inherited(arguments),this.canModifyUnit(),this.updateDragScalar()},resizeHandler:function(){this.inherited(arguments),this.updateDragScalar()},canModifyUnit:function(){if(!this.canTransform){var t=this.getInitialStyleValue(this.hasNode(),this.boundary);t.match(/px/i)&&"%"===this.unit&&(this.unitModifier=this.getBounds()[this.dimension])}},getInitialStyleValue:function(t,e){var i=enyo.dom.getComputedStyle(t);return i?i.getPropertyValue(e):t&&t.currentStyle?t.currentStyle[e]:"0"},updateBounds:function(t,e){var i={};i[this.boundary]=t,this.setBounds(i,this.unit),this.setInlineStyles(t,e)},updateDragScalar:function(){if("%"==this.unit){var t=this.getBounds()[this.dimension];this.kDragScalar=t?100/t:1,this.canTransform||this.updateBounds(this.value,100)}},transformChanged:function(){this.canTransform=enyo.dom.canTransform()},acceleratedChanged:function(){(!enyo.platform.android||2>=enyo.platform.android)&&enyo.dom.accelerate(this,this.accelerated)},axisChanged:function(){var t="h"==this.axis;this.dragMoveProp=t?"dx":"dy",this.shouldDragProp=t?"horizontal":"vertical",this.transform=t?"translateX":"translateY",this.dimension=t?"width":"height",this.boundary=t?"left":"top"},setInlineStyles:function(t,e){var i={};this.unitModifier?(i[this.boundary]=this.percentToPixels(t,this.unitModifier),i[this.dimension]=this.unitModifier,this.setBounds(i)):(e?i[this.dimension]=e:i[this.boundary]=t,this.setBounds(i,this.unit))},valueChanged:function(t){var e=this.value;this.isOob(e)&&!this.isAnimating()&&(this.value=this.overMoving?this.dampValue(e):this.clampValue(e)),enyo.platform.android>2&&(this.value?(0===t||void 0===t)&&enyo.dom.accelerate(this,this.accelerated):enyo.dom.accelerate(this,!1)),this.canTransform?enyo.dom.transformValue(this,this.transform,this.value+this.unit):this.setInlineStyles(this.value,!1),this.doChange()},getAnimator:function(){return this.$.animator},isAtMin:function(){return this.value<=this.calcMin()},isAtMax:function(){return this.value>=this.calcMax()},calcMin:function(){return this.min},calcMax:function(){return this.max},clampValue:function(t){var e=this.calcMin(),i=this.calcMax();return Math.max(e,Math.min(t,i))},dampValue:function(t){return this.dampBound(this.dampBound(t,this.min,1),this.max,-1)},dampBound:function(t,e,i){var n=t;return e*i>n*i&&(n=e+(n-e)/4),n},percentToPixels:function(t,e){return Math.floor(e/100*t)},pixelsToPercent:function(t){var e=this.unitModifier?this.getBounds()[this.dimension]:this.container.getBounds()[this.dimension];return 100*(t/e)},shouldDrag:function(t){return this.draggable&&t[this.shouldDragProp]},isOob:function(t){return t>this.calcMax()||this.calcMin()>t},dragstart:function(t,e){return this.shouldDrag(e)?(e.preventDefault(),this.$.animator.stop(),e.dragInfo={},this.dragging=!0,this.drag0=this.value,this.dragd0=0,this.preventDragPropagation):void 0},drag:function(t,e){if(this.dragging){e.preventDefault();var i=this.canTransform?e[this.dragMoveProp]*this.kDragScalar:this.pixelsToPercent(e[this.dragMoveProp]),n=this.drag0+i,s=i-this.dragd0;return this.dragd0=i,s&&(e.dragInfo.minimizing=0>s),this.setValue(n),this.preventDragPropagation}},dragfinish:function(t,e){return this.dragging?(this.dragging=!1,this.completeDrag(e),e.preventTap(),this.preventDragPropagation):void 0},completeDrag:function(t){this.value!==this.calcMax()&&this.value!=this.calcMin()&&this.animateToMinMax(t.dragInfo.minimizing)},isAnimating:function(){return this.$.animator.isAnimating()},play:function(t,e){this.$.animator.play({startValue:t,endValue:e,node:this.hasNode()})},animateTo:function(t){this.play(this.value,t)},animateToMin:function(){this.animateTo(this.calcMin())},animateToMax:function(){this.animateTo(this.calcMax())},animateToMinMax:function(t){t?this.animateToMin():this.animateToMax()},animatorStep:function(t){return this.setValue(t.value),!0},animatorComplete:function(t){return this.doAnimateFinish(t),!0},toggleMinMax:function(){this.animateToMinMax(!this.isAtMin())}});

// Arranger.js
enyo.kind({name:"enyo.Arranger",kind:"Layout",layoutClass:"enyo-arranger",accelerated:"auto",dragProp:"ddx",dragDirectionProp:"xDirection",canDragProp:"horizontal",incrementalPoints:!1,destroy:function(){for(var t,e=this.container.getPanels(),i=0;t=e[i];i++)t._arranger=null;this.inherited(arguments)},arrange:function(){},size:function(){},start:function(){var t=this.container.fromIndex,e=this.container.toIndex,i=this.container.transitionPoints=[t];if(this.incrementalPoints)for(var n=Math.abs(e-t)-2,o=t;n>=0;)o+=t>e?-1:1,i.push(o),n--;i.push(this.container.toIndex)},finish:function(){},calcArrangementDifference:function(){},canDragEvent:function(t){return t[this.canDragProp]},calcDragDirection:function(t){return t[this.dragDirectionProp]},calcDrag:function(t){return t[this.dragProp]},drag:function(t,e,i,n,o){var s=this.measureArrangementDelta(-t,e,i,n,o);return s},measureArrangementDelta:function(t,e,i,n,o){var s=this.calcArrangementDifference(e,i,n,o),a=s?t/Math.abs(s):0;return a*=this.container.fromIndex>this.container.toIndex?-1:1},_arrange:function(t){this.containerBounds||this.reflow();var e=this.getOrderedControls(t);this.arrange(e,t)},arrangeControl:function(t,e){t._arranger=enyo.mixin(t._arranger||{},e)},flow:function(){this.c$=[].concat(this.container.getPanels()),this.controlsIndex=0;for(var t,e=0,i=this.container.getPanels();t=i[e];e++)if(enyo.dom.accelerate(t,this.accelerated),enyo.platform.safari)for(var n,o=t.children,s=0;n=o[s];s++)enyo.dom.accelerate(n,this.accelerated)},reflow:function(){var t=this.container.hasNode();this.containerBounds=t?{width:t.clientWidth,height:t.clientHeight}:{},this.size()},flowArrangement:function(){var t=this.container.arrangement;if(t)for(var e,i=0,n=this.container.getPanels();e=n[i];i++)this.flowControl(e,t[i])},flowControl:function(t,e){enyo.Arranger.positionControl(t,e);var i=e.opacity;null!=i&&enyo.Arranger.opacifyControl(t,i)},getOrderedControls:function(t){for(var e=Math.floor(t),i=e-this.controlsIndex,n=i>0,o=this.c$||[],s=0;Math.abs(i)>s;s++)n?o.push(o.shift()):o.unshift(o.pop());return this.controlsIndex=e,o},statics:{positionControl:function(t,e,i){var n=i||"px";if(!this.updating)if(enyo.dom.canTransform()&&!enyo.platform.android&&10!==enyo.platform.ie){var o=e.left,s=e.top;o=enyo.isString(o)?o:o&&o+n,s=enyo.isString(s)?s:s&&s+n,enyo.dom.transform(t,{translateX:o||null,translateY:s||null})}else t.setBounds(e,i)},opacifyControl:function(t,e){var i=e;i=i>.99?1:.01>i?0:i,9>enyo.platform.ie?t.applyStyle("filter","progid:DXImageTransform.Microsoft.Alpha(Opacity="+100*i+")"):t.applyStyle("opacity",i)}}});

// CardArranger.js
enyo.kind({name:"enyo.CardArranger",kind:"Arranger",layoutClass:"enyo-arranger enyo-arranger-fit",calcArrangementDifference:function(){return this.containerBounds.width},arrange:function(t){for(var e,i,n=0;e=t[n];n++)i=0===n?1:0,this.arrangeControl(e,{opacity:i})},start:function(){this.inherited(arguments);for(var t,e=this.container.getPanels(),i=0;t=e[i];i++){var n=t.showing;t.setShowing(i==this.container.fromIndex||i==this.container.toIndex),t.showing&&!n&&t.resized()}},finish:function(){this.inherited(arguments);for(var t,e=this.container.getPanels(),i=0;t=e[i];i++)t.setShowing(i==this.container.toIndex)},destroy:function(){for(var t,e=this.container.getPanels(),i=0;t=e[i];i++)enyo.Arranger.opacifyControl(t,1),t.showing||t.setShowing(!0);this.inherited(arguments)}});

// CardSlideInArranger.js
enyo.kind({name:"enyo.CardSlideInArranger",kind:"CardArranger",start:function(){for(var t,e=this.container.getPanels(),i=0;t=e[i];i++){var n=t.showing;t.setShowing(i==this.container.fromIndex||i==this.container.toIndex),t.showing&&!n&&t.resized()}var o=this.container.fromIndex;i=this.container.toIndex,this.container.transitionPoints=[i+"."+o+".s",i+"."+o+".f"]},finish:function(){this.inherited(arguments);for(var t,e=this.container.getPanels(),i=0;t=e[i];i++)t.setShowing(i==this.container.toIndex)},arrange:function(t,e){for(var i,n,o=e.split("."),s=o[0],a=o[1],h="s"==o[2],r=this.containerBounds.width,l=0,d=this.container.getPanels();i=d[l];l++)n=r,a==l&&(n=h?0:-r),s==l&&(n=h?r:0),a==l&&a==s&&(n=0),this.arrangeControl(i,{left:n})},destroy:function(){for(var t,e=this.container.getPanels(),i=0;t=e[i];i++)enyo.Arranger.positionControl(t,{left:null});this.inherited(arguments)}});

// CarouselArranger.js
enyo.kind({name:"enyo.CarouselArranger",kind:"Arranger",size:function(){var t,e,i,n,o,s=this.container.getPanels(),a=this.containerPadding=this.container.hasNode()?enyo.dom.calcPaddingExtents(this.container.node):{},r=this.containerBounds;r.height-=a.top+a.bottom,r.width-=a.left+a.right;var h;for(t=0,i=0;o=s[t];t++)n=enyo.dom.calcMarginExtents(o.hasNode()),o.width=o.getBounds().width,o.marginWidth=n.right+n.left,i+=(o.fit?0:o.width)+o.marginWidth,o.fit&&(h=o);if(h){var l=r.width-i;h.width=l>=0?l:h.width}for(t=0,e=a.left;o=s[t];t++)o.setBounds({top:a.top,bottom:a.bottom,width:o.fit?o.width:null})},arrange:function(t,e){this.container.wrap?this.arrangeWrap(t,e):this.arrangeNoWrap(t,e)},arrangeNoWrap:function(t,e){var i,n,o,s,a=this.container.getPanels(),r=this.container.clamp(e),h=this.containerBounds.width;for(i=r,o=0;(s=a[i])&&(o+=s.width+s.marginWidth,!(o>h));i++);var l=h-o,d=0;if(l>0)for(i=r-1,n=0;s=a[i];i--)if(n+=s.width+s.marginWidth,0>=l-n){d=l-n,r=i;break}var c,u;for(i=0,u=this.containerPadding.left+d;s=a[i];i++)c=s.width+s.marginWidth,r>i?this.arrangeControl(s,{left:-c}):(this.arrangeControl(s,{left:Math.floor(u)}),u+=c)},arrangeWrap:function(t){for(var e,i=0,n=this.containerPadding.left;e=t[i];i++)this.arrangeControl(e,{left:n}),n+=e.width+e.marginWidth},calcArrangementDifference:function(t,e,i,n){var o=Math.abs(t%this.c$.length);return e[o].left-n[o].left},destroy:function(){for(var t,e=this.container.getPanels(),i=0;t=e[i];i++)enyo.Arranger.positionControl(t,{left:null,top:null}),t.applyStyle("top",null),t.applyStyle("bottom",null),t.applyStyle("left",null),t.applyStyle("width",null);this.inherited(arguments)}});

// CollapsingArranger.js
enyo.kind({name:"enyo.CollapsingArranger",kind:"CarouselArranger",peekWidth:0,size:function(){this.clearLastSize(),this.inherited(arguments)},clearLastSize:function(){for(var t,e=0,i=this.container.getPanels();t=i[e];e++)t._fit&&e!=i.length-1&&(t.applyStyle("width",null),t._fit=null)},constructor:function(){this.inherited(arguments),this.peekWidth=null!=this.container.peekWidth?this.container.peekWidth:this.peekWidth},arrange:function(t,e){for(var i,n=this.container.getPanels(),o=0,s=this.containerPadding.left,a=0;i=n[o];o++)i.getShowing()?(this.arrangeControl(i,{left:s+a*this.peekWidth}),o>=e&&(s+=i.width+i.marginWidth-this.peekWidth),a++):(this.arrangeControl(i,{left:s}),o>=e&&(s+=i.width+i.marginWidth)),o==n.length-1&&0>e&&this.arrangeControl(i,{left:s-e})},calcArrangementDifference:function(t,e,i,n){var o=this.container.getPanels().length-1;return Math.abs(n[o].left-e[o].left)},flowControl:function(t,e){if(this.inherited(arguments),this.container.realtimeFit){var i=this.container.getPanels(),n=i.length-1,o=i[n];t==o&&this.fitControl(t,e.left)}},finish:function(){if(this.inherited(arguments),!this.container.realtimeFit&&this.containerBounds){var t=this.container.getPanels(),e=this.container.arrangement,i=t.length-1,n=t[i];this.fitControl(n,e[i].left)}},fitControl:function(t,e){t._fit=!0,t.applyStyle("width",this.containerBounds.width-e+"px"),t.resized()}});

// DockRightArranger.js
enyo.kind({name:"enyo.DockRightArranger",kind:"Arranger",basePanel:!1,overlap:0,layoutWidth:0,constructor:function(){this.inherited(arguments),this.overlap=null!=this.container.overlap?this.container.overlap:this.overlap,this.layoutWidth=null!=this.container.layoutWidth?this.container.layoutWidth:this.layoutWidth},size:function(){var t,e,i,n=this.container.getPanels(),o=this.containerPadding=this.container.hasNode()?enyo.dom.calcPaddingExtents(this.container.node):{},s=this.containerBounds;s.width-=o.left+o.right;var a,r=s.width,h=n.length;for(this.container.transitionPositions={},t=0;i=n[t];t++)i.width=0===t&&this.container.basePanel?r:i.getBounds().width;for(t=0;i=n[t];t++){0===t&&this.container.basePanel&&i.setBounds({width:r}),i.setBounds({top:o.top,bottom:o.bottom});for(var l=0;i=n[l];l++){var d;if(0===t&&this.container.basePanel)d=0;else if(t>l)d=r;else{if(t!==l)break;a=r>this.layoutWidth?this.overlap:0,d=r-n[t].width+a}this.container.transitionPositions[t+"."+l]=d}if(h>l)for(var c=!1,u=t+1;h>u;u++){if(a=0,c)a=0;else if(n[t].width+n[u].width-this.overlap>r)a=0,c=!0;else{for(a=n[t].width-this.overlap,e=t;u>e;e++){var g=a+n[e+1].width-this.overlap;if(!(r>g)){a=r;break}a=g}a=r-a}this.container.transitionPositions[t+"."+u]=a}}},arrange:function(t,e){var i,n,o=this.container.getPanels(),s=this.container.clamp(e);for(i=0;n=o[i];i++){var a=this.container.transitionPositions[i+"."+s];this.arrangeControl(n,{left:a})}},calcArrangementDifference:function(t,e,i){var n=this.container.getPanels(),o=i>t?n[i].width:n[t].width;return o},destroy:function(){for(var t,e=this.container.getPanels(),i=0;t=e[i];i++)enyo.Arranger.positionControl(t,{left:null,top:null}),t.applyStyle("top",null),t.applyStyle("bottom",null),t.applyStyle("left",null),t.applyStyle("width",null);this.inherited(arguments)}});

// OtherArrangers.js
enyo.kind({name:"enyo.LeftRightArranger",kind:"Arranger",margin:40,axisSize:"width",offAxisSize:"height",axisPosition:"left",constructor:function(){this.inherited(arguments),this.margin=null!=this.container.margin?this.container.margin:this.margin},size:function(){for(var t,e,i=this.container.getPanels(),n=this.containerBounds[this.axisSize],o=n-this.margin-this.margin,s=0;e=i[s];s++)t={},t[this.axisSize]=o,t[this.offAxisSize]="100%",e.setBounds(t)},start:function(){this.inherited(arguments);for(var t,e=this.container.fromIndex,i=this.container.toIndex,n=this.getOrderedControls(i),o=Math.floor(n.length/2),s=0;t=n[s];s++)e>i?s==n.length-o?t.applyStyle("z-index",0):t.applyStyle("z-index",1):s==n.length-1-o?t.applyStyle("z-index",0):t.applyStyle("z-index",1)},arrange:function(t,e){var i,n,o;if(1==this.container.getPanels().length)return o={},o[this.axisPosition]=this.margin,this.arrangeControl(this.container.getPanels()[0],o),void 0;var s=Math.floor(this.container.getPanels().length/2),a=this.getOrderedControls(Math.floor(e)-s),r=this.containerBounds[this.axisSize]-this.margin-this.margin,h=this.margin-r*s;for(i=0;n=a[i];i++)o={},o[this.axisPosition]=h,this.arrangeControl(n,o),h+=r},calcArrangementDifference:function(t,e,i,n){if(1==this.container.getPanels().length)return 0;var o=Math.abs(t%this.c$.length);return e[o][this.axisPosition]-n[o][this.axisPosition]},destroy:function(){for(var t,e=this.container.getPanels(),i=0;t=e[i];i++)enyo.Arranger.positionControl(t,{left:null,top:null}),enyo.Arranger.opacifyControl(t,1),t.applyStyle("left",null),t.applyStyle("top",null),t.applyStyle("height",null),t.applyStyle("width",null);this.inherited(arguments)}}),enyo.kind({name:"enyo.TopBottomArranger",kind:"LeftRightArranger",dragProp:"ddy",dragDirectionProp:"yDirection",canDragProp:"vertical",axisSize:"height",offAxisSize:"width",axisPosition:"top"}),enyo.kind({name:"enyo.SpiralArranger",kind:"Arranger",incrementalPoints:!0,inc:20,size:function(){for(var t,e=this.container.getPanels(),i=this.containerBounds,n=this.controlWidth=i.width/3,o=this.controlHeight=i.height/3,s=0;t=e[s];s++)t.setBounds({width:n,height:o})},arrange:function(t){for(var e,i=this.inc,n=0,o=t.length;e=t[n];n++){var s=Math.cos(2*(n/o)*Math.PI)*n*i+this.controlWidth,a=Math.sin(2*(n/o)*Math.PI)*n*i+this.controlHeight;this.arrangeControl(e,{left:s,top:a})}},start:function(){this.inherited(arguments);for(var t,e=this.getOrderedControls(this.container.toIndex),i=0;t=e[i];i++)t.applyStyle("z-index",e.length-i)},calcArrangementDifference:function(){return this.controlWidth},destroy:function(){for(var t,e=this.container.getPanels(),i=0;t=e[i];i++)t.applyStyle("z-index",null),enyo.Arranger.positionControl(t,{left:null,top:null}),t.applyStyle("left",null),t.applyStyle("top",null),t.applyStyle("height",null),t.applyStyle("width",null);this.inherited(arguments)}}),enyo.kind({name:"enyo.GridArranger",kind:"Arranger",incrementalPoints:!0,colWidth:100,colHeight:100,size:function(){for(var t,e=this.container.getPanels(),i=this.colWidth,n=this.colHeight,o=0;t=e[o];o++)t.setBounds({width:i,height:n})},arrange:function(t){for(var e,i=this.colWidth,n=this.colHeight,o=Math.max(1,Math.floor(this.containerBounds.width/i)),s=0,a=0;t.length>a;s++)for(var r=0;o>r&&(e=t[a]);r++,a++)this.arrangeControl(e,{left:i*r,top:n*s})},flowControl:function(t,e){this.inherited(arguments),enyo.Arranger.opacifyControl(t,0!==e.top%this.colHeight?.25:1)},calcArrangementDifference:function(){return this.colWidth},destroy:function(){for(var t,e=this.container.getPanels(),i=0;t=e[i];i++)enyo.Arranger.positionControl(t,{left:null,top:null}),t.applyStyle("left",null),t.applyStyle("top",null),t.applyStyle("height",null),t.applyStyle("width",null);this.inherited(arguments)}});

// Panels.js
enyo.kind({name:"enyo.Panels",classes:"enyo-panels",published:{index:0,draggable:!0,animate:!0,wrap:!1,arrangerKind:"CardArranger",narrowFit:!0},events:{onTransitionStart:"",onTransitionFinish:""},handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish",onscroll:"domScroll"},tools:[{kind:"Animator",onStep:"step",onEnd:"completed"}],fraction:0,create:function(){this.transitionPoints=[],this.inherited(arguments),this.arrangerKindChanged(),this.narrowFitChanged(),this.indexChanged()},rendered:function(){this.inherited(arguments),enyo.makeBubble(this,"scroll")},domScroll:function(){this.hasNode()&&this.node.scrollLeft>0&&(this.node.scrollLeft=0)},initComponents:function(){this.createChrome(this.tools),this.inherited(arguments)},arrangerKindChanged:function(){this.setLayoutKind(this.arrangerKind)},narrowFitChanged:function(){this.addRemoveClass("enyo-panels-fit-narrow",this.narrowFit)},destroy:function(){this.destroying=!0,this.inherited(arguments)},removeControl:function(t){if(this.destroying)return this.inherited(arguments);var e=-1,i=enyo.indexOf(t,this.controls);i===this.index&&(e=Math.max(i-1,0)),this.inherited(arguments),-1!==e&&this.controls.length>0&&(this.setIndex(e),this.flow(),this.reflow())},isPanel:function(){return!0},flow:function(){this.arrangements=[],this.inherited(arguments)},reflow:function(){this.arrangements=[],this.inherited(arguments),this.refresh()},getPanels:function(){var t=this.controlParent||this;return t.children},getActive:function(){var t=this.getPanels(),e=this.index%t.length;return 0>e&&(e+=t.length),t[e]},getAnimator:function(){return this.$.animator},setIndex:function(t){var e=this.get("index");this.index=this.clamp(t),this.notifyObservers("index",e,t)},setIndexDirect:function(t){this.setIndex(t),this.completed()},selectPanelByName:function(t){if(t)for(var e=0,i=this.getPanels(),n=i.length;n>e;++e)if(t===i[e].name)return this.setIndex(e),e},previous:function(){var t=this.index-1;this.wrap&&0>t&&(t=this.getPanels().length-1),this.setIndex(t)},next:function(){var t=this.index+1;this.wrap&&t>=this.getPanels().length&&(t=0),this.setIndex(t)},clamp:function(t){var e=this.getPanels().length-1;return this.wrap?t:Math.max(0,Math.min(t,e))},indexChanged:function(t){this.lastIndex=t,!this.dragging&&this.$.animator&&(this.$.animator.isAnimating()&&(this.finishTransitionInfo&&(this.finishTransitionInfo.animating=!0),this.completed()),this.$.animator.stop(),this.hasNode()&&(this.animate?(this.startTransition(),this.$.animator.play({startValue:this.fraction})):this.refresh()))},step:function(t){this.fraction=t.value,this.stepTransition()},completed:function(){return this.$.animator.isAnimating()&&this.$.animator.stop(),this.fraction=1,this.stepTransition(),this.finishTransition(),!0},dragstart:function(t,e){return this.draggable&&this.layout&&this.layout.canDragEvent(e)?(e.preventDefault(),this.dragstartTransition(e),this.dragging=!0,this.$.animator.stop(),!0):void 0},drag:function(t,e){this.dragging&&(e.preventDefault(),this.dragTransition(e))},dragfinish:function(t,e){this.dragging&&(this.dragging=!1,e.preventTap(),this.dragfinishTransition(e))},dragstartTransition:function(t){if(this.$.animator.isAnimating())this.verifyDragTransition(t);else{var e=this.fromIndex=this.index;this.toIndex=e-(this.layout?this.layout.calcDragDirection(t):0)}this.fromIndex=this.clamp(this.fromIndex),this.toIndex=this.clamp(this.toIndex),this.fireTransitionStart(),this.layout&&this.layout.start()},dragTransition:function(t){var e=this.layout?this.layout.calcDrag(t):0,i=this.transitionPoints,n=i[0],o=i[i.length-1],s=this.fetchArrangement(n),a=this.fetchArrangement(o),r=this.layout?this.layout.drag(e,n,s,o,a):0,h=e&&!r;this.fraction+=r;var l=this.fraction;(l>1||0>l||h)&&((l>0||h)&&this.dragfinishTransition(t),this.dragstartTransition(t),this.fraction=0),this.stepTransition()},dragfinishTransition:function(t){this.verifyDragTransition(t),this.setIndex(this.toIndex),this.dragging&&this.fireTransitionFinish()},verifyDragTransition:function(t){var e=this.layout?this.layout.calcDragDirection(t):0,i=Math.min(this.fromIndex,this.toIndex),n=Math.max(this.fromIndex,this.toIndex);if(e>0){var o=i;i=n,n=o}i!=this.fromIndex&&(this.fraction=1-this.fraction),this.fromIndex=i,this.toIndex=n},refresh:function(){this.$.animator&&this.$.animator.isAnimating()&&this.$.animator.stop(),this.startTransition(),this.fraction=1,this.stepTransition(),this.finishTransition()},startTransition:function(){this.fromIndex=null!=this.fromIndex?this.fromIndex:this.lastIndex||0,this.toIndex=null!=this.toIndex?this.toIndex:this.index,this.layout&&this.layout.start(),this.fireTransitionStart()},finishTransition:function(){this.layout&&this.layout.finish(),this.transitionPoints=[],this.fraction=0,this.fromIndex=this.toIndex=null,this.fireTransitionFinish()},fireTransitionStart:function(){var t=this.startTransitionInfo;!this.hasNode()||t&&t.fromIndex==this.fromIndex&&t.toIndex==this.toIndex||(this.startTransitionInfo={fromIndex:this.fromIndex,toIndex:this.toIndex},this.doTransitionStart(enyo.clone(this.startTransitionInfo)))},fireTransitionFinish:function(){var t=this.finishTransitionInfo;!this.hasNode()||t&&t.fromIndex==this.lastIndex&&t.toIndex==this.index||(this.finishTransitionInfo=t&&t.animating?{fromIndex:t.toIndex,toIndex:this.lastIndex}:{fromIndex:this.lastIndex,toIndex:this.index},this.doTransitionFinish(enyo.clone(this.finishTransitionInfo)))},stepTransition:function(){if(this.hasNode()){var t=this.transitionPoints,e=(this.fraction||0)*(t.length-1),i=Math.floor(e);e-=i;var n=t[i],o=t[i+1],s=this.fetchArrangement(n),a=this.fetchArrangement(o);this.arrangement=s&&a?enyo.Panels.lerp(s,a,e):s||a,this.arrangement&&this.layout&&this.layout.flowArrangement()}},fetchArrangement:function(t){return null!=t&&!this.arrangements[t]&&this.layout&&(this.layout._arrange(t),this.arrangements[t]=this.readArrangement(this.getPanels())),this.arrangements[t]},readArrangement:function(t){for(var e,i=[],n=0,o=t;e=o[n];n++)i.push(enyo.clone(e._arranger));return i},statics:{isScreenNarrow:function(){return 800>=enyo.dom.getWindowWidth()},lerp:function(t,e,i){for(var n,o=[],s=0,a=enyo.keys(t);n=a[s];s++)o.push(this.lerpObject(t[n],e[n],i));return o},lerpObject:function(t,e,i){var n,o,s=enyo.clone(t);if(e)for(var a in t)n=t[a],o=e[a],n!=o&&(s[a]=n-(n-o)*i);return s}}});

// Node.js
enyo.kind({name:"enyo.Node",published:{expandable:!1,expanded:!1,icon:"",onlyIconExpands:!1,selected:!1},style:"padding: 0 0 0 16px;",content:"Node",defaultKind:"Node",classes:"enyo-node",components:[{name:"icon",kind:"Image",showing:!1},{kind:"Control",name:"caption",Xtag:"span",style:"display: inline-block; padding: 4px;",allowHtml:!0},{kind:"Control",name:"extra",tag:"span",allowHtml:!0}],childClient:[{kind:"Control",name:"box",classes:"enyo-node-box",Xstyle:"border: 1px solid orange;",components:[{kind:"Control",name:"client",classes:"enyo-node-client",Xstyle:"border: 1px solid lightblue;"}]}],handlers:{ondblclick:"dblclick"},events:{onNodeTap:"nodeTap",onNodeDblClick:"nodeDblClick",onExpand:"nodeExpand",onDestroyed:"nodeDestroyed"},create:function(){this.inherited(arguments),this.selectedChanged(),this.iconChanged()},destroy:function(){this.doDestroyed(),this.inherited(arguments)},initComponents:function(){this.expandable&&(this.kindComponents=this.kindComponents.concat(this.childClient)),this.inherited(arguments)},contentChanged:function(){this.$.caption.setContent(this.content)},iconChanged:function(){this.$.icon.setSrc(this.icon),this.$.icon.setShowing(Boolean(this.icon))},selectedChanged:function(){this.addRemoveClass("enyo-selected",this.selected)},rendered:function(){this.inherited(arguments),this.expandable&&!this.expanded&&this.quickCollapse()},addNodes:function(t){this.destroyClientControls();for(var e,i=0;e=t[i];i++)this.createComponent(e);this.$.client.render()},addTextNodes:function(t){this.destroyClientControls();for(var e,i=0;e=t[i];i++)this.createComponent({content:e});this.$.client.render()},tap:function(t,e){return this.onlyIconExpands?e.target==this.$.icon.hasNode()?this.toggleExpanded():this.doNodeTap():(this.toggleExpanded(),this.doNodeTap()),!0},dblclick:function(){return this.doNodeDblClick(),!0},toggleExpanded:function(){this.setExpanded(!this.expanded)},quickCollapse:function(){this.removeClass("enyo-animate"),this.$.box.applyStyle("height","0");var t=this.$.client.getBounds().height;this.$.client.setBounds({top:-t})},_expand:function(){this.addClass("enyo-animate");var t=this.$.client.getBounds().height;this.$.box.setBounds({height:t}),this.$.client.setBounds({top:0}),setTimeout(this.bindSafely(function(){this.expanded&&(this.removeClass("enyo-animate"),this.$.box.applyStyle("height","auto"))}),225)},_collapse:function(){this.removeClass("enyo-animate");var t=this.$.client.getBounds().height;this.$.box.setBounds({height:t}),setTimeout(this.bindSafely(function(){this.addClass("enyo-animate"),this.$.box.applyStyle("height","0"),this.$.client.setBounds({top:-t})}),25)},expandedChanged:function(){if(this.expandable){var t={expanded:this.expanded};this.doExpand(t),t.wait||this.effectExpanded()}else this.expanded=!1},effectExpanded:function(){this.$.client&&(this.expanded?this._expand():this._collapse())}});

// ImageViewPin.js
enyo.kind({name:"enyo.ImageViewPin",kind:"enyo.Control",published:{highlightAnchorPoint:!1,anchor:{top:0,left:0},position:{top:0,left:0}},style:"position:absolute;z-index:1000;width:0px;height:0px;",handlers:{onPositionPin:"reAnchor"},create:function(){this.inherited(arguments),this.styleClientControls(),this.positionClientControls(),this.highlightAnchorPointChanged(),this.anchorChanged()},styleClientControls:function(){for(var t=this.getClientControls(),e=0;t.length>e;e++)t[e].applyStyle("position","absolute")},positionClientControls:function(){for(var t=this.getClientControls(),e=0;t.length>e;e++)for(var i in this.position)t[e].applyStyle(i,this.position[i]+"px")},highlightAnchorPointChanged:function(){this.addRemoveClass("pinDebug",this.highlightAnchorPoint)},anchorChanged:function(){var t=null,e=null;for(e in this.anchor)t=(""+this.anchor[e]).match(/^(\d+(?:\.\d+)?)(.*)$/),t&&(this.anchor[e+"Coords"]={value:t[1],units:t[2]||"px"})},reAnchor:function(t,e){var i=e.scale,n=e.bounds,o=this.anchor.right?"px"==this.anchor.rightCoords.units?n.width+n.x-this.anchor.rightCoords.value*i:n.width*(100-this.anchor.rightCoords.value)/100+n.x:"px"==this.anchor.leftCoords.units?this.anchor.leftCoords.value*i+n.x:n.width*this.anchor.leftCoords.value/100+n.x,s=this.anchor.bottom?"px"==this.anchor.bottomCoords.units?n.height+n.y-this.anchor.bottomCoords.value*i:n.height*(100-this.anchor.bottomCoords.value)/100+n.y:"px"==this.anchor.topCoords.units?this.anchor.topCoords.value*i+n.y:n.height*this.anchor.topCoords.value/100+n.y;this.applyStyle("left",o+"px"),this.applyStyle("top",s+"px")}});

// ImageView.js
enyo.kind({name:"enyo.ImageView",kind:enyo.Scroller,touchOverscroll:!1,thumb:!1,animate:!0,verticalDragPropagation:!0,horizontalDragPropagation:!0,published:{scale:"auto",disableZoom:!1,src:void 0},events:{onZoom:""},touch:!0,preventDragPropagation:!1,handlers:{ondragstart:"dragPropagation"},components:[{name:"animator",kind:"Animator",onStep:"zoomAnimationStep",onEnd:"zoomAnimationEnd"},{name:"viewport",style:"overflow:hidden;min-height:100%;min-width:100%;",classes:"enyo-fit",ongesturechange:"gestureTransform",ongestureend:"saveState",ontap:"singleTap",ondblclick:"doubleClick",onmousewheel:"mousewheel",components:[{kind:"Image",ondown:"down"}]}],create:function(){this.inherited(arguments),this.canTransform=enyo.dom.canTransform(),this.canTransform||this.$.image.applyStyle("position","relative"),this.canAccelerate=enyo.dom.canAccelerate(),this.bufferImage=new Image,this.bufferImage.onload=this.bindSafely("imageLoaded"),this.bufferImage.onerror=this.bindSafely("imageError"),this.srcChanged(),this.getStrategy().setDragDuringGesture(!1),this.getStrategy().$.scrollMath&&this.getStrategy().$.scrollMath.start()},destroy:function(){this.bufferImage&&(this.bufferImage.onerror=void 0,this.bufferImage.onerror=void 0,delete this.bufferImage),this.inherited(arguments)},down:function(t,e){e.preventDefault()},dragPropagation:function(t,e){var i=this.getStrategy().getScrollBounds(),n=0===i.top&&e.dy>0||i.top>=i.maxTop-2&&0>e.dy,o=0===i.left&&e.dx>0||i.left>=i.maxLeft-2&&0>e.dx;return!(n&&this.verticalDragPropagation||o&&this.horizontalDragPropagation)},mousewheel:function(t,e){e.pageX|=e.clientX+e.target.scrollLeft,e.pageY|=e.clientY+e.target.scrollTop;var i=(this.maxScale-this.minScale)/10,n=this.scale;return e.wheelDelta>0||0>e.detail?this.scale=this.limitScale(this.scale+i):(0>e.wheelDelta||e.detail>0)&&(this.scale=this.limitScale(this.scale-i)),this.eventPt=this.calcEventLocation(e),this.transformImage(this.scale),n!=this.scale&&this.doZoom({scale:this.scale}),this.ratioX=this.ratioY=null,e.preventDefault(),!0},srcChanged:function(){this.src&&this.src.length>0&&this.bufferImage&&this.src!=this.bufferImage.src&&(this.bufferImage.src=this.src)},imageLoaded:function(){this.originalWidth=this.bufferImage.width,this.originalHeight=this.bufferImage.height,this.scaleChanged(),this.$.image.setSrc(this.bufferImage.src),enyo.dom.transformValue(this.getStrategy().$.client,"translate3d","0px, 0px, 0"),this.positionClientControls(this.scale),this.alignImage()},resizeHandler:function(){this.inherited(arguments),this.$.image.src&&this.scaleChanged()},scaleChanged:function(){var t=this.hasNode();if(t){this.containerWidth=t.clientWidth,this.containerHeight=t.clientHeight;var e=this.containerWidth/this.originalWidth,i=this.containerHeight/this.originalHeight;this.minScale=Math.min(e,i),this.maxScale=1>3*this.minScale?1:3*this.minScale,"auto"==this.scale?this.scale=this.minScale:"width"==this.scale?this.scale=e:"height"==this.scale?this.scale=i:"fit"==this.scale?(this.fitAlignment="center",this.scale=Math.max(e,i)):(this.maxScale=Math.max(this.maxScale,this.scale),this.scale=this.limitScale(this.scale))}this.eventPt=this.calcEventLocation(),this.transformImage(this.scale)},imageError:function(t){enyo.error("Error loading image: "+this.src),this.bubble("onerror",t)},alignImage:function(){if(this.fitAlignment&&"center"===this.fitAlignment){var t=this.getScrollBounds();this.setScrollLeft(t.maxLeft/2),this.setScrollTop(t.maxTop/2)}},gestureTransform:function(t,e){this.eventPt=this.calcEventLocation(e),this.transformImage(this.limitScale(this.scale*e.scale))},calcEventLocation:function(t){var e={x:0,y:0};if(t&&this.hasNode()){var i=this.node.getBoundingClientRect();e.x=Math.round(t.pageX-i.left-this.imageBounds.x),e.x=Math.max(0,Math.min(this.imageBounds.width,e.x)),e.y=Math.round(t.pageY-i.top-this.imageBounds.y),e.y=Math.max(0,Math.min(this.imageBounds.height,e.y))}return e},transformImage:function(t){this.tapped=!1;var e=this.imageBounds||this.innerImageBounds(t);this.imageBounds=this.innerImageBounds(t),this.scale>this.minScale?this.$.viewport.applyStyle("cursor","move"):this.$.viewport.applyStyle("cursor",null),this.$.viewport.setBounds({width:this.imageBounds.width+"px",height:this.imageBounds.height+"px"}),this.ratioX=this.ratioX||(this.eventPt.x+this.getScrollLeft())/e.width,this.ratioY=this.ratioY||(this.eventPt.y+this.getScrollTop())/e.height;var i,n;if(this.$.animator.ratioLock?(i=this.$.animator.ratioLock.x*this.imageBounds.width-this.containerWidth/2,n=this.$.animator.ratioLock.y*this.imageBounds.height-this.containerHeight/2):(i=this.ratioX*this.imageBounds.width-this.eventPt.x,n=this.ratioY*this.imageBounds.height-this.eventPt.y),i=Math.max(0,Math.min(this.imageBounds.width-this.containerWidth,i)),n=Math.max(0,Math.min(this.imageBounds.height-this.containerHeight,n)),this.canTransform){var o={scale:t};o=this.canAccelerate?enyo.mixin({translate3d:Math.round(this.imageBounds.left)+"px, "+Math.round(this.imageBounds.top)+"px, 0px"},o):enyo.mixin({translate:this.imageBounds.left+"px, "+this.imageBounds.top+"px"},o),enyo.dom.transform(this.$.image,o)}else this.$.image.setBounds({width:this.imageBounds.width+"px",height:this.imageBounds.height+"px",left:this.imageBounds.left+"px",top:this.imageBounds.top+"px"});this.setScrollLeft(i),this.setScrollTop(n),this.positionClientControls(t)},limitScale:function(t){return this.disableZoom?t=this.scale:t>this.maxScale?t=this.maxScale:this.minScale>t&&(t=this.minScale),t},innerImageBounds:function(t){var e=this.originalWidth*t,i=this.originalHeight*t,n={x:0,y:0,transX:0,transY:0};return this.containerWidth>e&&(n.x+=(this.containerWidth-e)/2),this.containerHeight>i&&(n.y+=(this.containerHeight-i)/2),this.canTransform&&(n.transX-=(this.originalWidth-e)/2,n.transY-=(this.originalHeight-i)/2),{left:n.x+n.transX,top:n.y+n.transY,width:e,height:i,x:n.x,y:n.y}},saveState:function(t,e){var i=this.scale;this.scale*=e.scale,this.scale=this.limitScale(this.scale),i!=this.scale&&this.doZoom({scale:this.scale}),this.ratioX=this.ratioY=null},doubleClick:function(t,e){8==enyo.platform.ie&&(this.tapped=!0,e.pageX=e.clientX+e.target.scrollLeft,e.pageY=e.clientY+e.target.scrollTop,this.singleTap(t,e),e.preventDefault())},singleTap:function(t,e){setTimeout(this.bindSafely(function(){this.tapped=!1}),300),this.tapped?(this.tapped=!1,this.smartZoom(t,e)):this.tapped=!0},smartZoom:function(t,e){var i=this.hasNode(),n=this.$.image.hasNode();if(i&&n&&this.hasNode()&&!this.disableZoom){var o=this.scale;if(this.scale=this.scale!=this.minScale?this.minScale:this.maxScale,this.eventPt=this.calcEventLocation(e),this.animate){var s={x:(this.eventPt.x+this.getScrollLeft())/this.imageBounds.width,y:(this.eventPt.y+this.getScrollTop())/this.imageBounds.height};this.$.animator.play({duration:350,ratioLock:s,baseScale:o,deltaScale:this.scale-o})}else this.transformImage(this.scale),this.doZoom({scale:this.scale})}},zoomAnimationStep:function(){var t=this.$.animator.baseScale+this.$.animator.deltaScale*this.$.animator.value;this.transformImage(t)},zoomAnimationEnd:function(){this.doZoom({scale:this.scale}),this.$.animator.ratioLock=void 0},positionClientControls:function(t){this.waterfallDown("onPositionPin",{scale:t,bounds:this.imageBounds})}});

// ImageCarousel.js
enyo.kind({name:"enyo.ImageCarousel",kind:enyo.Panels,arrangerKind:"enyo.CarouselArranger",defaultScale:"auto",disableZoom:!1,lowMemory:!1,published:{images:[]},handlers:{onTransitionStart:"transitionStart",onTransitionFinish:"transitionFinish"},create:function(){this.inherited(arguments),this.imageCount=this.images.length,this.images.length>0&&(this.initContainers(),this.loadNearby())},initContainers:function(){for(var t=0;this.images.length>t;t++)this.$["container"+t]||(this.createComponent({name:"container"+t,style:"height:100%; width:100%;"}),this.$["container"+t].render());for(t=this.images.length;this.imageCount>t;t++)this.$["image"+t]&&this.$["image"+t].destroy(),this.$["container"+t].destroy();this.imageCount=this.images.length},loadNearby:function(){var t=this.getBufferRange();for(var e in t)this.loadImageView(t[e])},getBufferRange:function(){var t=[];if(this.layout.containerBounds){var e,i,n,s,o=1,a=this.layout.containerBounds;for(i=this.index-1,n=0,s=a.width*o;i>=0&&s>=n;)e=this.$["container"+i],n+=e.width+e.marginWidth,t.unshift(i),i--;for(i=this.index,n=0,s=a.width*(o+1);this.images.length>i&&s>=n;)e=this.$["container"+i],n+=e.width+e.marginWidth,t.push(i),i++}return t},reflow:function(){this.inherited(arguments),this.loadNearby()},loadImageView:function(t){return this.wrap&&(t=(t%this.images.length+this.images.length)%this.images.length),t>=0&&this.images.length-1>=t&&(this.$["image"+t]?this.$["image"+t].src!=this.images[t]&&(this.$["image"+t].setSrc(this.images[t]),this.$["image"+t].setScale(this.defaultScale),this.$["image"+t].setDisableZoom(this.disableZoom)):(this.$["container"+t].createComponent({name:"image"+t,kind:"ImageView",scale:this.defaultScale,disableZoom:this.disableZoom,src:this.images[t],verticalDragPropagation:!1,style:"height:100%; width:100%;"},{owner:this}),this.$["image"+t].render())),this.$["image"+t]},setImages:function(t){this.set("images",t)},imagesChanged:function(){this.initContainers(),this.loadNearby()},indexChanged:function(){this.loadNearby(),this.lowMemory&&this.cleanupMemory(),this.inherited(arguments)},transitionStart:function(t,e){return e.fromIndex==e.toIndex?!0:void 0},transitionFinish:function(){this.loadNearby(),this.lowMemory&&this.cleanupMemory()},getActiveImage:function(){return this.getImageByIndex(this.index)},getImageByIndex:function(t){return this.$["image"+t]||this.loadImageView(t)},cleanupMemory:function(){for(var t=this.getBufferRange(),e=0;this.images.length>e;e++)-1===enyo.indexOf(e,t)&&this.$["image"+e]&&this.$["image"+e].destroy()}});

// DividerDrawer.js
enyo.kind({name:"gts.DividerDrawer",classes:"gts-DividerDrawer",published:{caption:"",open:!0},events:{onChange:""},components:[{name:"base",kind:"enyo.FittableColumns",noStretch:!0,classes:"base-bar",ontap:"toggleOpen",components:[{classes:"end-cap"},{name:"caption",classes:"caption"},{classes:"bar",fit:!0},{name:"switch",classes:"toggle",value:!1},{classes:"end-cap bar"}]},{name:"client",kind:"onyx.Drawer"}],rendered:function(){this.inherited(arguments),this.captionChanged(),this.openChanged()},reflow:function(){this.$.base.reflow()},openChanged:function(){this.$["switch"].value=this.open,this.$.client.setOpen(this.$["switch"].value),this.$["switch"].addRemoveClass("checked",this.$["switch"].value),this.reflow()},captionChanged:function(){this.$.caption.setContent(this.caption),this.$.caption.applyStyle("display",this.caption?"":"none"),this.reflow()},toggleOpen:function(){return this.open=!this.$["switch"].value,this.$["switch"].value=this.open,this.openChanged(),this.doChange(this,{caption:this.getCaption(),open:this.getOpen()}),!0}});

// leaflet.js
(function(t,e,i){var n,o;typeof exports!=i+""?n=exports:(o=t.L,n={},n.noConflict=function(){return t.L=o,this},t.L=n),n.version="0.5",n.Util={extend:function(t){var e,i,n,o,s=Array.prototype.slice.call(arguments,1);for(i=0,n=s.length;n>i;i++){o=s[i]||{};for(e in o)o.hasOwnProperty(e)&&(t[e]=o[e])}return t},bind:function(t,e){var i=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,i||arguments)}},stamp:function(){var t=0,e="_leaflet_id";return function(i){return i[e]=i[e]||++t,i[e]}}(),limitExecByInterval:function(t,e,n){var o,s;return function a(){var r=arguments;return o?(s=!0,i):(o=!0,setTimeout(function(){o=!1,s&&(a.apply(n,r),s=!1)},e),t.apply(n,r),i)}},falseFn:function(){return!1},formatNum:function(t,e){var i=Math.pow(10,e||5);return Math.round(t*i)/i},splitWords:function(t){return t.replace(/^\s+|\s+$/g,"").split(/\s+/)},setOptions:function(t,e){return t.options=n.extend({},t.options,e),t.options},getParamString:function(t,e){var i=[];for(var n in t)t.hasOwnProperty(n)&&i.push(n+"="+t[n]);return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,function(t,i){var n=e[i];if(!e.hasOwnProperty(i))throw Error("No value provided for variable "+t);return n})},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){var i,n,o=["webkit","moz","o","ms"];for(i=0;o.length>i&&!n;i++)n=t[o[i]+e];return n}function o(e){var i=+new Date,n=Math.max(0,16-(i-s));return s=i+n,t.setTimeout(e,n)}var s=0,a=t.requestAnimationFrame||e("RequestAnimationFrame")||o,r=t.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){t.clearTimeout(e)};n.Util.requestAnimFrame=function(e,s,r,h){return e=n.bind(e,s),r&&a===o?(e(),i):a.call(t,e,h)},n.Util.cancelAnimFrame=function(e){e&&r.call(t,e)}}(),n.extend=n.Util.extend,n.bind=n.Util.bind,n.stamp=n.Util.stamp,n.setOptions=n.Util.setOptions,n.Class=function(){},n.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},i=function(){};i.prototype=this.prototype;var o=new i;o.constructor=e,e.prototype=o;for(var s in this)this.hasOwnProperty(s)&&"prototype"!==s&&(e[s]=this[s]);t.statics&&(n.extend(e,t.statics),delete t.statics),t.includes&&(n.Util.extend.apply(null,[o].concat(t.includes)),delete t.includes),t.options&&o.options&&(t.options=n.extend({},o.options,t.options)),n.extend(o,t),o._initHooks=[];var a=this;return o.callInitHooks=function(){if(!this._initHooksCalled){a.prototype.callInitHooks&&a.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;e>t;t++)o._initHooks[t].call(this)}},e},n.Class.include=function(t){n.extend(this.prototype,t)},n.Class.mergeOptions=function(t){n.extend(this.prototype.options,t)},n.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i)};var s="_leaflet_events";n.Mixin={},n.Mixin.Events={addEventListener:function(t,e,i){var o,a,r,h=this[s]=this[s]||{};if("object"==typeof t){for(o in t)t.hasOwnProperty(o)&&this.addEventListener(o,t[o],e);return this}for(t=n.Util.splitWords(t),a=0,r=t.length;r>a;a++)h[t[a]]=h[t[a]]||[],h[t[a]].push({action:e,context:i||this});return this},hasEventListeners:function(t){return s in this&&t in this[s]&&this[s][t].length>0},removeEventListener:function(t,e,i){var o,a,r,h,l,d=this[s];if("object"==typeof t){for(o in t)t.hasOwnProperty(o)&&this.removeEventListener(o,t[o],e);return this}for(t=n.Util.splitWords(t),a=0,r=t.length;r>a;a++)if(this.hasEventListeners(t[a]))for(h=d[t[a]],l=h.length-1;l>=0;l--)e&&h[l].action!==e||i&&h[l].context!==i||h.splice(l,1);return this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;for(var i=n.extend({type:t,target:this},e),o=this[s][t].slice(),a=0,r=o.length;r>a;a++)o[a].action.call(o[a].context||this,i);return this}},n.Mixin.Events.on=n.Mixin.Events.addEventListener,n.Mixin.Events.off=n.Mixin.Events.removeEventListener,n.Mixin.Events.fire=n.Mixin.Events.fireEvent,function(){var o=!!t.ActiveXObject,s=o&&!t.XMLHttpRequest,a=o&&!e.querySelector,r=navigator.userAgent.toLowerCase(),h=-1!==r.indexOf("webkit"),l=-1!==r.indexOf("chrome"),d=-1!==r.indexOf("android"),c=-1!==r.search("android [23]"),u=typeof orientation!=i+"",p=t.navigator&&t.navigator.msPointerEnabled&&t.navigator.msMaxTouchPoints,g="devicePixelRatio"in t&&t.devicePixelRatio>1||"matchMedia"in t&&t.matchMedia("(min-resolution:144dpi)")&&t.matchMedia("(min-resolution:144dpi)").matches,m=e.documentElement,f=o&&"transition"in m.style,y="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix,v="MozPerspective"in m.style,_="OTransition"in m.style,w=!t.L_DISABLE_3D&&(f||y||v||_),P=!t.L_NO_TOUCH&&function(){var t="ontouchstart";if(p||t in m)return!0;var i=e.createElement("div"),n=!1;return i.setAttribute?(i.setAttribute(t,"return;"),"function"==typeof i[t]&&(n=!0),i.removeAttribute(t),i=null,n):!1}();n.Browser={ie:o,ie6:s,ie7:a,webkit:h,android:d,android23:c,chrome:l,ie3d:f,webkit3d:y,gecko3d:v,opera3d:_,any3d:w,mobile:u,mobileWebkit:u&&h,mobileWebkit3d:u&&y,mobileOpera:u&&t.opera,touch:P,msTouch:p,retina:g}}(),n.Point=function(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e},n.Point.prototype={clone:function(){return new n.Point(this.x,this.y)},add:function(t){return this.clone()._add(n.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(n.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(t){t=n.point(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t.x===this.x&&t.y===this.y},toString:function(){return"Point("+n.Util.formatNum(this.x)+", "+n.Util.formatNum(this.y)+")"}},n.point=function(t,e,i){return t instanceof n.Point?t:n.Util.isArray(t)?new n.Point(t[0],t[1]):isNaN(t)?t:new n.Point(t,e,i)},n.Bounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;o>n;n++)this.extend(i[n])},n.Bounds.prototype={extend:function(t){return t=n.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new n.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new n.Point(this.min.x,this.max.y)},getTopRight:function(){return new n.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return t="number"==typeof t[0]||t instanceof n.Point?n.point(t):n.bounds(t),t instanceof n.Bounds?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=n.bounds(t);var e=this.min,i=this.max,o=t.min,s=t.max,a=s.x>=e.x&&o.x<=i.x,r=s.y>=e.y&&o.y<=i.y;return a&&r},isValid:function(){return!(!this.min||!this.max)}},n.bounds=function(t,e){return!t||t instanceof n.Bounds?t:new n.Bounds(t,e)},n.Transformation=function(t,e,i,n){this._a=t,this._b=e,this._c=i,this._d=n},n.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new n.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},n.DomUtil={get:function(t){return"string"==typeof t?e.getElementById(t):t},getStyle:function(t,i){var n=t.style[i];if(!n&&t.currentStyle&&(n=t.currentStyle[i]),(!n||"auto"===n)&&e.defaultView){var o=e.defaultView.getComputedStyle(t,null);n=o?o[i]:null}return"auto"===n?null:n},getViewportOffset:function(t){var i,o=0,s=0,a=t,r=e.body,h=n.Browser.ie7;do{if(o+=a.offsetTop||0,s+=a.offsetLeft||0,o+=parseInt(n.DomUtil.getStyle(a,"borderTopWidth"),10)||0,s+=parseInt(n.DomUtil.getStyle(a,"borderLeftWidth"),10)||0,i=n.DomUtil.getStyle(a,"position"),a.offsetParent===r&&"absolute"===i)break;if("fixed"===i){o+=r.scrollTop||0,s+=r.scrollLeft||0;break}a=a.offsetParent}while(a);a=t;do{if(a===r)break;o-=a.scrollTop||0,s-=a.scrollLeft||0,n.DomUtil.documentIsLtr()||!n.Browser.webkit&&!h||(s+=a.scrollWidth-a.clientWidth,h&&"hidden"!==n.DomUtil.getStyle(a,"overflow-y")&&"hidden"!==n.DomUtil.getStyle(a,"overflow")&&(s+=17)),a=a.parentNode}while(a);return new n.Point(s,o)},documentIsLtr:function(){return n.DomUtil._docIsLtrCached||(n.DomUtil._docIsLtrCached=!0,n.DomUtil._docIsLtr="ltr"===n.DomUtil.getStyle(e.body,"direction")),n.DomUtil._docIsLtr},create:function(t,i,n){var o=e.createElement(t);return o.className=i,n&&n.appendChild(o),o},disableTextSelection:function(){e.selection&&e.selection.empty&&e.selection.empty(),this._onselectstart||(this._onselectstart=e.onselectstart||null,e.onselectstart=n.Util.falseFn)},enableTextSelection:function(){e.onselectstart===n.Util.falseFn&&(e.onselectstart=this._onselectstart,this._onselectstart=null)},hasClass:function(t,e){return t.className.length>0&&RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},addClass:function(t,e){n.DomUtil.hasClass(t,e)||(t.className+=(t.className?" ":"")+e)},removeClass:function(t,e){function i(t,i){return i===e?"":t}t.className=t.className.replace(/(\S+)\s*/g,i).replace(/(^\s+|\s+$)/,"")},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(o){}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}},testProp:function(t){for(var i=e.documentElement.style,n=0;t.length>n;n++)if(t[n]in i)return t[n];return!1},getTranslateString:function(t){var e=n.Browser.webkit3d,i="translate"+(e?"3d":"")+"(",o=(e?",0":"")+")";return i+t.x+"px,"+t.y+"px"+o},getScaleString:function(t,e){var i=n.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t))),o=" scale("+t+") ";return i+o},setPosition:function(t,e,i){t._leaflet_pos=e,!i&&n.Browser.any3d?(t.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(e),n.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden")):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},n.DomUtil.TRANSFORM=n.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),n.DomUtil.TRANSITION=n.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),n.DomUtil.TRANSITION_END="webkitTransition"===n.DomUtil.TRANSITION||"OTransition"===n.DomUtil.TRANSITION?n.DomUtil.TRANSITION+"End":"transitionend",n.LatLng=function(t,e){var i=parseFloat(t),n=parseFloat(e);if(isNaN(i)||isNaN(n))throw Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=i,this.lng=n},n.extend(n.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),n.LatLng.prototype={equals:function(t){if(!t)return!1;t=n.latLng(t);var e=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n.LatLng.MAX_MARGIN>=e},toString:function(t){return"LatLng("+n.Util.formatNum(this.lat,t)+", "+n.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=n.latLng(t);var e=6378137,i=n.LatLng.DEG_TO_RAD,o=(t.lat-this.lat)*i,s=(t.lng-this.lng)*i,a=this.lat*i,r=t.lat*i,h=Math.sin(o/2),l=Math.sin(s/2),d=h*h+l*l*Math.cos(a)*Math.cos(r);return 2*e*Math.atan2(Math.sqrt(d),Math.sqrt(1-d))},wrap:function(t,e){var i=this.lng;return t=t||-180,e=e||180,i=(i+e)%(e-t)+(t>i||i===e?e:t),new n.LatLng(this.lat,i)}},n.latLng=function(t,e){return t instanceof n.LatLng?t:n.Util.isArray(t)?new n.LatLng(t[0],t[1]):isNaN(t)?t:new n.LatLng(t,e)},n.LatLngBounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;o>n;n++)this.extend(i[n])},n.LatLngBounds.prototype={extend:function(t){return t="number"==typeof t[0]||"string"==typeof t[0]||t instanceof n.LatLng?n.latLng(t):n.latLngBounds(t),t instanceof n.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new n.LatLng(t.lat,t.lng),this._northEast=new n.LatLng(t.lat,t.lng)):t instanceof n.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this},pad:function(t){var e=this._southWest,i=this._northEast,o=Math.abs(e.lat-i.lat)*t,s=Math.abs(e.lng-i.lng)*t;return new n.LatLngBounds(new n.LatLng(e.lat-o,e.lng-s),new n.LatLng(i.lat+o,i.lng+s))},getCenter:function(){return new n.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new n.LatLng(this._northEast.lat,this._southWest.lng)},getSouthEast:function(){return new n.LatLng(this._southWest.lat,this._northEast.lng)},contains:function(t){t="number"==typeof t[0]||t instanceof n.LatLng?n.latLng(t):n.latLngBounds(t);var e,i,o=this._southWest,s=this._northEast;return t instanceof n.LatLngBounds?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=o.lat&&i.lat<=s.lat&&e.lng>=o.lng&&i.lng<=s.lng},intersects:function(t){t=n.latLngBounds(t);var e=this._southWest,i=this._northEast,o=t.getSouthWest(),s=t.getNorthEast(),a=s.lat>=e.lat&&o.lat<=i.lat,r=s.lng>=e.lng&&o.lng<=i.lng;return a&&r},toBBoxString:function(){var t=this._southWest,e=this._northEast;return[t.lng,t.lat,e.lng,e.lat].join(",")},equals:function(t){return t?(t=n.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},n.latLngBounds=function(t,e){return!t||t instanceof n.LatLngBounds?t:new n.LatLngBounds(t,e)},n.Projection={},n.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=n.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,o=Math.max(Math.min(i,t.lat),-i),s=t.lng*e,a=o*e;return a=Math.log(Math.tan(Math.PI/4+a/2)),new n.Point(s,a)},unproject:function(t){var e=n.LatLng.RAD_TO_DEG,i=t.x*e,o=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new n.LatLng(o,i)}},n.Projection.LonLat={project:function(t){return new n.Point(t.lng,t.lat)},unproject:function(t){return new n.LatLng(t.y,t.x)}},n.CRS={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)}},n.CRS.Simple=n.extend({},n.CRS,{projection:n.Projection.LonLat,transformation:new n.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)}}),n.CRS.EPSG3857=n.extend({},n.CRS,{code:"EPSG:3857",projection:n.Projection.SphericalMercator,transformation:new n.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){var e=this.projection.project(t),i=6378137;return e.multiplyBy(i)}}),n.CRS.EPSG900913=n.extend({},n.CRS.EPSG3857,{code:"EPSG:900913"}),n.CRS.EPSG4326=n.extend({},n.CRS,{code:"EPSG:4326",projection:n.Projection.LonLat,transformation:new n.Transformation(1/360,.5,-1/360,.5)}),n.Map=n.Class.extend({includes:n.Mixin.Events,options:{crs:n.CRS.EPSG3857,fadeAnimation:n.DomUtil.TRANSITION&&!n.Browser.android23,trackResize:!0,markerZoomAnimation:n.DomUtil.TRANSITION&&n.Browser.any3d},initialize:function(t,e){e=n.setOptions(this,e),this._initContainer(t),this._initLayout(),this.callInitHooks(),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&e.zoom!==i&&this.setView(n.latLng(e.center),e.zoom,!0),this._initLayers(e.layers)},setView:function(t,e){return this._resetView(n.latLng(t),this._limitZoom(e)),this},setZoom:function(t){return this.setView(this.getCenter(),t)},zoomIn:function(t){return this.setZoom(this._zoom+(t||1))},zoomOut:function(t){return this.setZoom(this._zoom-(t||1))},fitBounds:function(t){var e=this.getBoundsZoom(t);return this.setView(n.latLngBounds(t).getCenter(),e)},fitWorld:function(){var t=new n.LatLng(-60,-170),e=new n.LatLng(85,179);return this.fitBounds(new n.LatLngBounds(t,e))},panTo:function(t){return this.setView(t,this._zoom)},panBy:function(t){return this.fire("movestart"),this._rawPanBy(n.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){if(t=n.latLngBounds(t),this.options.maxBounds=t,!t)return this._boundsMinZoom=null,this;var e=this.getBoundsZoom(t,!0);return this._boundsMinZoom=e,this._loaded&&(e>this._zoom?this.setView(t.getCenter(),e):this.panInsideBounds(t)),this},panInsideBounds:function(t){t=n.latLngBounds(t);var e=this.getBounds(),i=this.project(e.getSouthWest()),o=this.project(e.getNorthEast()),s=this.project(t.getSouthWest()),a=this.project(t.getNorthEast()),r=0,h=0;return o.y<a.y&&(h=a.y-o.y),o.x>a.x&&(r=a.x-o.x),i.y>s.y&&(h=s.y-i.y),i.x<s.x&&(r=s.x-i.x),this.panBy(new n.Point(r,h,!0))},addLayer:function(t){var e=n.stamp(t);return this._layers[e]?this:(this._layers[e]=t,!t.options||isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[e]=t,this._updateZoomLevels()),this.options.zoomAnimation&&n.TileLayer&&t instanceof n.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this)),this.whenReady(function(){t.onAdd(this),this.fire("layeradd",{layer:t})},this),this)},removeLayer:function(t){var e=n.stamp(t);return this._layers[e]?(t.onRemove(this),delete this._layers[e],this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels()),this.options.zoomAnimation&&n.TileLayer&&t instanceof n.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this)),this.fire("layerremove",{layer:t})):void 0},hasLayer:function(t){var e=n.stamp(t);return this._layers.hasOwnProperty(e)},invalidateSize:function(t){var e=this.getSize();if(this._sizeChanged=!0,this.options.maxBounds&&this.setMaxBounds(this.options.maxBounds),!this._loaded)return this;var i=e._subtract(this.getSize())._divideBy(2)._round();return t===!0?this.panBy(i):(this._rawPanBy(i),this.fire("move"),clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(n.bind(this.fire,this,"moveend"),200)),this},addHandler:function(t,e){return e?(this[t]=new e(this),this.options[t]&&this[t].enable(),this):i},getCenter:function(){return this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new n.LatLngBounds(e,i)},getMinZoom:function(){var t=this.options.minZoom||0,e=this._layersMinZoom||0,i=this._boundsMinZoom||0;return Math.max(t,e,i)},getMaxZoom:function(){var t=this.options.maxZoom===i?1/0:this.options.maxZoom,e=this._layersMaxZoom===i?1/0:this._layersMaxZoom;return Math.min(t,e)},getBoundsZoom:function(t,e){t=n.latLngBounds(t);var i,o,s,a=this.getSize(),r=this.options.minZoom||0,h=this.getMaxZoom(),l=t.getNorthEast(),d=t.getSouthWest(),c=!0;e&&r--;do r++,o=this.project(l,r),s=this.project(d,r),i=new n.Point(Math.abs(o.x-s.x),Math.abs(s.y-o.y)),c=e?i.x<a.x||i.y<a.y:i.x<=a.x&&i.y<=a.y;while(c&&h>=r);return c&&e?null:e?r:r-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new n.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new n.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){return e=e===i?this._zoom:e,this.options.crs.latLngToPoint(n.latLng(t),e)},unproject:function(t,e){return e=e===i?this._zoom:e,this.options.crs.pointToLatLng(n.point(t),e)},layerPointToLatLng:function(t){var e=n.point(t).add(this._initialTopLeftPoint);return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(n.latLng(t))._round();return e._subtract(this._initialTopLeftPoint)},containerPointToLayerPoint:function(t){return n.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return n.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(n.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(n.latLng(t)))},mouseEventToContainerPoint:function(t){return n.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=n.DomUtil.get(t);if(e._leaflet)throw Error("Map container is already initialized.");e._leaflet=!0},_initLayout:function(){var t=this._container;n.DomUtil.addClass(t,"leaflet-container"),n.Browser.touch&&n.DomUtil.addClass(t,"leaflet-touch"),this.options.fadeAnimation&&n.DomUtil.addClass(t,"leaflet-fade-anim");var e=n.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";this.options.markerZoomAnimation||(n.DomUtil.addClass(t.markerPane,e),n.DomUtil.addClass(t.shadowPane,e),n.DomUtil.addClass(t.popupPane,e))},_createPane:function(t,e){return n.DomUtil.create("div",t,e||this._panes.objectsPane)},_initLayers:function(t){t=t?n.Util.isArray(t)?t:[t]:[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0;var e,i;for(e=0,i=t.length;i>e;e++)this.addLayer(t[e])},_resetView:function(t,e,i,o){var s=this._zoom!==e;o||(this.fire("movestart"),s&&this.fire("zoomstart")),this._zoom=e,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),i?this._initialTopLeftPoint._add(this._getMapPanePos()):n.DomUtil.setPosition(this._mapPane,new n.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var a=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!i}),this.fire("move"),(s||o)&&this.fire("zoomend"),this.fire("moveend",{hard:!i}),a&&this.fire("load")},_rawPanBy:function(t){n.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_updateZoomLevels:function(){var t,e=1/0,n=-1/0;for(t in this._zoomBoundLayers)if(this._zoomBoundLayers.hasOwnProperty(t)){var o=this._zoomBoundLayers[t];isNaN(o.options.minZoom)||(e=Math.min(e,o.options.minZoom)),isNaN(o.options.maxZoom)||(n=Math.max(n,o.options.maxZoom))}t===i?this._layersMaxZoom=this._layersMinZoom=i:(this._layersMaxZoom=n,this._layersMinZoom=e)},_initEvents:function(){if(n.DomEvent){n.DomEvent.on(this._container,"click",this._onMouseClick,this);var e,i,o=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(e=0,i=o.length;i>e;e++)n.DomEvent.on(this._container,o[e],this._fireMouseEvent,this);this.options.trackResize&&n.DomEvent.on(t,"resize",this._onResize,this)}},_onResize:function(){n.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=n.Util.requestAnimFrame(this.invalidateSize,this,!1,this._container)},_onMouseClick:function(t){!this._loaded||this.dragging&&this.dragging.moved()||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded){var e=t.type;if(e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)){"contextmenu"===e&&n.DomEvent.preventDefault(t);var i=this.mouseEventToContainerPoint(t),o=this.containerPointToLayerPoint(i),s=this.layerPointToLatLng(o);this.fire(e,{latlng:s,layerPoint:o,containerPoint:i,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this._tileBg&&(clearTimeout(this._clearTileBgTimer),this._clearTileBgTimer=setTimeout(n.bind(this._clearTileBg,this),500))},whenReady:function(t,e){return this._loaded?t.call(e||this,this):this.on("load",t,e),this},_getMapPanePos:function(){return n.DomUtil.getPosition(this._mapPane)},_getTopLeftPoint:function(){if(!this._loaded)throw Error("Set map center and zoom first.");return this._initialTopLeftPoint.subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewTopLeftPoint(i,e).add(this._getMapPanePos());return this.project(t,e)._subtract(n)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom();return Math.max(e,Math.min(i,t))}}),n.map=function(t,e){return new n.Map(t,e)},n.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.3142,R_MAJOR:6378137,project:function(t){var e=n.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,o=Math.max(Math.min(i,t.lat),-i),s=this.R_MAJOR,a=this.R_MINOR,r=t.lng*e*s,h=o*e,l=a/s,d=Math.sqrt(1-l*l),c=d*Math.sin(h);c=Math.pow((1-c)/(1+c),.5*d);var u=Math.tan(.5*(.5*Math.PI-h))/c;return h=-a*Math.log(u),new n.Point(r,h)},unproject:function(t){for(var e,i=n.LatLng.RAD_TO_DEG,o=this.R_MAJOR,s=this.R_MINOR,a=t.x*i/o,r=s/o,h=Math.sqrt(1-r*r),l=Math.exp(-t.y/s),d=Math.PI/2-2*Math.atan(l),c=15,u=1e-7,p=c,g=.1;Math.abs(g)>u&&--p>0;)e=h*Math.sin(d),g=Math.PI/2-2*Math.atan(l*Math.pow((1-e)/(1+e),.5*h))-d,d+=g;return new n.LatLng(d*i,a)}},n.CRS.EPSG3395=n.extend({},n.CRS,{code:"EPSG:3395",projection:n.Projection.Mercator,transformation:function(){var t=n.Projection.Mercator,e=t.R_MAJOR,i=t.R_MINOR;return new n.Transformation(.5/(Math.PI*e),.5,-.5/(Math.PI*i),.5)}()}),n.TileLayer=n.Class.extend({includes:n.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:n.Browser.mobile,updateWhenIdle:n.Browser.mobile},initialize:function(t,e){e=n.setOptions(this,e),e.detectRetina&&n.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,e.minZoom>0&&e.minZoom--,this.options.maxZoom--),this._url=t;var i=this.options.subdomains;"string"==typeof i&&(this.options.subdomains=i.split(""))},onAdd:function(t){this._map=t,this._initContainer(),this._createTileProto(),t.on({viewreset:this._resetCallback,moveend:this._update},this),this.options.updateWhenIdle||(this._limitedUpdate=n.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._container.parentNode.removeChild(this._container),t.off({viewreset:this._resetCallback,moveend:this._update},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){return this._map&&(this._map._panes.tilePane.empty=!1,this._reset(!0),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==i&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,e){var i,n,o,s=t.children,a=-e(1/0,-1/0);for(n=0,o=s.length;o>n;n++)s[n]!==this._container&&(i=parseInt(s[n].style.zIndex,10),isNaN(i)||(a=e(a,i)));this.options.zIndex=this._container.style.zIndex=(isFinite(a)?a:0)+e(1,-1)},_updateOpacity:function(){n.DomUtil.setOpacity(this._container,this.options.opacity);var t,e=this._tiles;if(n.Browser.webkit)for(t in e)e.hasOwnProperty(t)&&(e[t].style.webkitTransform+=" translate(0,0)")},_initContainer:function(){var t=this._map._panes.tilePane;(!this._container||t.empty)&&(this._container=n.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),t.appendChild(this._container),1>this.options.opacity&&this._updateOpacity())},_resetCallback:function(t){this._reset(t.hard)},_reset:function(t){var e=this._tiles;for(var i in e)e.hasOwnProperty(i)&&this.fire("tileunload",{tile:e[i]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),t&&this._container&&(this._container.innerHTML=""),this._initContainer()},_update:function(){if(this._map){var t=this._map.getPixelBounds(),e=this._map.getZoom(),i=this.options.tileSize;if(!(e>this.options.maxZoom||this.options.minZoom>e)){var o=new n.Point(Math.floor(t.min.x/i),Math.floor(t.min.y/i)),s=new n.Point(Math.floor(t.max.x/i),Math.floor(t.max.y/i)),a=new n.Bounds(o,s);this._addTilesFromCenterOut(a),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(a)}}},_addTilesFromCenterOut:function(t){var i,o,s,a=[],r=t.getCenter();for(i=t.min.y;t.max.y>=i;i++)for(o=t.min.x;t.max.x>=o;o++)s=new n.Point(o,i),this._tileShouldBeLoaded(s)&&a.push(s);var h=a.length;if(0!==h){a.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)});var l=e.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=h,o=0;h>o;o++)this._addTile(a[o],l);this._container.appendChild(l)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;if(!this.options.continuousWorld){var e=this._getWrapTileNum();if(this.options.noWrap&&(0>t.x||t.x>=e)||0>t.y||t.y>=e)return!1}return!0},_removeOtherTiles:function(t){var e,i,n,o;for(o in this._tiles)this._tiles.hasOwnProperty(o)&&(e=o.split(":"),i=parseInt(e[0],10),n=parseInt(e[1],10),(t.min.x>i||i>t.max.x||t.min.y>n||n>t.max.y)&&this._removeTile(o))},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src}),this.options.reuseTiles?(n.DomUtil.removeClass(e,"leaflet-tile-loaded"),this._unusedTiles.push(e)):e.parentNode===this._container&&this._container.removeChild(e),n.Browser.android||(e.src=n.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,e){var i=this._getTilePos(t),o=this._getTile();n.DomUtil.setPosition(o,i,n.Browser.chrome||n.Browser.android23),this._tiles[t.x+":"+t.y]=o,this._loadTile(o,t),o.parentNode!==this._container&&e.appendChild(o)
},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+t.zoomOffset},_getTilePos:function(t){var e=this._map.getPixelOrigin(),i=this.options.tileSize;return t.multiplyBy(i).subtract(e)},getTileUrl:function(t){return this._adjustTilePoint(t),n.Util.template(this._url,n.extend({s:this._getSubdomain(t),z:this._getZoomForUrl(),x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){return Math.pow(2,this._getZoomForUrl())},_adjustTilePoint:function(t){var e=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(t.x=(t.x%e+e)%e),this.options.tms&&(t.y=e-t.y-1)},_getSubdomain:function(t){var e=(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_createTileProto:function(){var t=this._tileImg=n.DomUtil.create("img","leaflet-tile");t.style.width=t.style.height=this.options.tileSize+"px",t.galleryimg="no"},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=this._tileImg.cloneNode(!1);return t.onselectstart=t.onmousemove=n.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,t.src=this.getTileUrl(e)},_tileLoaded:function(){this._tilesToLoad--,this._tilesToLoad||this.fire("load")},_tileOnLoad:function(){var t=this._layer;this.src!==n.Util.emptyImageUrl&&(n.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),n.tileLayer=function(t,e){return new n.TileLayer(t,e)},n.TileLayer.WMS=n.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,e){this._url=t;var i=n.extend({},this.defaultWmsParams);i.width=i.height=e.detectRetina&&n.Browser.retina?2*this.options.tileSize:this.options.tileSize;for(var o in e)this.options.hasOwnProperty(o)||(i[o]=e[o]);this.wmsParams=i,n.setOptions(this,e)},onAdd:function(t){var e=parseFloat(this.wmsParams.version)>=1.3?"crs":"srs";this.wmsParams[e]=t.options.crs.code,n.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t,e){this._adjustTilePoint(t);var i=this._map,o=i.options.crs,s=this.options.tileSize,a=t.multiplyBy(s),r=a.add(new n.Point(s,s)),h=o.project(i.unproject(a,e)),l=o.project(i.unproject(r,e)),d=[h.x,l.y,l.x,h.y].join(","),c=n.Util.template(this._url,{s:this._getSubdomain(t)});return c+n.Util.getParamString(this.wmsParams,c)+"&bbox="+d},setParams:function(t,e){return n.extend(this.wmsParams,t),e||this.redraw(),this}}),n.tileLayer.wms=function(t,e){return new n.TileLayer.WMS(t,e)},n.TileLayer.Canvas=n.TileLayer.extend({options:{async:!1},initialize:function(t){n.setOptions(this,t)},redraw:function(){var t=this._tiles;for(var e in t)t.hasOwnProperty(e)&&this._redrawTile(t[e])},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTileProto:function(){var t=this._canvasProto=n.DomUtil.create("canvas","leaflet-tile");t.width=t.height=this.options.tileSize},_createTile:function(){var t=this._canvasProto.cloneNode(!1);return t.onselectstart=t.onmousemove=n.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t._tilePoint=e,this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),n.tileLayer.canvas=function(t){return new n.TileLayer.Canvas(t)},n.ImageOverlay=n.Class.extend({includes:n.Mixin.Events,options:{opacity:1},initialize:function(t,e,i){this._url=t,this._bounds=n.latLngBounds(e),n.setOptions(this,i)},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&n.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},_initImage:function(){this._image=n.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&n.Browser.any3d?n.DomUtil.addClass(this._image,"leaflet-zoom-animated"):n.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),n.extend(this._image,{galleryimg:"no",onselectstart:n.Util.falseFn,onmousemove:n.Util.falseFn,onload:n.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,i=this._image,o=e.getZoomScale(t.zoom),s=this._bounds.getNorthWest(),a=this._bounds.getSouthEast(),r=e._latLngToNewLayerPoint(s,t.zoom,t.center),h=e._latLngToNewLayerPoint(a,t.zoom,t.center)._subtract(r),l=r._add(h._multiplyBy(.5*(1-1/o)));i.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(l)+" scale("+o+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),i=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);n.DomUtil.setPosition(t,e),t.style.width=i.x+"px",t.style.height=i.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){n.DomUtil.setOpacity(this._image,this.options.opacity)}}),n.imageOverlay=function(t,e,i){return new n.ImageOverlay(t,e,i)},n.Icon=n.Class.extend({options:{className:""},initialize:function(t){n.setOptions(this,t)},createIcon:function(){return this._createIcon("icon")},createShadow:function(){return this._createIcon("shadow")},_createIcon:function(t){var e=this._getIconUrl(t);if(!e){if("icon"===t)throw Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(e);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var i,o=this.options,s=n.point(o[e+"Size"]);i="shadow"===e?n.point(o.shadowAnchor||o.iconAnchor):n.point(o.iconAnchor),!i&&s&&(i=s.divideBy(2,!0)),t.className="leaflet-marker-"+e+" "+o.className,i&&(t.style.marginLeft=-i.x+"px",t.style.marginTop=-i.y+"px"),s&&(t.style.width=s.x+"px",t.style.height=s.y+"px")},_createImg:function(t){var i;return n.Browser.ie6?(i=e.createElement("div"),i.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+t+'")'):(i=e.createElement("img"),i.src=t),i},_getIconUrl:function(t){return n.Browser.retina&&this.options[t+"RetinaUrl"]?this.options[t+"RetinaUrl"]:this.options[t+"Url"]}}),n.icon=function(t){return new n.Icon(t)},n.Icon.Default=n.Icon.extend({options:{iconSize:new n.Point(25,41),iconAnchor:new n.Point(12,41),popupAnchor:new n.Point(1,-34),shadowSize:new n.Point(41,41)},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];n.Browser.retina&&"icon"===t&&(t+="@2x");var i=n.Icon.Default.imagePath;if(!i)throw Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return i+"/marker-"+t+".png"}}),n.Icon.Default.imagePath=function(){var t,i,n,o,s=e.getElementsByTagName("script"),a=/\/?leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,i=s.length;i>t;t++)if(n=s[t].src,o=n.match(a))return n.split(a)[0]+"/images"}(),n.Marker=n.Class.extend({includes:n.Mixin.Events,options:{icon:new n.Icon.Default,title:"",clickable:!0,draggable:!1,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,e){n.setOptions(this,e),this._latlng=n.latLng(t)},onAdd:function(t){this._map=t,t.on("viewreset",this.update,this),this._initIcon(),this.update(),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._removeIcon(),this.fire("remove"),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=n.latLng(t),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update(),this},setIcon:function(t){return this._map&&this._removeIcon(),this.options.icon=t,this._map&&(this._initIcon(),this.update()),this},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e=this._map,i=e.options.zoomAnimation&&e.options.markerZoomAnimation,o=i?"leaflet-zoom-animated":"leaflet-zoom-hide",s=!1;this._icon||(this._icon=t.icon.createIcon(),t.title&&(this._icon.title=t.title),this._initInteraction(),s=1>this.options.opacity,n.DomUtil.addClass(this._icon,o),t.riseOnHover&&n.DomEvent.on(this._icon,"mouseover",this._bringToFront,this).on(this._icon,"mouseout",this._resetZIndex,this)),this._shadow||(this._shadow=t.icon.createShadow(),this._shadow&&(n.DomUtil.addClass(this._shadow,o),s=1>this.options.opacity)),s&&this._updateOpacity();var a=this._map._panes;a.markerPane.appendChild(this._icon),this._shadow&&a.shadowPane.appendChild(this._shadow)},_removeIcon:function(){var t=this._map._panes;this.options.riseOnHover&&n.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),t.markerPane.removeChild(this._icon),this._shadow&&t.shadowPane.removeChild(this._shadow),this._icon=this._shadow=null},_setPos:function(t){n.DomUtil.setPosition(this._icon,t),this._shadow&&n.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPos(e)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];n.DomUtil.addClass(t,"leaflet-clickable"),n.DomEvent.on(t,"click",this._onMouseClick,this);for(var i=0;e.length>i;i++)n.DomEvent.on(t,e[i],this._fireMouseEvent,this);n.Handler.MarkerDrag&&(this.dragging=new n.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){var e=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)||e)&&n.DomEvent.stopPropagation(t),e||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(t.type,{originalEvent:t})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&n.DomEvent.preventDefault(t),"mousedown"!==t.type&&n.DomEvent.stopPropagation(t)},setOpacity:function(t){this.options.opacity=t,this._map&&this._updateOpacity()},_updateOpacity:function(){n.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&n.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),n.marker=function(t,e){return new n.Marker(t,e)},n.DivIcon=n.Icon.extend({options:{iconSize:new n.Point(12,12),className:"leaflet-div-icon"},createIcon:function(){var t=e.createElement("div"),i=this.options;return i.html&&(t.innerHTML=i.html),i.bgPos&&(t.style.backgroundPosition=-i.bgPos.x+"px "+-i.bgPos.y+"px"),this._setIconStyles(t,"icon"),t},createShadow:function(){return null}}),n.divIcon=function(t){return new n.DivIcon(t)},n.Map.mergeOptions({closePopupOnClick:!0}),n.Popup=n.Class.extend({includes:n.Mixin.Events,options:{minWidth:50,maxWidth:300,maxHeight:null,autoPan:!0,closeButton:!0,offset:new n.Point(0,6),autoPanPadding:new n.Point(5,5),className:"",zoomAnimation:!0},initialize:function(t,e){n.setOptions(this,t),this._source=e,this._animated=n.Browser.any3d&&this.options.zoomAnimation},onAdd:function(t){this._map=t,this._container||this._initLayout(),this._updateContent();var e=t.options.fadeAnimation;e&&n.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on("viewreset",this._updatePosition,this),this._animated&&t.on("zoomanim",this._zoomAnimation,this),t.options.closePopupOnClick&&t.on("preclick",this._close,this),this._update(),e&&n.DomUtil.setOpacity(this._container,1)},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),n.Util.falseFn(this._container.offsetWidth),t.off({viewreset:this._updatePosition,preclick:this._close,zoomanim:this._zoomAnimation},this),t.options.fadeAnimation&&n.DomUtil.setOpacity(this._container,0),this._map=null},setLatLng:function(t){return this._latlng=n.latLng(t),this._update(),this},setContent:function(t){return this._content=t,this._update(),this},_close:function(){var t=this._map;t&&(t._popup=null,t.removeLayer(this).fire("popupclose",{popup:this}))},_initLayout:function(){var t,e="leaflet-popup",i=e+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),o=this._container=n.DomUtil.create("div",i);this.options.closeButton&&(t=this._closeButton=n.DomUtil.create("a",e+"-close-button",o),t.href="#close",t.innerHTML="&#215;",n.DomEvent.on(t,"click",this._onCloseButtonClick,this));var s=this._wrapper=n.DomUtil.create("div",e+"-content-wrapper",o);n.DomEvent.disableClickPropagation(s),this._contentNode=n.DomUtil.create("div",e+"-content",s),n.DomEvent.on(this._contentNode,"mousewheel",n.DomEvent.stopPropagation),this._tipContainer=n.DomUtil.create("div",e+"-tip-container",o),this._tip=n.DomUtil.create("div",e+"-tip",this._tipContainer)},_update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var o=t.offsetHeight,s=this.options.maxHeight,a="leaflet-popup-scrolled";s&&o>s?(e.height=s+"px",n.DomUtil.addClass(t,a)):n.DomUtil.removeClass(t,a),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,i=this.options.offset;e&&n.DomUtil.setPosition(this._container,t),this._containerBottom=-i.y-(e?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+i.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);n.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,i=this._containerWidth,o=new n.Point(this._containerLeft,-e-this._containerBottom);this._animated&&o._add(n.DomUtil.getPosition(this._container));var s=t.layerPointToContainerPoint(o),a=this.options.autoPanPadding,r=t.getSize(),h=0,l=0;0>s.x&&(h=s.x-a.x),s.x+i>r.x&&(h=s.x+i-r.x+a.x),0>s.y&&(l=s.y-a.y),s.y+e>r.y&&(l=s.y+e-r.y+a.y),(h||l)&&t.panBy(new n.Point(h,l))}},_onCloseButtonClick:function(t){this._close(),n.DomEvent.stop(t)}}),n.popup=function(t,e){return new n.Popup(t,e)},n.Marker.include({openPopup:function(){return this._popup&&this._map&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},bindPopup:function(t,e){var i=n.point(this.options.icon.options.popupAnchor)||new n.Point(0,0);return i=i.add(n.Popup.prototype.options.offset),e&&e.offset&&(i=i.add(e.offset)),e=n.extend({offset:i},e),this._popup||this.on("click",this.openPopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popup=new n.Popup(e,this).setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.openPopup).off("remove",this.closePopup).off("move",this._movePopup)),this},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),n.Map.include({openPopup:function(t){return this.closePopup(),this._popup=t,this.addLayer(t).fire("popupopen",{popup:this._popup})},closePopup:function(){return this._popup&&this._popup._close(),this}}),n.LayerGroup=n.Class.extend({initialize:function(t){this._layers={};var e,i;if(t)for(e=0,i=t.length;i>e;e++)this.addLayer(t[e])},addLayer:function(t){var e=n.stamp(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=n.stamp(t);return delete this._layers[e],this._map&&this._map.removeLayer(t),this},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)this._layers.hasOwnProperty(e)&&(i=this._layers[e],i[t]&&i[t].apply(i,n));return this},onAdd:function(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t),this._map=null},addTo:function(t){return t.addLayer(this),this},eachLayer:function(t,e){for(var i in this._layers)this._layers.hasOwnProperty(i)&&t.call(e,this._layers[i])},setZIndex:function(t){return this.invoke("setZIndex",t)}}),n.layerGroup=function(t){return new n.LayerGroup(t)},n.FeatureGroup=n.LayerGroup.extend({includes:n.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu"},addLayer:function(t){return this._layers[n.stamp(t)]?this:(t.on(n.FeatureGroup.EVENTS,this._propagateEvent,this),n.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return t.off(n.FeatureGroup.EVENTS,this._propagateEvent,this),n.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:t})},bindPopup:function(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke("bindPopup",t,e)},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new n.LatLngBounds;return this.eachLayer(function(e){t.extend(e instanceof n.Marker?e.getLatLng():e.getBounds())}),t},_propagateEvent:function(t){t.layer=t.target,t.target=this,this.fire(t.type,t)}}),n.featureGroup=function(t){return new n.FeatureGroup(t)},n.Path=n.Class.extend({includes:[n.Mixin.Events],statics:{CLIP_PADDING:n.Browser.mobile?Math.max(0,Math.min(.5,(1280/Math.max(t.innerWidth,t.innerHeight)-1)/2)):.5},options:{stroke:!0,color:"#0033ff",dashArray:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){n.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,n.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return n.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),n.Map.include({_updatePathViewport:function(){var t=n.Path.CLIP_PADDING,e=this.getSize(),i=n.DomUtil.getPosition(this._mapPane),o=i.multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),s=o.add(e.multiplyBy(1+2*t)._round());this._pathViewport=new n.Bounds(o,s)}}),n.Path.SVG_NS="http://www.w3.org/2000/svg",n.Browser.svg=!(!e.createElementNS||!e.createElementNS(n.Path.SVG_NS,"svg").createSVGRect),n.Path=n.Path.extend({statics:{SVG:n.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,e=this._container;return e&&t.lastChild!==e&&t.appendChild(e),this},bringToBack:function(){var t=this._map._pathRoot,e=this._container,i=t.firstChild;return e&&i!==e&&t.insertBefore(e,i),this},getPathString:function(){},_createElement:function(t){return e.createElementNS(n.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray")):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){(n.Browser.svg||!n.Browser.vml)&&this._path.setAttribute("class","leaflet-clickable"),n.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],e=0;t.length>e;e++)n.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(this.hasEventListeners(t.type)){var e=this._map,i=e.mouseEventToContainerPoint(t),o=e.containerPointToLayerPoint(i),s=e.layerPointToLatLng(o);this.fire(t.type,{latlng:s,layerPoint:o,containerPoint:i,originalEvent:t}),"contextmenu"===t.type&&n.DomEvent.preventDefault(t),"mousemove"!==t.type&&n.DomEvent.stopPropagation(t)}}}),n.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=n.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&n.Browser.any3d?(this._pathRoot.setAttribute("class"," leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):this._pathRoot.setAttribute("class"," leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),i=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(i)+" scale("+e+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max,o=i.x-e.x,s=i.y-e.y,a=this._pathRoot,r=this._panes.overlayPane;n.Browser.mobileWebkit&&r.removeChild(a),n.DomUtil.setPosition(a,e),a.setAttribute("width",o),a.setAttribute("height",s),a.setAttribute("viewBox",[e.x,e.y,o,s].join(" ")),n.Browser.mobileWebkit&&r.appendChild(a)}}}),n.Path.include({bindPopup:function(t,e){return(!this._popup||e)&&(this._popup=new n.Popup(e,this)),this._popup.setContent(t),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(t){return this._popup&&(t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:t})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),n.Browser.vml=!n.Browser.svg&&function(){try{var t=e.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&"object"==typeof i.adj}catch(n){return!1}}(),n.Path=n.Browser.svg||!n.Browser.vml?n.Path:n.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return e.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return e.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");n.DomUtil.addClass(t,"leaflet-vml-shape"),this.options.clickable&&n.DomUtil.addClass(t,"leaflet-clickable"),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,i=this.options,n=this._container;n.stroked=i.stroke,n.filled=i.fill,i.stroke?(t||(t=this._stroke=this._createElement("stroke"),t.endcap="round",n.appendChild(t)),t.weight=i.weight+"px",t.color=i.color,t.opacity=i.opacity,t.dashStyle=i.dashArray?i.dashArray instanceof Array?i.dashArray.join(" "):i.dashArray.replace(/ *, */g," "):""):t&&(n.removeChild(t),this._stroke=null),i.fill?(e||(e=this._fill=this._createElement("fill"),n.appendChild(e)),e.color=i.fillColor||i.color,e.opacity=i.fillOpacity):e&&(n.removeChild(e),this._fill=null)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),n.Map.include(n.Browser.svg||!n.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=e.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),n.Browser.canvas=function(){return!!e.createElement("canvas").getContext}(),n.Path=n.Path.SVG&&!t.L_PREFER_CANVAS||!n.Browser.canvas?n.Path:n.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return n.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&this._map.off("click",this._onClick,this),this._requestUpdate(),this._map=null},_requestUpdate:function(){this._map&&!n.Path._updateRequest&&(n.Path._updateRequest=n.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){n.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color)},_drawPath:function(){var t,e,i,o,s,a;for(this._ctx.beginPath(),t=0,i=this._parts.length;i>t;t++){for(e=0,o=this._parts[t].length;o>e;e++)s=this._parts[t][e],a=(0===e?"move":"line")+"To",this._ctx[a](s.x,s.y);this instanceof n.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(t.globalAlpha=e.fillOpacity,t.fill()),e.stroke&&(t.globalAlpha=e.opacity,t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&this._map.on("click",this._onClick,this)},_onClick:function(t){this._containsPoint(t.layerPoint)&&this.fire("click",{latlng:t.latlng,layerPoint:t.layerPoint,containerPoint:t.containerPoint,originalEvent:t})}}),n.Map.include(n.Path.SVG&&!t.L_PREFER_CANVAS||!n.Browser.canvas?{}:{_initPathRoot:function(){var t,i=this._pathRoot;i||(i=this._pathRoot=e.createElement("canvas"),i.style.position="absolute",t=this._canvasCtx=i.getContext("2d"),t.lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(i),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max.subtract(e),o=this._pathRoot;n.DomUtil.setPosition(o,e),o.width=i.x,o.height=i.y,o.getContext("2d").translate(-e.x,-e.y)}}}),n.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=this._reducePoints(t,i),t=this._simplifyDP(t,i)},pointToSegmentDistance:function(t,e,i){return Math.sqrt(this._sqClosestPointOnSegment(t,e,i,!0))},closestPointOnSegment:function(t,e,i){return this._sqClosestPointOnSegment(t,e,i)},_simplifyDP:function(t,e){var n=t.length,o=typeof Uint8Array!=i+""?Uint8Array:Array,s=new o(n);s[0]=s[n-1]=1,this._simplifyDPStep(t,s,e,0,n-1);var a,r=[];for(a=0;n>a;a++)s[a]&&r.push(t[a]);return r},_simplifyDPStep:function(t,e,i,n,o){var s,a,r,h=0;for(a=n+1;o-1>=a;a++)r=this._sqClosestPointOnSegment(t[a],t[n],t[o],!0),r>h&&(s=a,h=r);h>i&&(e[s]=1,this._simplifyDPStep(t,e,i,n,s),this._simplifyDPStep(t,e,i,s,o))},_reducePoints:function(t,e){for(var i=[t[0]],n=1,o=0,s=t.length;s>n;n++)this._sqDist(t[n],t[o])>e&&(i.push(t[n]),o=n);return s-1>o&&i.push(t[s-1]),i},clipSegment:function(t,e,i,n){var o,s,a,r=n?this._lastCode:this._getBitCode(t,i),h=this._getBitCode(e,i);for(this._lastCode=h;;){if(!(r|h))return[t,e];if(r&h)return!1;o=r||h,s=this._getEdgeIntersection(t,e,o,i),a=this._getBitCode(s,i),o===r?(t=s,r=a):(e=s,h=a)}},_getEdgeIntersection:function(t,e,o,s){var a=e.x-t.x,r=e.y-t.y,h=s.min,l=s.max;return 8&o?new n.Point(t.x+a*(l.y-t.y)/r,l.y):4&o?new n.Point(t.x+a*(h.y-t.y)/r,h.y):2&o?new n.Point(l.x,t.y+r*(l.x-t.x)/a):1&o?new n.Point(h.x,t.y+r*(h.x-t.x)/a):i},_getBitCode:function(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},_sqClosestPointOnSegment:function(t,e,i,o){var s,a=e.x,r=e.y,h=i.x-a,l=i.y-r,d=h*h+l*l;return d>0&&(s=((t.x-a)*h+(t.y-r)*l)/d,s>1?(a=i.x,r=i.y):s>0&&(a+=h*s,r+=l*s)),h=t.x-a,l=t.y-r,o?h*h+l*l:new n.Point(a,r)}},n.Polyline=n.Path.extend({initialize:function(t,e){n.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;e>t;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,e=this._parts.length,i="";e>t;t++)i+=this._getPathPartStr(this._parts[t]);return i},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(n.latLng(t)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs),this.redraw(),t},closestLayerPoint:function(t){for(var e,i,o=1/0,s=this._parts,a=null,r=0,h=s.length;h>r;r++)for(var l=s[r],d=1,c=l.length;c>d;d++){e=l[d-1],i=l[d];
var u=n.LineUtil._sqClosestPointOnSegment(t,e,i,!0);o>u&&(o=u,a=n.LineUtil._sqClosestPointOnSegment(t,e,i))}return a&&(a.distance=Math.sqrt(o)),a},getBounds:function(){var t,e,i=new n.LatLngBounds,o=this.getLatLngs();for(t=0,e=o.length;e>t;t++)i.extend(o[t]);return i},_convertLatLngs:function(t){var e,i;for(e=0,i=t.length;i>e;e++){if(n.Util.isArray(t[e])&&"number"!=typeof t[e][0])return;t[e]=n.latLng(t[e])}return t},_initEvents:function(){n.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var e,i=n.Path.VML,o=0,s=t.length,a="";s>o;o++)e=t[o],i&&e._round(),a+=(o?"L":"M")+e.x+" "+e.y;return a},_clipPoints:function(){var t,e,o,s=this._originalPoints,a=s.length;if(this.options.noClip)return this._parts=[s],i;this._parts=[];var r=this._parts,h=this._map._pathViewport,l=n.LineUtil;for(t=0,e=0;a-1>t;t++)o=l.clipSegment(s[t],s[t+1],h,t),o&&(r[e]=r[e]||[],r[e].push(o[0]),(o[1]!==s[t+1]||t===a-2)&&(r[e].push(o[1]),e++))},_simplifyPoints:function(){for(var t=this._parts,e=n.LineUtil,i=0,o=t.length;o>i;i++)t[i]=e.simplify(t[i],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),n.Path.prototype._updatePath.call(this))}}),n.polyline=function(t,e){return new n.Polyline(t,e)},n.PolyUtil={},n.PolyUtil.clipPolygon=function(t,e){var i,o,s,a,r,h,l,d,c,u=[1,4,2,8],p=n.LineUtil;for(o=0,l=t.length;l>o;o++)t[o]._code=p._getBitCode(t[o],e);for(a=0;4>a;a++){for(d=u[a],i=[],o=0,l=t.length,s=l-1;l>o;s=o++)r=t[o],h=t[s],r._code&d?h._code&d||(c=p._getEdgeIntersection(h,r,d,e),c._code=p._getBitCode(c,e),i.push(c)):(h._code&d&&(c=p._getEdgeIntersection(h,r,d,e),c._code=p._getBitCode(c,e),i.push(c)),i.push(r));t=i}return t},n.Polygon=n.Polyline.extend({options:{fill:!0},initialize:function(t,e){n.Polyline.prototype.initialize.call(this,t,e),t&&n.Util.isArray(t[0])&&"number"!=typeof t[0][0]&&(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1))},projectLatlngs:function(){if(n.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var t,e,i,o;for(t=0,i=this._holes.length;i>t;t++)for(this._holePoints[t]=[],e=0,o=this._holes[t].length;o>e;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])}},_clipPoints:function(){var t=this._originalPoints,e=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var i=0,o=this._parts.length;o>i;i++){var s=n.PolyUtil.clipPolygon(this._parts[i],this._map._pathViewport);s.length&&e.push(s)}this._parts=e}},_getPathPartStr:function(t){var e=n.Polyline.prototype._getPathPartStr.call(this,t);return e+(n.Browser.svg?"z":"x")}}),n.polygon=function(t,e){return new n.Polygon(t,e)},function(){function t(t){return n.FeatureGroup.extend({initialize:function(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngs:function(e){var i=0,n=e.length;for(this.eachLayer(function(t){n>i?t.setLatLngs(e[i++]):this.removeLayer(t)},this);n>i;)this.addLayer(new t(e[i++],this._options));return this}})}n.MultiPolyline=t(n.Polyline),n.MultiPolygon=t(n.Polygon),n.multiPolyline=function(t,e){return new n.MultiPolyline(t,e)},n.multiPolygon=function(t,e){return new n.MultiPolygon(t,e)}}(),n.Rectangle=n.Polygon.extend({initialize:function(t,e){n.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=n.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),n.rectangle=function(t,e){return new n.Rectangle(t,e)},n.Circle=n.Path.extend({initialize:function(t,e,i){n.Path.prototype.initialize.call(this,i),this._latlng=n.latLng(t),this._mRadius=e},options:{fill:!0},setLatLng:function(t){return this._latlng=n.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=new n.LatLng(this._latlng.lat,this._latlng.lng-t),i=this._map.latLngToLayerPoint(e);this._point=this._map.latLngToLayerPoint(this._latlng),this._radius=Math.max(Math.round(this._point.x-i.x),1)},getBounds:function(){var t=this._getLngRadius(),e=360*(this._mRadius/40075017),i=this._latlng,o=new n.LatLng(i.lat-e,i.lng-t),s=new n.LatLng(i.lat+e,i.lng+t);return new n.LatLngBounds(o,s)},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;return this._checkIfEmpty()?"":n.Browser.svg?"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z":(t._round(),e=Math.round(e),"AL "+t.x+","+t.y+" "+e+","+e+" 0,"+23592600)},getRadius:function(){return this._mRadius},_getLatRadius:function(){return 360*(this._mRadius/40075017)},_getLngRadius:function(){return this._getLatRadius()/Math.cos(n.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,i=this._point;return i.x-e>t.max.x||i.y-e>t.max.y||i.x+e<t.min.x||i.y+e<t.min.y}}),n.circle=function(t,e,i){return new n.Circle(t,e,i)},n.CircleMarker=n.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){n.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){n.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setRadius:function(t){return this._radius=t,this.redraw()}}),n.circleMarker=function(t,e){return new n.CircleMarker(t,e)},n.Polyline.include(n.Path.CANVAS?{_containsPoint:function(t,e){var i,o,s,a,r,h,l,d=this.options.weight/2;for(n.Browser.touch&&(d+=10),i=0,a=this._parts.length;a>i;i++)for(l=this._parts[i],o=0,r=l.length,s=r-1;r>o;s=o++)if((e||0!==o)&&(h=n.LineUtil.pointToSegmentDistance(t,l[s],l[o]),d>=h))return!0;return!1}}:{}),n.Polygon.include(n.Path.CANVAS?{_containsPoint:function(t){var e,i,o,s,a,r,h,l,d=!1;if(n.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(s=0,h=this._parts.length;h>s;s++)for(e=this._parts[s],a=0,l=e.length,r=l-1;l>a;r=a++)i=e[a],o=e[r],i.y>t.y!=o.y>t.y&&t.x<(o.x-i.x)*(t.y-i.y)/(o.y-i.y)+i.x&&(d=!d);return d}}:{}),n.Circle.include(n.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var e=this._point,i=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+i}}:{}),n.GeoJSON=n.FeatureGroup.extend({initialize:function(t,e){n.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,o=n.Util.isArray(t)?t:t.features;if(o){for(e=0,i=o.length;i>e;e++)(o[e].geometries||o[e].geometry)&&this.addData(o[e]);return this}var s=this.options;if(!s.filter||s.filter(t)){var a=n.GeoJSON.geometryToLayer(t,s.pointToLayer);return a.feature=t,a.defaultOptions=a.options,this.resetStyle(a),s.onEachFeature&&s.onEachFeature(t,a),this.addLayer(a)}},resetStyle:function(t){var e=this.options.style;e&&(n.Util.extend(t.options,t.defaultOptions),this._setLayerStyle(t,e))},setStyle:function(t){this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),n.extend(n.GeoJSON,{geometryToLayer:function(t,e){var i,o,s,a,r,h="Feature"===t.type?t.geometry:t,l=h.coordinates,d=[];switch(h.type){case"Point":return i=this.coordsToLatLng(l),e?e(t,i):new n.Marker(i);case"MultiPoint":for(s=0,a=l.length;a>s;s++)i=this.coordsToLatLng(l[s]),r=e?e(t,i):new n.Marker(i),d.push(r);return new n.FeatureGroup(d);case"LineString":return o=this.coordsToLatLngs(l),new n.Polyline(o);case"Polygon":return o=this.coordsToLatLngs(l,1),new n.Polygon(o);case"MultiLineString":return o=this.coordsToLatLngs(l,1),new n.MultiPolyline(o);case"MultiPolygon":return o=this.coordsToLatLngs(l,2),new n.MultiPolygon(o);case"GeometryCollection":for(s=0,a=h.geometries.length;a>s;s++)r=this.geometryToLayer({geometry:h.geometries[s],type:"Feature",properties:t.properties},e),d.push(r);return new n.FeatureGroup(d);default:throw Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t,e){var i=parseFloat(t[e?0:1]),o=parseFloat(t[e?1:0]);return new n.LatLng(i,o)},coordsToLatLngs:function(t,e,i){var n,o,s,a=[];for(o=0,s=t.length;s>o;o++)n=e?this.coordsToLatLngs(t[o],e-1,i):this.coordsToLatLng(t[o],i),a.push(n);return a}}),n.geoJson=function(t,e){return new n.GeoJSON(t,e)},n.DomEvent={addListener:function(t,e,o,s){var a,r,h,l=n.stamp(o),d="_leaflet_"+e+l;return t[d]?this:(a=function(e){return o.call(s||t,e||n.DomEvent._getEvent())},n.Browser.msTouch&&0===e.indexOf("touch")?this.addMsTouchListener(t,e,a,l):(n.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener&&this.addDoubleTapListener(t,a,l),"addEventListener"in t?"mousewheel"===e?(t.addEventListener("DOMMouseScroll",a,!1),t.addEventListener(e,a,!1)):"mouseenter"===e||"mouseleave"===e?(r=a,h="mouseenter"===e?"mouseover":"mouseout",a=function(e){return n.DomEvent._checkMouse(t,e)?r(e):i},t.addEventListener(h,a,!1)):t.addEventListener(e,a,!1):"attachEvent"in t&&t.attachEvent("on"+e,a),t[d]=a,this))},removeListener:function(t,e,i){var o=n.stamp(i),s="_leaflet_"+e+o,a=t[s];return a?(n.Browser.msTouch&&0===e.indexOf("touch")?this.removeMsTouchListener(t,e,o):n.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,o):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",a,!1),t.removeEventListener(e,a,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",a,!1):t.removeEventListener(e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a),t[s]=null,this):void 0},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this},disableClickPropagation:function(t){for(var e=n.DomEvent.stopPropagation,i=n.Draggable.START.length-1;i>=0;i--)n.DomEvent.addListener(t,n.Draggable.START[i],e);return n.DomEvent.addListener(t,"click",e).addListener(t,"dblclick",e)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return n.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,i){var o=e.body,s=e.documentElement,a=t.pageX?t.pageX:t.clientX+o.scrollLeft+s.scrollLeft,r=t.pageY?t.pageY:t.clientY+o.scrollTop+s.scrollTop,h=new n.Point(a,r);return i?h._subtract(n.DomUtil.getViewportOffset(i)):h},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_checkMouse:function(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(n){return!1}return i!==t},_getEvent:function(){var e=t.event;if(!e)for(var i=arguments.callee.caller;i&&(e=i.arguments[0],!e||t.Event!==e.constructor);)i=i.caller;return e}},n.DomEvent.on=n.DomEvent.addListener,n.DomEvent.off=n.DomEvent.removeListener,n.Draggable=n.Class.extend({includes:n.Mixin.Events,statics:{START:n.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",MSPointerDown:"touchmove"},TAP_TOLERANCE:15},initialize:function(t,e,i){this._element=t,this._dragStartTarget=e||t,this._longPress=i&&!n.Browser.msTouch},enable:function(){if(!this._enabled){for(var t=n.Draggable.START.length-1;t>=0;t--)n.DomEvent.on(this._dragStartTarget,n.Draggable.START[t],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var t=n.Draggable.START.length-1;t>=0;t--)n.DomEvent.off(this._dragStartTarget,n.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(t){if(!(!n.Browser.touch&&t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(n.DomEvent.preventDefault(t),n.DomEvent.stopPropagation(t),n.Draggable._disabled))){if(this._simulateClick=!0,t.touches&&t.touches.length>1)return this._simulateClick=!1,clearTimeout(this._longPressTimeout),i;var o=t.touches&&1===t.touches.length?t.touches[0]:t,s=o.target;n.Browser.touch&&"a"===s.tagName.toLowerCase()&&n.DomUtil.addClass(s,"leaflet-active"),this._moved=!1,this._moving||(this._startPoint=new n.Point(o.clientX,o.clientY),this._startPos=this._newPos=n.DomUtil.getPosition(this._element),t.touches&&1===t.touches.length&&n.Browser.touch&&this._longPress&&(this._longPressTimeout=setTimeout(n.bind(function(){var t=this._newPos&&this._newPos.distanceTo(this._startPos)||0;n.Draggable.TAP_TOLERANCE>t&&(this._simulateClick=!1,this._onUp(),this._simulateEvent("contextmenu",o))},this),1e3)),n.DomEvent.on(e,n.Draggable.MOVE[t.type],this._onMove,this),n.DomEvent.on(e,n.Draggable.END[t.type],this._onUp,this))}},_onMove:function(t){if(!(t.touches&&t.touches.length>1)){var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new n.Point(e.clientX,e.clientY),o=i.subtract(this._startPoint);(o.x||o.y)&&(n.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=n.DomUtil.getPosition(this._element).subtract(o),n.Browser.touch||(n.DomUtil.disableTextSelection(),this._setMovingCursor())),this._newPos=this._startPos.add(o),this._moving=!0,n.Util.cancelAnimFrame(this._animRequest),this._animRequest=n.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))}},_updatePosition:function(){this.fire("predrag"),n.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(t){var i;if(clearTimeout(this._longPressTimeout),this._simulateClick&&t.changedTouches){var o=t.changedTouches[0],s=o.target,a=this._newPos&&this._newPos.distanceTo(this._startPos)||0;"a"===s.tagName.toLowerCase()&&n.DomUtil.removeClass(s,"leaflet-active"),n.Draggable.TAP_TOLERANCE>a&&(i=o)}n.Browser.touch||(n.DomUtil.enableTextSelection(),this._restoreCursor());for(var r in n.Draggable.MOVE)n.Draggable.MOVE.hasOwnProperty(r)&&(n.DomEvent.off(e,n.Draggable.MOVE[r],this._onMove),n.DomEvent.off(e,n.Draggable.END[r],this._onUp));this._moved&&(n.Util.cancelAnimFrame(this._animRequest),this.fire("dragend")),this._moving=!1,i&&(this._moved=!1,this._simulateEvent("click",i))},_setMovingCursor:function(){n.DomUtil.addClass(e.body,"leaflet-dragging")},_restoreCursor:function(){n.DomUtil.removeClass(e.body,"leaflet-dragging")},_simulateEvent:function(i,n){var o=e.createEvent("MouseEvents");o.initMouseEvent(i,!0,!0,t,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(o)}}),n.Handler=n.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),n.Map.mergeOptions({dragging:!0,inertia:!n.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:n.Browser.touch?32:18,easeLinearity:.25,longPress:!0,worldCopyJump:!1}),n.Map.Drag=n.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new n.Draggable(t._mapPane,t._container,t.options.longPress),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),t.on("viewreset",this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t._panAnim&&t._panAnim.stop(),t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint(new n.LatLng(0,0));this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project(new n.LatLng(0,180)).x},_onPreDrag:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,s=(n+e+i)%t-e-i,a=Math.abs(o+i)<Math.abs(s+i)?o:s;this._draggable._newPos.x=a},_onDragEnd:function(){var t=this._map,e=t.options,i=+new Date-this._lastTime,o=!e.inertia||i>e.inertiaThreshold||!this._positions[0];if(o)t.fire("moveend");else{var s=this._lastPos.subtract(this._positions[0]),a=(this._lastTime+i-this._times[0])/1e3,r=e.easeLinearity,h=s.multiplyBy(r/a),l=h.distanceTo(new n.Point(0,0)),d=Math.min(e.inertiaMaxSpeed,l),c=h.multiplyBy(d/l),u=d/(e.inertiaDeceleration*r),p=c.multiplyBy(-u/2).round();n.Util.requestAnimFrame(function(){t.panBy(p,u,r)})}t.fire("dragend"),e.maxBounds&&n.Util.requestAnimFrame(this._panInsideMaxBounds,t,!0,t._container)},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)}}),n.Map.addInitHook("addHandler","dragging",n.Map.Drag),n.Map.mergeOptions({doubleClickZoom:!0}),n.Map.DoubleClickZoom=n.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick)},_onDoubleClick:function(t){this.setView(t.latlng,this._zoom+1)}}),n.Map.addInitHook("addHandler","doubleClickZoom",n.Map.DoubleClickZoom),n.Map.mergeOptions({scrollWheelZoom:!0}),n.Map.ScrollWheelZoom=n.Handler.extend({addHooks:function(){n.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){n.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll)},_onWheelScroll:function(t){var e=n.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(n.bind(this._performZoom,this),i),n.DomEvent.preventDefault(t),n.DomEvent.stopPropagation(t)},_performZoom:function(){var t=this._map,e=this._delta,i=t.getZoom();if(e=e>0?Math.ceil(e):Math.round(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(i+e)-i,this._delta=0,this._startTime=null,e){var n=i+e,o=this._getCenterForScrollWheelZoom(n);t.setView(o,n)}},_getCenterForScrollWheelZoom:function(t){var e=this._map,i=e.getZoomScale(t),n=e.getSize()._divideBy(2),o=this._lastMousePos._subtract(n)._multiplyBy(1-1/i),s=e._getTopLeftPoint()._add(n)._add(o);return e.unproject(s)}}),n.Map.addInitHook("addHandler","scrollWheelZoom",n.Map.ScrollWheelZoom),n.extend(n.DomEvent,{_touchstart:n.Browser.msTouch?"MSPointerDown":"touchstart",_touchend:n.Browser.msTouch?"MSPointerUp":"touchend",addDoubleTapListener:function(t,i,o){function s(t){var e;if(n.Browser.msTouch?(g.push(t.pointerId),e=g.length):e=t.touches.length,!(e>1)){var i=Date.now(),o=i-(r||i);h=t.touches?t.touches[0]:t,l=o>0&&d>=o,r=i}}function a(t){if(n.Browser.msTouch){var e=g.indexOf(t.pointerId);if(-1===e)return;g.splice(e,1)}if(l){if(n.Browser.msTouch){var o,s={};for(var a in h)o=h[a],s[a]="function"==typeof o?o.bind(h):o;h=s}h.type="dblclick",i(h),r=null}}var r,h,l=!1,d=250,c="_leaflet_",u=this._touchstart,p=this._touchend,g=[];t[c+u+o]=s,t[c+p+o]=a;var m=n.Browser.msTouch?e.documentElement:t;return t.addEventListener(u,s,!1),m.addEventListener(p,a,!1),n.Browser.msTouch&&m.addEventListener("MSPointerCancel",a,!1),this},removeDoubleTapListener:function(t,i){var o="_leaflet_";return t.removeEventListener(this._touchstart,t[o+this._touchstart+i],!1),(n.Browser.msTouch?e.documentElement:t).removeEventListener(this._touchend,t[o+this._touchend+i],!1),n.Browser.msTouch&&e.documentElement.removeEventListener("MSPointerCancel",t[o+this._touchend+i],!1),this}}),n.extend(n.DomEvent,{_msTouches:[],_msDocumentListener:!1,addMsTouchListener:function(t,e,i,n){switch(e){case"touchstart":return this.addMsTouchListenerStart(t,e,i,n);case"touchend":return this.addMsTouchListenerEnd(t,e,i,n);case"touchmove":return this.addMsTouchListenerMove(t,e,i,n);default:throw"Unknown touch event type"}},addMsTouchListenerStart:function(t,i,n,o){var s="_leaflet_",a=this._msTouches,r=function(t){for(var e=!1,i=0;a.length>i;i++)if(a[i].pointerId===t.pointerId){e=!0;break}e||a.push(t),t.touches=a.slice(),t.changedTouches=[t],n(t)};if(t[s+"touchstart"+o]=r,t.addEventListener("MSPointerDown",r,!1),!this._msDocumentListener){var h=function(t){for(var e=0;a.length>e;e++)if(a[e].pointerId===t.pointerId){a.splice(e,1);break}};e.documentElement.addEventListener("MSPointerUp",h,!1),e.documentElement.addEventListener("MSPointerCancel",h,!1),this._msDocumentListener=!0}return this},addMsTouchListenerMove:function(t,e,i,n){function o(t){if(t.pointerType!==t.MSPOINTER_TYPE_MOUSE||0!==t.buttons){for(var e=0;a.length>e;e++)if(a[e].pointerId===t.pointerId){a[e]=t;break}t.touches=a.slice(),t.changedTouches=[t],i(t)}}var s="_leaflet_",a=this._msTouches;return t[s+"touchmove"+n]=o,t.addEventListener("MSPointerMove",o,!1),this},addMsTouchListenerEnd:function(t,e,i,n){var o="_leaflet_",s=this._msTouches,a=function(t){for(var e=0;s.length>e;e++)if(s[e].pointerId===t.pointerId){s.splice(e,1);break}t.touches=s.slice(),t.changedTouches=[t],i(t)};return t[o+"touchend"+n]=a,t.addEventListener("MSPointerUp",a,!1),t.addEventListener("MSPointerCancel",a,!1),this},removeMsTouchListener:function(t,e,i){var n="_leaflet_",o=t[n+e+i];switch(e){case"touchstart":t.removeEventListener("MSPointerDown",o,!1);break;case"touchmove":t.removeEventListener("MSPointerMove",o,!1);break;case"touchend":t.removeEventListener("MSPointerUp",o,!1),t.removeEventListener("MSPointerCancel",o,!1)}return this}}),n.Map.mergeOptions({touchZoom:n.Browser.touch&&!n.Browser.android23}),n.Map.TouchZoom=n.Handler.extend({addHooks:function(){n.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){n.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(t.touches&&2===t.touches.length&&!i._animatingZoom&&!this._zooming){var o=i.mouseEventToLayerPoint(t.touches[0]),s=i.mouseEventToLayerPoint(t.touches[1]),a=i._getCenterLayerPoint();this._startCenter=o.add(s)._divideBy(2),this._startDist=o.distanceTo(s),this._moved=!1,this._zooming=!0,this._centerOffset=a.subtract(this._startCenter),i._panAnim&&i._panAnim.stop(),n.DomEvent.on(e,"touchmove",this._onTouchMove,this).on(e,"touchend",this._onTouchEnd,this),n.DomEvent.preventDefault(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length){var e=this._map,i=e.mouseEventToLayerPoint(t.touches[0]),o=e.mouseEventToLayerPoint(t.touches[1]);this._scale=i.distanceTo(o)/this._startDist,this._delta=i._add(o)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(this._moved||(n.DomUtil.addClass(e._mapPane,"leaflet-zoom-anim leaflet-touching"),e.fire("movestart").fire("zoomstart")._prepareTileBg(),this._moved=!0),n.Util.cancelAnimFrame(this._animRequest),this._animRequest=n.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),n.DomEvent.preventDefault(t))}},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),i=t.layerPointToLatLng(e);t.fire("zoomanim",{center:i,zoom:t.getScaleZoom(this._scale)}),t._tileBg.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(this._delta)+" "+n.DomUtil.getScaleString(this._scale,this._startCenter)},_onTouchEnd:function(){if(this._moved&&this._zooming){var t=this._map;this._zooming=!1,n.DomUtil.removeClass(t._mapPane,"leaflet-touching"),n.DomEvent.off(e,"touchmove",this._onTouchMove).off(e,"touchend",this._onTouchEnd);var i=this._getScaleOrigin(),o=t.layerPointToLatLng(i),s=t.getZoom(),a=t.getScaleZoom(this._scale)-s,r=a>0?Math.ceil(a):Math.floor(a),h=t._limitZoom(s+r);t.fire("zoomanim",{center:o,zoom:h}),t._runAnimation(o,h,t.getZoomScale(h)/this._scale,i,!0)}},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),n.Map.addInitHook("addHandler","touchZoom",n.Map.TouchZoom),n.Map.mergeOptions({boxZoom:!0}),n.Map.BoxZoom=n.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){n.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){n.DomEvent.off(this._container,"mousedown",this._onMouseDown)},_onMouseDown:function(t){return!t.shiftKey||1!==t.which&&1!==t.button?!1:(n.DomUtil.disableTextSelection(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),this._box=n.DomUtil.create("div","leaflet-zoom-box",this._pane),n.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",n.DomEvent.on(e,"mousemove",this._onMouseMove,this).on(e,"mouseup",this._onMouseUp,this).preventDefault(t),this._map.fire("boxzoomstart"),i)},_onMouseMove:function(t){var e=this._startLayerPoint,i=this._box,o=this._map.mouseEventToLayerPoint(t),s=o.subtract(e),a=new n.Point(Math.min(o.x,e.x),Math.min(o.y,e.y));n.DomUtil.setPosition(i,a),i.style.width=Math.max(0,Math.abs(s.x)-4)+"px",i.style.height=Math.max(0,Math.abs(s.y)-4)+"px"},_onMouseUp:function(t){this._pane.removeChild(this._box),this._container.style.cursor="",n.DomUtil.enableTextSelection(),n.DomEvent.off(e,"mousemove",this._onMouseMove).off(e,"mouseup",this._onMouseUp);var i=this._map,o=i.mouseEventToLayerPoint(t);if(!this._startLayerPoint.equals(o)){var s=new n.LatLngBounds(i.layerPointToLatLng(this._startLayerPoint),i.layerPointToLatLng(o));i.fitBounds(s),i.fire("boxzoomend",{boxZoomBounds:s})}}}),n.Map.addInitHook("addHandler","boxZoom",n.Map.BoxZoom),n.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),n.Map.Keyboard=n.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61],zoomOut:[189,109,173]},initialize:function(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;-1===t.tabIndex&&(t.tabIndex="0"),n.DomEvent.on(t,"focus",this._onFocus,this).on(t,"blur",this._onBlur,this).on(t,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;n.DomEvent.off(t,"focus",this._onFocus,this).off(t,"blur",this._onBlur,this).off(t,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){this._focused||this._map._container.focus()},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;i>e;e++)n[o.left[e]]=[-1*t,0];for(e=0,i=o.right.length;i>e;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;i>e;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;i>e;e++)n[o.up[e]]=[0,-1*t]},_setZoomOffset:function(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;i>e;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;i>e;e++)n[o.zoomOut[e]]=-t},_addHooks:function(){n.DomEvent.on(e,"keydown",this._onKeyDown,this)},_removeHooks:function(){n.DomEvent.off(e,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode,i=this._map;if(this._panKeys.hasOwnProperty(e))i.panBy(this._panKeys[e]),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds);else{if(!this._zoomKeys.hasOwnProperty(e))return;i.setZoom(i.getZoom()+this._zoomKeys[e])}n.DomEvent.stop(t)}}),n.Map.addInitHook("addHandler","keyboard",n.Map.Keyboard),n.Handler.MarkerDrag=n.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new n.Draggable(t,t).on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this)),this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=this._marker,e=t._shadow,i=n.DomUtil.getPosition(t._icon),o=t._map.layerPointToLatLng(i);e&&n.DomUtil.setPosition(e,i),t._latlng=o,t.fire("move",{latlng:o}).fire("drag")},_onDragEnd:function(){this._marker.fire("moveend").fire("dragend")}}),n.Handler.PolyEdit=n.Handler.extend({options:{icon:new n.DivIcon({iconSize:new n.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(t,e){this._poly=t,n.setOptions(this,e)},addHooks:function(){this._poly._map&&(this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){this._poly._map&&(this._poly._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new n.LayerGroup),this._markers=[];var t,e,i,o,s=this._poly._latlngs;for(t=0,i=s.length;i>t;t++)o=this._createMarker(s[t],t),o.on("click",this._onMarkerClick,this),this._markers.push(o);var a,r;for(t=0,e=i-1;i>t;e=t++)(0!==t||n.Polygon&&this._poly instanceof n.Polygon)&&(a=this._markers[e],r=this._markers[t],this._createMiddleMarker(a,r),this._updatePrevNext(a,r))},_createMarker:function(t,e){var i=new n.Marker(t,{draggable:!0,icon:this.options.icon});return i._origLatLng=t,i._index=e,i.on("drag",this._onMarkerDrag,this),i.on("dragend",this._fireEdit,this),this._markerGroup.addLayer(i),i},_fireEdit:function(){this._poly.fire("edit")},_onMarkerDrag:function(t){var e=t.target;n.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),this._poly.redraw()},_onMarkerClick:function(t){if(!(3>this._poly._latlngs.length)){var e=t.target,i=e._index;this._markerGroup.removeLayer(e),this._markers.splice(i,1),this._poly.spliceLatLngs(i,1),this._updateIndexes(i,-1),this._updatePrevNext(e._prev,e._next),e._middleLeft&&this._markerGroup.removeLayer(e._middleLeft),e._middleRight&&this._markerGroup.removeLayer(e._middleRight),e._prev&&e._next?this._createMiddleMarker(e._prev,e._next):e._prev?e._next||(e._prev._middleRight=null):e._next._middleLeft=null,this._poly.fire("edit")}},_updateIndexes:function(t,e){this._markerGroup.eachLayer(function(i){i._index>t&&(i._index+=e)})},_createMiddleMarker:function(t,e){var i,n,o,s=this._getMiddleLatLng(t,e),a=this._createMarker(s);a.setOpacity(.6),t._middleRight=e._middleLeft=a,n=function(){var n=e._index;a._index=n,a.off("click",i).on("click",this._onMarkerClick,this),s.lat=a.getLatLng().lat,s.lng=a.getLatLng().lng,this._poly.spliceLatLngs(n,0,s),this._markers.splice(n,0,a),a.setOpacity(1),this._updateIndexes(n,1),e._index++,this._updatePrevNext(t,a),this._updatePrevNext(a,e)},o=function(){a.off("dragstart",n,this),a.off("dragend",o,this),this._createMiddleMarker(t,a),this._createMiddleMarker(a,e)},i=function(){n.call(this),o.call(this),this._poly.fire("edit")},a.on("click",i,this).on("dragstart",n,this).on("dragend",o,this),this._markerGroup.addLayer(a)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var i=this._poly._map,n=i.latLngToLayerPoint(t.getLatLng()),o=i.latLngToLayerPoint(e.getLatLng());return i.layerPointToLatLng(n._add(o)._divideBy(2))}}),n.Polyline.addInitHook(function(){n.Handler.PolyEdit&&(this.editing=new n.Handler.PolyEdit(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),n.Control=n.Class.extend({options:{position:"topright"},initialize:function(t){n.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this
},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),o=t._controlCorners[i];return n.DomUtil.addClass(e,"leaflet-control"),-1!==i.indexOf("bottom")?o.insertBefore(e,o.firstChild):o.appendChild(e),this},removeFrom:function(t){var e=this.getPosition(),i=t._controlCorners[e];return i.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this}}),n.control=function(t){return new n.Control(t)},n.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){function t(t,s){var a=i+t+" "+i+s;e[t+s]=n.DomUtil.create("div",a,o)}var e=this._controlCorners={},i="leaflet-",o=this._controlContainer=n.DomUtil.create("div",i+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")}}),n.Control.Zoom=n.Control.extend({options:{position:"topleft"},onAdd:function(t){var e="leaflet-control-zoom",i="leaflet-bar",o=i+"-part",s=n.DomUtil.create("div",e+" "+i);return this._map=t,this._zoomInButton=this._createButton("+","Zoom in",e+"-in "+o+" "+o+"-top",s,this._zoomIn,this),this._zoomOutButton=this._createButton("-","Zoom out",e+"-out "+o+" "+o+"-bottom",s,this._zoomOut,this),t.on("zoomend",this._updateDisabled,this),s},onRemove:function(t){t.off("zoomend",this._updateDisabled,this)},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_createButton:function(t,e,i,o,s,a){var r=n.DomUtil.create("a",i,o);r.innerHTML=t,r.href="#",r.title=e;var h=n.DomEvent.stopPropagation;return n.DomEvent.on(r,"click",h).on(r,"mousedown",h).on(r,"dblclick",h).on(r,"click",n.DomEvent.preventDefault).on(r,"click",s,a),r},_updateDisabled:function(){var t=this._map,e="leaflet-control-zoom-disabled";n.DomUtil.removeClass(this._zoomInButton,e),n.DomUtil.removeClass(this._zoomOutButton,e),t._zoom===t.getMinZoom()&&n.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&n.DomUtil.addClass(this._zoomInButton,e)}}),n.Map.mergeOptions({zoomControl:!0}),n.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new n.Control.Zoom,this.addControl(this.zoomControl))}),n.control.zoom=function(t){return new n.Control.Zoom(t)},n.Control.Attribution=n.Control.extend({options:{position:"bottomright",prefix:'Powered by <a href="http://leafletjs.com">Leaflet</a>'},initialize:function(t){n.setOptions(this,t),this._attributions={}},onAdd:function(t){return this._container=n.DomUtil.create("div","leaflet-control-attribution"),n.DomEvent.disableClickPropagation(this._container),t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):i},removeAttribution:function(t){return t?(this._attributions[t]--,this._update(),this):i},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions.hasOwnProperty(e)&&this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" &#8212; ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),n.Map.mergeOptions({attributionControl:!0}),n.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new n.Control.Attribution).addTo(this))}),n.control.attribution=function(t){return new n.Control.Attribution(t)},n.Control.Scale=n.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-scale",i=n.DomUtil.create("div",e),o=this.options;return this._addScales(o,e,i),t.on(o.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=n.DomUtil.create("div",e+"-line",i)),t.imperial&&(this._iScale=n.DomUtil.create("div",e+"-line",i))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,i=6378137*Math.PI*Math.cos(e*Math.PI/180),n=i*(t.getNorthEast().lng-t.getSouthWest().lng)/180,o=this._map.getSize(),s=this.options,a=0;o.x>0&&(a=n*(s.maxWidth/o.x)),this._updateScales(s,a)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=1e3>e?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,i,n,o=3.2808399*t,s=this._iScale;o>5280?(e=o/5280,i=this._getRoundNum(e),s.style.width=this._getScaleWidth(i/e)+"px",s.innerHTML=i+" mi"):(n=this._getRoundNum(o),s.style.width=this._getScaleWidth(n/o)+"px",s.innerHTML=n+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),n.control.scale=function(t){return new n.Control.Scale(t)},n.Control.Layers=n.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(t,e,i){n.setOptions(this,i),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var o in t)t.hasOwnProperty(o)&&this._addLayer(t[o],o);for(o in e)e.hasOwnProperty(o)&&this._addLayer(e[o],o,!0)},onAdd:function(t){return this._initLayout(),this._update(),t.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(t){t.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(t){var e=n.stamp(t);return delete this._layers[e],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=n.DomUtil.create("div",t);n.Browser.touch?n.DomEvent.on(e,"click",n.DomEvent.stopPropagation):(n.DomEvent.disableClickPropagation(e),n.DomEvent.on(e,"mousewheel",n.DomEvent.stopPropagation));var i=this._form=n.DomUtil.create("form",t+"-list");if(this.options.collapsed){n.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this);var o=this._layersLink=n.DomUtil.create("a",t+"-toggle",e);o.href="#",o.title="Layers",n.Browser.touch?n.DomEvent.on(o,"click",n.DomEvent.stopPropagation).on(o,"click",n.DomEvent.preventDefault).on(o,"click",this._expand,this):n.DomEvent.on(o,"focus",this._expand,this),this._map.on("movestart",this._collapse,this)}else this._expand();this._baseLayersList=n.DomUtil.create("div",t+"-base",i),this._separator=n.DomUtil.create("div",t+"-separator",i),this._overlaysList=n.DomUtil.create("div",t+"-overlays",i),e.appendChild(i)},_addLayer:function(t,e,i){var o=n.stamp(t);this._layers[o]={layer:t,name:e,overlay:i},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var t=!1,e=!1;for(var i in this._layers)if(this._layers.hasOwnProperty(i)){var n=this._layers[i];this._addItem(n),e=e||n.overlay,t=t||!n.overlay}this._separator.style.display=e&&t?"":"none"}},_onLayerChange:function(t){var e=n.stamp(t.layer);this._layers[e]&&!this._handlingClick&&this._update()},_createRadioElement:function(t,i){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"';i&&(n+=' checked="checked"'),n+="/>";var o=e.createElement("div");return o.innerHTML=n,o.firstChild},_addItem:function(t){var i,o=e.createElement("label"),s=this._map.hasLayer(t.layer);t.overlay?(i=e.createElement("input"),i.type="checkbox",i.className="leaflet-control-layers-selector",i.defaultChecked=s):i=this._createRadioElement("leaflet-base-layers",s),i.layerId=n.stamp(t.layer),n.DomEvent.on(i,"click",this._onInputClick,this);var a=e.createElement("span");a.innerHTML=" "+t.name,o.appendChild(i),o.appendChild(a);var r=t.overlay?this._overlaysList:this._baseLayersList;return r.appendChild(o),o},_onInputClick:function(){var t,e,i,n,o=this._form.getElementsByTagName("input"),s=o.length;for(this._handlingClick=!0,t=0;s>t;t++)e=o[t],i=this._layers[e.layerId],e.checked&&!this._map.hasLayer(i.layer)?(this._map.addLayer(i.layer),i.overlay||(n=i.layer)):!e.checked&&this._map.hasLayer(i.layer)&&this._map.removeLayer(i.layer);n&&(this._map.setZoom(this._map.getZoom()),this._map.fire("baselayerchange",{layer:n})),this._handlingClick=!1},_expand:function(){n.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),n.control.layers=function(t,e,i){return new n.Control.Layers(t,e,i)},n.PosAnimation=n.Class.extend({includes:n.Mixin.Events,run:function(t,e,i,o){this.stop(),this._el=t,this._inProgress=!0,this.fire("start"),t.style[n.DomUtil.TRANSITION]="all "+(i||.25)+"s cubic-bezier(0,0,"+(o||.5)+",1)",n.DomEvent.on(t,n.DomUtil.TRANSITION_END,this._onTransitionEnd,this),n.DomUtil.setPosition(t,e),n.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(n.bind(this.fire,this,"step"),50)},stop:function(){this._inProgress&&(n.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),n.Util.falseFn(this._el.offsetWidth))},_transformRe:/(-?[\d\.]+), (-?[\d\.]+)\)/,_getPos:function(){var e,i,o,s=this._el,a=t.getComputedStyle(s);return n.Browser.any3d?(o=a[n.DomUtil.TRANSFORM].match(this._transformRe),e=parseFloat(o[1]),i=parseFloat(o[2])):(e=parseFloat(a.left),i=parseFloat(a.top)),new n.Point(e,i,!0)},_onTransitionEnd:function(){n.DomEvent.off(this._el,n.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[n.DomUtil.TRANSITION]="",clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),n.Map.include({setView:function(t,e,i){e=this._limitZoom(e);var n=this._zoom!==e;if(this._loaded&&!i&&this._layers){this._panAnim&&this._panAnim.stop();var o=n?this._zoomToIfClose&&this._zoomToIfClose(t,e):this._panByIfClose(t);if(o)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},panBy:function(t,e,i){if(t=n.point(t),!t.x&&!t.y)return this;this._panAnim||(this._panAnim=new n.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),this.fire("movestart"),n.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var o=n.DomUtil.getPosition(this._mapPane).subtract(t)._round();return this._panAnim.run(this._mapPane,o,e||.25,i),this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){n.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_panByIfClose:function(t){var e=this._getCenterOffset(t)._floor();return this._offsetIsWithinView(e)?(this.panBy(e),!0):!1},_offsetIsWithinView:function(t,e){var i=e||1,n=this.getSize();return Math.abs(t.x)<=n.x*i&&Math.abs(t.y)<=n.y*i}}),n.PosAnimation=n.DomUtil.TRANSITION?n.PosAnimation:n.PosAnimation.extend({run:function(t,e,i,o){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(o||.5,.2),this._startPos=n.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=n.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var t=+new Date-this._startTime,e=1e3*this._duration;e>t?this._runFrame(this._easeOut(t/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var e=this._startPos.add(this._offset.multiplyBy(t));n.DomUtil.setPosition(this._el,e),this.fire("step")},_complete:function(){n.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),n.Map.mergeOptions({zoomAnimation:n.DomUtil.TRANSITION&&!n.Browser.android23&&!n.Browser.mobileOpera}),n.DomUtil.TRANSITION&&n.Map.addInitHook(function(){n.DomEvent.on(this._mapPane,n.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),n.Map.include(n.DomUtil.TRANSITION?{_zoomToIfClose:function(t,e){if(this._animatingZoom)return!0;if(!this.options.zoomAnimation)return!1;var i=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/i);if(!this._offsetIsWithinView(o,1))return!1;n.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this.fire("movestart").fire("zoomstart"),this.fire("zoomanim",{center:t,zoom:e});var s=this._getCenterLayerPoint().add(o);return this._prepareTileBg(),this._runAnimation(t,e,i,s),!0},_catchTransitionEnd:function(){this._animatingZoom&&this._onZoomTransitionEnd()},_runAnimation:function(t,e,i,o,s){this._animateToCenter=t,this._animateToZoom=e,this._animatingZoom=!0,n.Draggable&&(n.Draggable._disabled=!0);var a=n.DomUtil.TRANSFORM,r=this._tileBg;clearTimeout(this._clearTileBgTimer),n.Util.falseFn(r.offsetWidth);var h=n.DomUtil.getScaleString(i,o),l=r.style[a];r.style[a]=s?l+" "+h:h+" "+l},_prepareTileBg:function(){var t=this._tilePane,e=this._tileBg;if(e&&this._getLoadedTilesPercentage(e)>.5&&.5>this._getLoadedTilesPercentage(t))return t.style.visibility="hidden",t.empty=!0,this._stopLoadingImages(t),i;e||(e=this._tileBg=this._createPane("leaflet-tile-pane",this._mapPane),e.style.zIndex=1),e.style[n.DomUtil.TRANSFORM]="",e.style.visibility="hidden",e.empty=!0,t.empty=!1,this._tilePane=this._panes.tilePane=e;var o=this._tileBg=t;n.DomUtil.addClass(o,"leaflet-zoom-animated"),this._stopLoadingImages(o)},_getLoadedTilesPercentage:function(t){var e,i,n=t.getElementsByTagName("img"),o=0;for(e=0,i=n.length;i>e;e++)n[e].complete&&o++;return o/i},_stopLoadingImages:function(t){var e,i,o,s=Array.prototype.slice.call(t.getElementsByTagName("img"));for(e=0,i=s.length;i>e;e++)o=s[e],o.complete||(o.onload=n.Util.falseFn,o.onerror=n.Util.falseFn,o.src=n.Util.emptyImageUrl,o.parentNode.removeChild(o))},_onZoomTransitionEnd:function(){this._restoreTileFront(),n.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),n.Util.falseFn(this._tileBg.offsetWidth),this._animatingZoom=!1,this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),n.Draggable&&(n.Draggable._disabled=!1)},_restoreTileFront:function(){this._tilePane.innerHTML="",this._tilePane.style.visibility="",this._tilePane.style.zIndex=2,this._tileBg.style.zIndex=1},_clearTileBg:function(){this._animatingZoom||this.touchZoom._zooming||(this._tileBg.innerHTML="")}}:{}),n.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(t){if(t=this._locationOptions=n.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=n.bind(this._handleGeolocationResponse,this),i=n.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locationOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=180*t.coords.accuracy/4e7,i=2*e,o=t.coords.latitude,s=t.coords.longitude,a=new n.LatLng(o,s),r=new n.LatLng(o-e,s-i),h=new n.LatLng(o+e,s+i),l=new n.LatLngBounds(r,h),d=this._locationOptions;if(d.setView){var c=Math.min(this.getBoundsZoom(l),d.maxZoom);this.setView(a,c)}this.fire("locationfound",{latlng:a,bounds:l,accuracy:t.coords.accuracy})}})})(this,document);

// bingLayer.js
L.BingLayer=L.TileLayer.extend({options:{subdomains:[0,1,2,3],type:"Aerial",attribution:"Bing",culture:""},initialize:function(t,e){L.Util.setOptions(this,e),this._key=t,this._url=null,this.meta={},this.loadMetadata()},tile2quad:function(t,e,i){for(var n="",o=i;o>0;o--){var s=0,a=1<<o-1;0!=(t&a)&&(s+=1),0!=(e&a)&&(s+=2),n+=s}return n},getTileUrl:function(t,e){var e=this._getZoomForUrl(),i=this.options.subdomains,n=this.options.subdomains[Math.abs((t.x+t.y)%i.length)];return this._url.replace("{subdomain}",n).replace("{quadkey}",this.tile2quad(t.x,t.y,e)).replace("{culture}",this.options.culture)},loadMetadata:function(){var t=this,e="_bing_metadata_"+L.Util.stamp(this);window[e]=function(i){t.meta=i,window[e]=void 0;var n=document.getElementById(e);return n.parentNode.removeChild(n),i.errorDetails?(alert("Got metadata"+i.errorDetails),void 0):(t.initMetadata(),void 0)};var i="http://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.options.type+"?include=ImageryProviders&jsonp="+e+"&key="+this._key,n=document.createElement("script");n.type="text/javascript",n.src=i,n.id=e,document.getElementsByTagName("head")[0].appendChild(n)},initMetadata:function(){var t=this.meta.resourceSets[0].resources[0];this.options.subdomains=t.imageUrlSubdomains,this._url=t.imageUrl,this._providers=[];for(var e=0;t.imageryProviders.length>e;e++)for(var i=t.imageryProviders[e],n=0;i.coverageAreas.length>n;n++){var o=i.coverageAreas[n],s={zoomMin:o.zoomMin,zoomMax:o.zoomMax,active:!1},a=new L.LatLngBounds(new L.LatLng(o.bbox[0]+.01,o.bbox[1]+.01),new L.LatLng(o.bbox[2]-.01,o.bbox[3]-.01));s.bounds=a,s.attrib=i.attribution,this._providers.push(s)}this._update()},_update:function(){null!=this._url&&this._map&&L.TileLayer.prototype._update.apply(this,[])},_update_attribution:function(){for(var t=this._map.getBounds(),e=this._map.getZoom(),i=0;this._providers.length>i;i++){var n=this._providers[i];n.zoomMax>=e&&e>=n.zoomMin&&t.intersects(n.bounds)?(n.active||this._map.attributionControl.addAttribution(n.attrib),n.active=!0):(n.active&&this._map.attributionControl.removeAttribution(n.attrib),n.active=!1)}},onRemove:function(t){for(var e=0;this._providers.length>e;e++){var i=this._providers[e];i.active&&(this._map.attributionControl.removeAttribution(i.attrib),i.active=!1)}L.TileLayer.prototype.onRemove.apply(this,[t])}});

// stamen.js
(function(t){function e(t,e,n){for(var o=i(t),r=0;e.length>r;r++){var h=[t,e[r]].join("-");a[h]=s(h,n||o.type,o.minZoom,o.maxZoom)}}function i(t){if(t in a)return a[t];throw"No such provider ("+t+")"}function n(t){return t.replace(/({.})/g,function(t){return"$"+t.toLowerCase()})}var o=" a. b. c. d.".split(" "),s=function(t,e,i,n){return{url:["http://{S}tile.stamen.com/",t,"/{Z}/{X}/{Y}.",e].join(""),type:e,subdomains:o.slice(),minZoom:i,maxZoom:n}},a={toner:s("toner","png",0,20),terrain:s("terrain","jpg",4,18),watercolor:s("watercolor","jpg",3,16)},r=['Map tiles by <a href="http://stamen.com">Stamen Design</a>, ','under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. ','Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, ','under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.'].join("");if(e("toner",["hybrid","labels","lines","background","lite"]),e("toner",["2010"]),e("toner",["2011","2011-lines","2011-labels","2011-lite"]),e("terrain",["background"]),e("terrain",["labels","lines"],"png"),t.stamen=t.stamen||{},t.stamen.tile=t.stamen.tile||{},t.stamen.tile.providers=a,t.stamen.tile.getProvider=i,"object"==typeof MM){var h="function"==typeof MM.Template?MM.Template:MM.TemplatedMapProvider;MM.StamenTileLayer=function(t){var e=i(t);MM.Layer.call(this,new h(e.url,o)),this.provider.setZoomRange(e.minZoom,e.maxZoom),this.attribution=r},MM.extend(MM.StamenTileLayer,MM.Layer)}"object"==typeof L&&(L.StamenTileLayer=L.TileLayer.extend({initialize:function(t){var e=i(t),n=e.url.replace(/({[A-Z]})/g,function(t){return t.toLowerCase()});L.TileLayer.prototype.initialize.call(this,n,{minZoom:e.minZoom,maxZoom:e.maxZoom,subdomains:o,scheme:"xyz",attribution:r})}})),"object"==typeof OpenLayers&&(OpenLayers.Layer.Stamen=OpenLayers.Class(OpenLayers.Layer.OSM,{initialize:function(t,e){var s=i(t),a=s.url,r=[];if(a.indexOf("{S}")>-1)for(var h=0;o.length>h;h++)r.push(n(a.replace("{S}",o[h])));else r.push(n(a));return e=OpenLayers.Util.extend({numZoomLevels:s.maxZoom,buffer:0,transitionEffect:"resize",tileOptions:{crossOriginKeyword:null}},e),OpenLayers.Layer.OSM.prototype.initialize.call(this,t,r,e)}})),"object"==typeof google&&"object"==typeof google.maps&&(google.maps.StamenMapType=function(t){var e=i(t);return google.maps.ImageMapType.call(this,{getTileUrl:function(t,i){var n=(i+t.x+t.y)%o.length;return[e.url.replace("{S}",o[n]).replace("{Z}",i).replace("{X}",t.x).replace("{Y}",t.y)]},tileSize:new google.maps.Size(256,256),name:t,minZoom:e.minZoom,maxZoom:e.maxZoom})},google.maps.StamenMapType.prototype=new google.maps.ImageMapType("_"))})("undefined"==typeof exports?this:exports);

// uniTouch.js
function tuio_callback(t,e,i,n,o,s){uniTouch.tuioCallback(t,e,i,n,o,s)}var uniTouch={tuioCursors:[],tuioData:{},tuioCreateEvent:function(t){var e=new Date,i={};return i.touches=this.tuioCursors,i.targetTouches=this.tuioGetTargetTouches(t.target),i.changedTouches=[t],i.timeStamp=e.getTime(),i},tuioGetTargetTouches:function(t){for(var e=[],i=0;this.tuioCursors.length>i;i++){var n=this.tuioCursors[i];n.target==t&&e.push(n)}return e},tuioCallback:function(t,e,i,n,o){var s;switch(3!==t?s=this.tuioData[e]:(s={sid:e,fid:i},this.tuioData[e]=s),s.identifier=e,s.pageX=window.innerWidth*n,s.pageY=window.innerHeight*o,s.clientX=n,s.clientY=o,s.target=document.elementFromPoint(s.pageX,s.pageY),t){case 3:this.tuioCursors.push(s),this.touchStart(this.tuioCreateEvent(s));break;case 4:this.touchMove(this.tuioCreateEvent(s));break;case 5:this.tuioCursors.splice(this.tuioCursors.indexOf(s),1),this.touchEnd(this.tuioCreateEvent(s));break;default:}5===t&&delete this.tuioData[e]},tolerance:50,gracePeriod:200,pressTime:900,raiseTouchEvents:!1,distance:0,delta:0,direction:0,points:[],previousPoints:[],initialPoints:[],initialAngle:0,previousAngle:0,area:0,centroid:{x:null,y:null},lastRaisedEvent:0,tapRaised:!1,pressRaised:!1,holdRaised:!1,holdTimer:null,holdTouches:null,isInto:function(t,e){return e.sort(),t>=e[0]&&e[e.length-1]>=t},limit:function(t,e){return e.sort(),t>e[e.length-1]?e[e.length-1]:e[0]>t?e[0]:t},sameArrays:function(t,e){if(t.length!=e.length)return!1;if(0==t.length||0==e.length)return!1;for(var i in t)if(t[i]!==e[i])return!1;return!0},getTouches:function(t,e){var i=[];for(var n in t){var o={};o.timeStamp=e,o.id=t[n].identifier,o.x=t[n].pageX,o.y=t[n].pageY,i.push(o)}return i},computeArea:function(){if(this.points.length>2){for(var t,e,i=0,n=this.points,o=n.length,s=o-1,a=0;o>a;s=a++)t=n[a],e=n[s],i+=t.x*e.y,i-=t.y*e.x;i/=2,this.area=i}else this.area=0},computeCentroid:function(){if(this.points.length>2){for(var t,e,i,n=this.points,o=n.length,s=0,a=0,r=o-1,h=0;o>h;r=h++)e=n[h],i=n[r],t=e.x*i.y-i.x*e.y,s+=(e.x+i.x)*t,a+=(e.y+i.y)*t;t=6*this.area,this.centroid={x:s/t,y:a/t}}else{if(2==this.points.length){var l=this.points[0],e=this.points[1];if(e.x>l.x)var s=(e.x-l.x)/2+l.x;else if(l.x>e.x)var s=(l.x-e.x)/2+e.x;else var s=l.x;if(e.y>l.y)var a=(e.y-l.y)/2+l.y;else if(l.y>e.y)var a=(l.y-e.y)/2+e.y;else var a=l.y;return this.centroid={x:s,y:a},this.centroid}this.centroid={x:this.points[0].x,y:this.points[0].y}}},getDistance:function(t,e){if(void 0===t)var t=this.points[0];if(void 0===e)var e=this.points[1];var i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));return i},getAngle:function(t,e){if(void 0===t)var t=this.points[0];if(void 0===e)var e=this.points[1];var i={x:Math.abs(t.x-e.x),y:Math.abs(t.y-e.y)},n=180*Math.atan2(i.y,i.x)/Math.PI;return n=90-n,(t.x>e.x&&t.y>e.y||e.x>t.x&&e.y>t.y)&&(n*=-1),n},reset:function(){this.initialPoints=[],this.previousPoints=[],this.points=[],this.distance=0,this.delta=0,this.direction=0,this.area=0,this.centroid={x:null,y:null},this.initialAngle=0,this.previousAngle=0,this.pressRaised=!1,this.holdRaised=!1,this.holdTouches=null,window.clearTimeout(this.holdTimer)},init:function(t){this.sameArrays(this.previousPoints,t)||(this.previousPoints=this.points),this.points=t,this.computeArea(),this.computeCentroid()},raiseEvent:function(t,e){var i=document.createEvent("CustomEvent");i.initEvent(t,!0,!0);for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);document.dispatchEvent(i)},isTap:function(t){return t[0].id==this.initialPoints[0].id&&this.getDistance(t[0],this.initialPoints[0])<this.tolerance&&t[0].timeStamp<this.initialPoints[0].timeStamp+3*this.gracePeriod?!0:!1},isPress:function(t){return t[0].id==this.initialPoints[0].id&&this.getDistance(t[0],this.initialPoints[0])<this.tolerance&&t[0].timeStamp>this.initialPoints[0].timeStamp+this.pressTime?!0:!1},isSwipe:function(t){var e=this.getDistance(t[0],this.initialPoints[0]);if(t[0].id==this.initialPoints[0].id&&e>1.5*this.tolerance){if(this.isInto(t[0].x,[this.initialPoints[0].x-2*this.tolerance,this.initialPoints[0].x+2*this.tolerance])){if(t[0].y>this.initialPoints[0].y)var i="down";else var i="up";Math.abs(t[0].y-this.initialPoints[0].y)}else if(this.isInto(t[0].y,[this.initialPoints[0].y-2*this.tolerance,this.initialPoints[0].y+2*this.tolerance])){if(t[0].x>this.initialPoints[0].x)var i="right";else var i="left";Math.abs(t[0].x-this.initialPoints[0].x)}var n=e/(t[0].timeStamp-this.initialPoints[0].timeStamp);return{direction:i,speed:n,distance:e}}return!1},isPinchZoom:function(t){var e=this.getDistance(t[0],t[1]);if(e!=this.distance){var i=e-this.distance;if(Math.abs(i-this.delta)>this.tolerance){var n=0;if(i-this.delta>0&&(n=1),0>i-this.delta&&(n=-1),0!=n)return this.direction=n,this.delta=i,n}}return!1},isRotate:function(t){var e=this.getAngle(t[0],t[1]);if(this.getDistance(this.initialPoints[0],t[0])<this.tolerance&&this.getDistance(this.initialPoints[1],t[1])<this.tolerance)return!1;if(this.initialAngle>e)var i="right";else{if(!(e>this.initialAngle))return!1;var i="left"}return{direction:i,angle:e}},doHold:function(){this.holdTouches[0].timeStamp+=this.gracePeriod+1;var t=this.isPress(this.holdTouches);if(t)if(this.pressRaised){this.lastRaisedEvent=this.holdTouches[0].timeStamp,this.holdRaised=!0;var e={centroid:{x:this.initialPoints[0].x,y:this.initialPoints[0].y},target:document.elementFromPoint(this.centroid.x,this.centroid.y)};this.raiseEvent("hold",e)}else{this.lastRaisedEvent=this.holdTouches[0].timeStamp,this.pressRaised=!0;var e={centroid:{x:this.initialPoints[0].x,y:this.initialPoints[0].y},target:document.elementFromPoint(this.centroid.x,this.centroid.y)};this.raiseEvent("press",e)}this.holdTimer=window.setTimeout(function(){uniTouch.doHold()},this.gracePeriod+1)},touchStart:function(t){this.raiseTouchEvents&&this.raiseEvent("touchstart",t),this.reset();var e=this.getTouches(t.touches,t.timeStamp);this.init(e),this.initialPoints=e,e.length>1?(this.distance=this.getDistance(),2==e.length&&(this.initialAngle=this.getAngle(e[0],e[1]),this.previousAngle=this.initialAngle)):(this.holdTouches=this.getTouches(t.touches,t.timeStamp),this.holdTimer=window.setTimeout(function(){uniTouch.doHold()},this.gracePeriod+1))},touchEnd:function(t){if(this.raiseTouchEvents&&this.raiseEvent("touchend",t),1==this.initialPoints.length){var e=this.getTouches(t.changedTouches,t.timeStamp);if(window.clearTimeout(this.holdTimer),this.holdRaised){var i={centroid:{x:this.initialPoints[0].x,y:this.initialPoints[0].y},target:document.elementFromPoint(this.initialPoints[0].x,this.initialPoints[0].y)};this.raiseEvent("release",i)}var n=this.isTap(e);if(n){this.lastRaisedEvent=t.timeStamp;var i={centroid:{x:this.initialPoints[0].x,y:this.initialPoints[0].y},target:document.elementFromPoint(this.initialPoints[0].x,this.initialPoints[0].y)};return this.tapRaised?(this.tapRaised=!1,this.raiseEvent("doubletap",i)):(this.tapRaised=!0,this.raiseEvent("tap",i)),void 0}var o=this.isSwipe(e);if(o)return o.target=document.elementFromPoint(this.initialPoints[0].x,this.initialPoints[0].y),this.raiseEvent("swipe"+o.direction,o),this.raiseEvent("swipe",o),void 0}},touchMove:function(t){if(this.raiseTouchEvents&&this.raiseEvent("touchmove",t),this.lastRaisedEvent+this.gracePeriod<t.timeStamp){var e=this.getTouches(t.touches,t.timeStamp);if(this.init(e),2==e.length){var i=this.isPinchZoom(e);if(i!==!1){var n={direction:i,centroid:this.centroid,target:document.elementFromPoint(this.centroid.x,this.centroid.y)};i>0?(this.raiseEvent("pinchzoomin",n),this.raiseEvent("pinch",n)):0>i&&(this.raiseEvent("pinchzoomout",n),this.raiseEvent("spread",n)),this.lastRaisedEvent=t.timeStamp,this.raiseEvent("pinchzoom",n)}var o=this.isRotate(e);o!==!1&&(o.centroid=this.centroid,o.target=document.elementFromPoint(e[0].x,e[0].y),"right"==o.direction?this.raiseEvent("rotateright",o):this.raiseEvent("rotateleft",o),this.lastRaisedEvent=t.timeStamp,this.raiseEvent("rotate",o))}}}};

// Map.js
enyo.kind({name:"enyo.Map",classes:"enyo-map",published:{latitude:46.498392,longitude:2.460938,zoom:4,layer:"osm",bingMapType:"aerial",bingCredentials:"",options:""},events:{onLoaded:""},handlers:{ondragstart:"drag"},drag:function(){return!0},rendered:function(){this.inherited(arguments);var t=new L.TileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"),e=new L.TileLayer("http://{s}.tile.cloudmade.com/78eab727fd024b2a9b889e3236c70394/68943/256/{z}/{x}/{y}.png",{maxZoom:18}),i=new L.StamenTileLayer("watercolor"),t=new L.TileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18}),n=new L.BingLayer(this.bingCredentials,{maxZoom:20});this.mapsLayer={cloudmade:e,watercolor:i,osm:t,bing:n},this.map=new L.Map(this.id,{center:new L.LatLng(this.latitude,this.longitude),zoom:this.zoom,layers:[this.mapsLayer[this.layer]],zoomControl:!1,attributionControl:!1,scrollWheelZoom:!0}),this.doLoaded()},zoomOut:function(){this.map.zoomOut()},zoomIn:function(){this.map.zoomIn()},getMap:function(){return this.map},getMapsLayer:function(){return this.mapsLayer},addLayer:function(t){this.map.addLayer(t)},removeLayer:function(t){this.map.removeLayer(t)},setMaxBounds:function(t){this.map.setMaxBounds(t)},invalidateSize:function(t){this.map.invalidateSize(t)},getScrollWheelZoom:function(){return this.map.scrollWheelZoom},setScrollWheelZoom:function(t){this.map.scrollWheelZoom(t)}});

// parcours.js
var parcours=[[{lat:43.6423203,lon:3.8830659},{lat:43.642261,lon:3.8831462},{lat:43.6422382,lon:3.8832367}],[{lat:43.6396989,lon:3.8750315},{lat:43.6396486,lon:3.8750521},{lat:43.639599,lon:3.8751214},{lat:43.6395595,lon:3.8752081},{lat:43.6395258,lon:3.8752772},{lat:43.6394909,lon:3.8753752},{lat:43.6394653,lon:3.8754603},{lat:43.6394617,lon:3.8754988},{lat:43.6394439,lon:3.8756697},{lat:43.6394631,lon:3.8758103},{lat:43.6394899,lon:3.8759561},{lat:43.6395302,lon:3.8761073},{lat:43.6395341,lon:3.8761683},{lat:43.6395072,lon:3.8763699},{lat:43.6394957,lon:3.8764574},{lat:43.6394669,lon:3.8766218},{lat:43.6394822,lon:3.8767094},{lat:43.6395091,lon:3.8767995},{lat:43.639607,lon:3.8769852},{lat:43.6396781,lon:3.8771446},{lat:43.6396934,lon:3.8771788},{lat:43.6397663,lon:3.8772982},{lat:43.6398105,lon:3.8773804},{lat:43.6398085,lon:3.8774546},{lat:43.6398393,lon:3.8775899},{lat:43.6398853,lon:3.8777199},{lat:43.6399947,lon:3.8779135},{lat:43.6400485,lon:3.8780275},{lat:43.6401329,lon:3.8781495},{lat:43.6402212,lon:3.8782821},{lat:43.6403057,lon:3.8784201},{lat:43.6403498,lon:3.8785606},{lat:43.6403671,lon:3.878611},{lat:43.6404727,lon:3.8787887},{lat:43.6405322,lon:3.8788815},{lat:43.6405533,lon:3.8789744},{lat:43.6405878,lon:3.8792316},{lat:43.640607,lon:3.8794438},{lat:43.640655,lon:3.8797117},{lat:43.6406838,lon:3.8799053},{lat:43.640726,lon:3.880213},{lat:43.6407318,lon:3.880396},{lat:43.6407241,lon:3.8805206},{lat:43.6407375,lon:3.8807779},{lat:43.6407657,lon:3.8813628},{lat:43.6407249,lon:3.8814225},{lat:43.6407212,lon:3.8815669},{lat:43.6407448,lon:3.8816429},{lat:43.6407941,lon:3.8816952}],[{lat:43.6425543,lon:3.8789422},{lat:43.6425458,lon:3.8789981},{lat:43.642517,lon:3.8791506},{lat:43.6424762,lon:3.8793097},{lat:43.642445,lon:3.8794788},{lat:43.6423947,lon:3.8796479},{lat:43.6423179,lon:3.8799396},{lat:43.6423121,lon:3.8800926},{lat:43.6422579,lon:3.8803143},{lat:43.6422305,lon:3.8803947},{lat:43.6421979,lon:3.88049},{lat:43.6421427,lon:3.8806458},{lat:43.6420972,lon:3.8807784},{lat:43.6420564,lon:3.8809409},{lat:43.6420396,lon:3.8810364},{lat:43.6420484,lon:3.8812014},{lat:43.6421259,lon:3.8813387},{lat:43.6421955,lon:3.8814315},{lat:43.6422723,lon:3.8815144},{lat:43.6423155,lon:3.8815973},{lat:43.6423371,lon:3.8817034},{lat:43.6423351,lon:3.881756},{lat:43.6423179,lon:3.881836},{lat:43.6423136,lon:3.8819743},{lat:43.6423035,lon:3.882141},{lat:43.6422795,lon:3.8822835},{lat:43.6422963,lon:3.8824858},{lat:43.6422939,lon:3.8826913},{lat:43.6423083,lon:3.8829068},{lat:43.6423203,lon:3.8830659},{lat:43.6423325,lon:3.8831361},{lat:43.642311,lon:3.8832783}],[{lat:43.6428685,lon:3.8733421},{lat:43.6429096,lon:3.8733512},{lat:43.6429545,lon:3.8733447},{lat:43.6430005,lon:3.8732877},{lat:43.6430163,lon:3.8732172},{lat:43.6429762,lon:3.8731104},{lat:43.642953,lon:3.8730892},{lat:43.6429318,lon:3.8731054}],[{lat:43.6444845,lon:3.8754015},{lat:43.6444995,lon:3.87534},{lat:43.6444972,lon:3.8751998},{lat:43.6444458,lon:3.8750341},{lat:43.644435,lon:3.8748367},{lat:43.6444623,lon:3.8747492},{lat:43.6444786,lon:3.8746971},{lat:43.6445817,lon:3.8745275},{lat:43.6446013,lon:3.8744507},{lat:43.644601,lon:3.8741964},{lat:43.6446041,lon:3.8739299},{lat:43.6445623,lon:3.8738337},{lat:43.6444945,lon:3.8737788},{lat:43.6444063,lon:3.8737498},{lat:43.6443078,lon:3.8737484},{lat:43.6441612,lon:3.8737555},{lat:43.6440917,lon:3.8737669},{lat:43.6440366,lon:3.8738031},{lat:43.6439934,lon:3.8738888},{lat:43.6438926,lon:3.8740445},{lat:43.643827,lon:3.874133},{lat:43.643791,lon:3.8741602},{lat:43.6437659,lon:3.874163}],[{lat:43.6422753,lon:3.8834443},{lat:43.6422519,lon:3.8834505},{lat:43.6422145,lon:3.8834395},{lat:43.6421835,lon:3.883401},{lat:43.6421712,lon:3.8833426},{lat:43.6421953,lon:3.8832654},{lat:43.6422382,lon:3.8832367},{lat:43.6422762,lon:3.8832425},{lat:43.642311,lon:3.8832783},{lat:43.6423227,lon:3.883309},{lat:43.6423206,lon:3.8833849},{lat:43.6422947,lon:3.8834301},{lat:43.6422753,lon:3.8834443}],[{lat:43.6396989,lon:3.8750315},{lat:43.6397787,lon:3.8750569},{lat:43.6398763,lon:3.8751508},{lat:43.6399196,lon:3.8752277},{lat:43.6399536,lon:3.8753131},{lat:43.6400247,lon:3.875437},{lat:43.6401174,lon:3.8756505},{lat:43.6401885,lon:3.8758385},{lat:43.6402349,lon:3.876052},{lat:43.6402442,lon:3.876146},{lat:43.6403153,lon:3.8763724},{lat:43.6403802,lon:3.8765646},{lat:43.6404606,lon:3.8767312},{lat:43.6405657,lon:3.8768337},{lat:43.640677,lon:3.8769191},{lat:43.6407604,lon:3.8769875},{lat:43.6408624,lon:3.8770131},{lat:43.6409922,lon:3.87709},{lat:43.641085,lon:3.8771541},{lat:43.6411468,lon:3.877184},{lat:43.6411839,lon:3.8771968},{lat:43.6412797,lon:3.877184},{lat:43.6413786,lon:3.8771541},{lat:43.6414745,lon:3.8771413},{lat:43.6415363,lon:3.8771028},{lat:43.6415981,lon:3.8770644},{lat:43.6416507,lon:3.876996},{lat:43.6416967,lon:3.8768919},{lat:43.6417286,lon:3.8768464},{lat:43.6417796,lon:3.8768257},{lat:43.6418665,lon:3.8768133},{lat:43.6419295,lon:3.8767884},{lat:43.6420375,lon:3.8767843},{lat:43.6421125,lon:3.8767967},{lat:43.6421537,lon:3.8768084},{lat:43.6421844,lon:3.8768879},{lat:43.6422834,lon:3.8771116},{lat:43.6423524,lon:3.8772567},{lat:43.6423764,lon:3.8773313},{lat:43.6424333,lon:3.8775343},{lat:43.6424693,lon:3.8776669},{lat:43.6424933,lon:3.8777996},{lat:43.6425323,lon:3.8779736},{lat:43.6425623,lon:3.8780855},{lat:43.6425713,lon:3.8781684},{lat:43.6425908,lon:3.8782409},{lat:43.6425541,lon:3.8782651},{lat:43.6425203,lon:3.8782948},{lat:43.642485,lon:3.8783415},{lat:43.6424543,lon:3.8783669},{lat:43.6424129,lon:3.8783818},{lat:43.6423775,lon:3.878403},{lat:43.6423653,lon:3.8784348},{lat:43.6423723,lon:3.878503},{lat:43.6423921,lon:3.8785754},{lat:43.6424039,lon:3.8786742},{lat:43.6424277,lon:3.8787408},{lat:43.6424086,lon:3.8788248},{lat:43.642444,lon:3.8788723},{lat:43.6425065,lon:3.8788719},{lat:43.6425543,lon:3.8789422},{lat:43.6426072,lon:3.8787649},{lat:43.6426483,lon:3.8787661},{lat:43.6426877,lon:3.8787934},{lat:43.6427338,lon:3.8787786},{lat:43.6427675,lon:3.8787489},{lat:43.6427737,lon:3.8787149},{lat:43.6427645,lon:3.8786576},{lat:43.6427921,lon:3.8786152},{lat:43.6428136,lon:3.8785664},{lat:43.6428259,lon:3.8784942},{lat:43.6428259,lon:3.8784539},{lat:43.6428121,lon:3.8783966},{lat:43.6427983,lon:3.8783266},{lat:43.6427967,lon:3.8782736},{lat:43.6427746,lon:3.8782408},{lat:43.6427384,lon:3.8782269},{lat:43.6427077,lon:3.8782269},{lat:43.6426723,lon:3.8782057},{lat:43.6426462,lon:3.878193},{lat:43.6426201,lon:3.8782057},{lat:43.6425908,lon:3.8782409}],[{lat:43.6420396,lon:3.8810364},{lat:43.6419596,lon:3.8809756},{lat:43.6418716,lon:3.8809642},{lat:43.6417932,lon:3.881049}],[{lat:43.6429082,lon:3.8729883},{lat:43.6429318,lon:3.8731054},{lat:43.6428871,lon:3.87327},{lat:43.6428685,lon:3.8733421},{lat:43.6428201,lon:3.8733884},{lat:43.6427419,lon:3.8734244},{lat:43.6427121,lon:3.8734655},{lat:43.6426711,lon:3.8735736},{lat:43.6426972,lon:3.8737074},{lat:43.6427307,lon:3.8738411},{lat:43.6427828,lon:3.8739749},{lat:43.6427977,lon:3.8740521},{lat:43.6427967,lon:3.8741128}],[{lat:43.6439222,lon:3.8786301},{lat:43.6439756,lon:3.8787781},{lat:43.6440463,lon:3.8789574},{lat:43.6440584,lon:3.8789904},{lat:43.6441194,lon:3.8791562},{lat:43.6441503,lon:3.8792385},{lat:43.6442193,lon:3.8792985},{lat:43.6442722,lon:3.879386},{lat:43.6442963,lon:3.8794875},{lat:43.6443073,lon:3.879531},{lat:43.644312,lon:3.8795961},{lat:43.6443089,lon:3.8796939},{lat:43.6443026,lon:3.8798504},{lat:43.6442963,lon:3.8800068},{lat:43.6442932,lon:3.8801534},{lat:43.6442947,lon:3.8802892},{lat:43.644305,lon:3.8804131},{lat:43.6443278,lon:3.8805022},{lat:43.6443451,lon:3.8806314},{lat:43.6443561,lon:3.8807814},{lat:43.6443451,lon:3.8809443},{lat:43.644305,lon:3.8812376},{lat:43.6442657,lon:3.8814907},{lat:43.644236,lon:3.8816879},{lat:43.6441587,lon:3.8817702},{lat:43.6440544,lon:3.8819492},{lat:43.6439603,lon:3.8821612},{lat:43.6438543,lon:3.8823755},{lat:43.6437545,lon:3.8825792},{lat:43.643733,lon:3.8826238},{lat:43.6437192,lon:3.8826938},{lat:43.64371,lon:3.8827617},{lat:43.6437168,lon:3.882941},{lat:43.6437242,lon:3.8830326},{lat:43.6437279,lon:3.8831379},{lat:43.6437254,lon:3.8832058},{lat:43.6437058,lon:3.883328},{lat:43.6436824,lon:3.8834621},{lat:43.6436087,lon:3.8836539},{lat:43.6435485,lon:3.8838219},{lat:43.6435068,lon:3.8839747},{lat:43.643481,lon:3.884158},{lat:43.6434724,lon:3.8843974},{lat:43.6434675,lon:3.8846588},{lat:43.6434699,lon:3.8848896},{lat:43.6434577,lon:3.8850288},{lat:43.6434414,lon:3.8851123},{lat:43.6434086,lon:3.8852804},{lat:43.6433349,lon:3.8855054},{lat:43.6432596,lon:3.8857112},{lat:43.6431905,lon:3.8858682},{lat:43.643123,lon:3.88597},{lat:43.643037,lon:3.8860655},{lat:43.6429787,lon:3.8861164},{lat:43.6428435,lon:3.886301},{lat:43.6427637,lon:3.8864177},{lat:43.6426301,lon:3.8866087},{lat:43.6425306,lon:3.8867171},{lat:43.6424996,lon:3.8867508},{lat:43.6423783,lon:3.886859},{lat:43.6422493,lon:3.8869567},{lat:43.642151,lon:3.8870288},{lat:43.6419898,lon:3.887171},{lat:43.64191,lon:3.8872049},{lat:43.6418301,lon:3.8872367},{lat:43.6416873,lon:3.8872792},{lat:43.6415799,lon:3.887328},{lat:43.6415323,lon:3.8873662},{lat:43.6414232,lon:3.8874404},{lat:43.6413388,lon:3.8874765},{lat:43.6413142,lon:3.887468},{lat:43.6412513,lon:3.8874086},{lat:43.6411883,lon:3.8873625},{lat:43.6411422,lon:3.8872537},{lat:43.6410824,lon:3.8871561},{lat:43.6410056,lon:3.8870436},{lat:43.6409196,lon:3.8868866},{lat:43.6408382,lon:3.8867678},{lat:43.6407538,lon:3.8866638},{lat:43.640654,lon:3.8865662},{lat:43.6406294,lon:3.8865196},{lat:43.6406171,lon:3.8864411},{lat:43.6405971,lon:3.8862904},{lat:43.6405787,lon:3.8861122},{lat:43.640548,lon:3.88597},{lat:43.6405188,lon:3.8859043},{lat:43.6404559,lon:3.8858215},{lat:43.6404313,lon:3.8857388},{lat:43.6404037,lon:3.8855945},{lat:43.6403622,lon:3.885412},{lat:43.6403039,lon:3.8851701},{lat:43.640267,lon:3.8850386},{lat:43.6402225,lon:3.8849113},{lat:43.6401902,lon:3.884767},{lat:43.6401795,lon:3.8846779},{lat:43.6401918,lon:3.8845909},{lat:43.6402363,lon:3.8844911},{lat:43.6402808,lon:3.8844233},{lat:43.6403484,lon:3.8843723},{lat:43.6404307,lon:3.8843044},{lat:43.64047,lon:3.8842875},{lat:43.6405707,lon:3.8842467},{lat:43.6406973,lon:3.884189},{lat:43.6407894,lon:3.884133},{lat:43.6409085,lon:3.884043},{lat:43.6409736,lon:3.8839565},{lat:43.6409958,lon:3.8838869},{lat:43.6410117,lon:3.8838173},{lat:43.6410277,lon:3.8837188},{lat:43.6410631,lon:3.8836528}],[{lat:43.6428711,lon:3.8741642},{lat:43.6428488,lon:3.8743502},{lat:43.6428279,lon:3.8744877},{lat:43.6428291,lon:3.8745896},{lat:43.6428439,lon:3.8747474},{lat:43.6428574,lon:3.8749341},{lat:43.6428746,lon:3.8751854},{lat:43.6428868,lon:3.8753602},{lat:43.6429053,lon:3.8755503},{lat:43.6429335,lon:3.8757557},{lat:43.6429446,lon:3.8758779},{lat:43.6429495,lon:3.8760629},{lat:43.6429581,lon:3.8762123},{lat:43.6429495,lon:3.8763736},{lat:43.6429397,lon:3.8765637},{lat:43.6429372,lon:3.8767479},{lat:43.6429373,lon:3.8767722}],[{lat:43.6421835,lon:3.883401},{lat:43.6421015,lon:3.8834147},{lat:43.6420454,lon:3.8834108},{lat:43.6419463,lon:3.8834001},{lat:43.6417807,lon:3.8834023},{lat:43.6416382,lon:3.8833982},{lat:43.6415472,lon:3.883408},{lat:43.6414806,lon:3.8834445},{lat:43.6413788,lon:3.8835456},{lat:43.64129,lon:3.8836318},{lat:43.6412095,lon:3.8836494},{lat:43.6411159,lon:3.8836594},{lat:43.6410631,lon:3.8836528},{lat:43.6410439,lon:3.8836196},{lat:43.6410463,lon:3.8835467},{lat:43.6410515,lon:3.8834897},{lat:43.6410415,lon:3.8834074},{lat:43.6410343,lon:3.8833279},{lat:43.6410487,lon:3.8832615},{lat:43.6410683,lon:3.8831822},{lat:43.6410679,lon:3.8831057},{lat:43.6410607,lon:3.8830626},{lat:43.6410502,lon:3.8829818},{lat:43.6410009,lon:3.8828138},{lat:43.6409624,lon:3.8827444},{lat:43.6409408,lon:3.8826913},{lat:43.6409411,lon:3.8826075},{lat:43.6409236,lon:3.882534},{lat:43.6408865,lon:3.8824751},{lat:43.6408599,lon:3.8823725},{lat:43.6408544,lon:3.8821476},{lat:43.6408341,lon:3.8818859},{lat:43.6407941,lon:3.8816952},{lat:43.6408496,lon:3.8815277},{lat:43.640888,lon:3.8813752},{lat:43.6409408,lon:3.8811994},{lat:43.6409719,lon:3.8810934},{lat:43.6410151,lon:3.8810403},{lat:43.6411279,lon:3.8809541},{lat:43.6412479,lon:3.880858},{lat:43.6412814,lon:3.8808381},{lat:43.6413798,lon:3.8808248},{lat:43.6414734,lon:3.8808116},{lat:43.6415816,lon:3.8808579},{lat:43.6416725,lon:3.8809375},{lat:43.6417733,lon:3.8810304},{lat:43.6417932,lon:3.881049},{lat:43.641862,lon:3.8811133},{lat:43.6419484,lon:3.8811862},{lat:43.6420484,lon:3.8812014}],[{lat:43.6429794,lon:3.8742587},{lat:43.6431385,lon:3.8742821},{lat:43.6432014,lon:3.8742782},{lat:43.6434653,lon:3.8743066},{lat:43.6435031,lon:3.8743018}],[{lat:43.6410679,lon:3.8831057},{lat:43.6411155,lon:3.8831448},{lat:43.6411543,lon:3.8832612},{lat:43.6411513,lon:3.8833513},{lat:43.6411233,lon:3.8834256},{lat:43.6410982,lon:3.8834595},{lat:43.6410515,lon:3.8834897}],[{lat:43.6412639,lon:3.8739463},{lat:43.6412909,lon:3.8741279},{lat:43.6413007,lon:3.8742756},{lat:43.6413044,lon:3.8743978},{lat:43.641313,lon:3.8745319},{lat:43.6413265,lon:3.8746677},{lat:43.6413781,lon:3.8748442},{lat:43.6414297,lon:3.8749868},{lat:43.6415133,lon:3.8752007},{lat:43.6416066,lon:3.8754078},{lat:43.6417036,lon:3.8756114},{lat:43.641797,lon:3.8758219},{lat:43.6418351,lon:3.8759204},{lat:43.641937,lon:3.8762072},{lat:43.6420353,lon:3.8764737},{lat:43.6421537,lon:3.8768084}],[{lat:43.6411468,lon:3.877184},{lat:43.6411708,lon:3.8772857},{lat:43.6411708,lon:3.8773644},{lat:43.6411798,lon:3.8774639},{lat:43.6411768,lon:3.8775965},{lat:43.6411768,lon:3.8777125},{lat:43.6411798,lon:3.8777954},{lat:43.6412128,lon:3.8779114},{lat:43.6412398,lon:3.8780441},{lat:43.6412608,lon:3.8781435},{lat:43.6413147,lon:3.8782803},{lat:43.6413657,lon:3.8783922},{lat:43.6414077,lon:3.8784668},{lat:43.6414407,lon:3.8785786},{lat:43.6414518,lon:3.8786553},{lat:43.6414587,lon:3.8787154},{lat:43.6414826,lon:3.8788479},{lat:43.6415217,lon:3.8790262},{lat:43.6415374,lon:3.8791861},{lat:43.641548,lon:3.8792429},{lat:43.6415786,lon:3.8792997},{lat:43.6416026,lon:3.8794365},{lat:43.6416146,lon:3.8795732},{lat:43.6416266,lon:3.8797846},{lat:43.6416296,lon:3.8799213},{lat:43.6416266,lon:3.8801161},{lat:43.6416356,lon:3.8804228},{lat:43.6416116,lon:3.8805678},{lat:43.6416026,lon:3.8806631},{lat:43.6415816,lon:3.8808579}],[{lat:43.6433709,lon:3.879142},{lat:43.6434237,lon:3.8792831},{lat:43.6435767,lon:3.8798145},{lat:43.6436304,lon:3.8800437},{lat:43.643648,lon:3.8802397}],[{lat:43.6436997,lon:3.8769791},{lat:43.6436086,lon:3.8769721},{lat:43.6434992,lon:3.8769432},{lat:43.6434133,lon:3.8769212},{lat:43.6433187,lon:3.8768618},{lat:43.6431995,lon:3.8767803},{lat:43.6431099,lon:3.8767752},{lat:43.6429373,lon:3.8767722},{lat:43.642804,lon:3.8767888},{lat:43.6427094,lon:3.8767854},{lat:43.6425945,lon:3.8768128},{lat:43.6425018,lon:3.8767837},{lat:43.6424257,lon:3.8767582},{lat:43.6423581,lon:3.8767463},{lat:43.6422893,lon:3.8767565},{lat:43.6422144,lon:3.8767718},{lat:43.6421537,lon:3.8768084}],[{lat:43.6396766,lon:3.8748536},{lat:43.6397391,lon:3.8748616},{lat:43.6398251,lon:3.8748658},{lat:43.6399249,lon:3.8748913},{lat:43.6400217,lon:3.8749252},{lat:43.6400539,lon:3.8749677},{lat:43.6400831,lon:3.8750101},{lat:43.64012,lon:3.8750334},{lat:43.6401645,lon:3.8750716},{lat:43.6402198,lon:3.8751332},{lat:43.6402459,lon:3.8751798},{lat:43.6403748,lon:3.8753008},{lat:43.6404685,lon:3.875392},{lat:43.6405484,lon:3.8754833},{lat:43.640642,lon:3.8755936},{lat:43.6407446,lon:3.8756754}],[{lat:43.6390077,lon:3.8761072},{lat:43.6390251,lon:3.8761357},{lat:43.6390496,lon:3.8761889}],[{lat:43.6439222,lon:3.8786301},{lat:43.6438725,lon:3.8784817},{lat:43.6438622,lon:3.8784511},{lat:43.6438094,lon:3.8783052},{lat:43.6437638,lon:3.878219},{lat:43.6436727,lon:3.8781228},{lat:43.6435863,lon:3.8780466},{lat:43.6435351,lon:3.8780177},{lat:43.6434688,lon:3.8779803},{lat:43.6433944,lon:3.8779339},{lat:43.6433497,lon:3.8779109},{lat:43.643306,lon:3.8779344},{lat:43.6432576,lon:3.8779339},{lat:43.6431521,lon:3.8779836},{lat:43.6430345,lon:3.8780366},{lat:43.6429404,lon:3.8780778},{lat:43.6428657,lon:3.8781418},{lat:43.6428073,lon:3.8782099},{lat:43.6427746,lon:3.8782408}],[{lat:43.6424693,lon:3.8776669},{lat:43.642537,lon:3.8776279},{lat:43.6426163,lon:3.8775463}],[{lat:43.6396989,lon:3.8750315},{lat:43.6396766,lon:3.8748536},{lat:43.6396563,lon:3.8746964},{lat:43.6396724,lon:3.8744261},{lat:43.6397023,lon:3.874397},{lat:43.6397342,lon:3.8743289},{lat:43.6397691,lon:3.8742444},{lat:43.63982,lon:3.8740979},{lat:43.6398727,lon:3.873952},{lat:43.6399322,lon:3.8737849},{lat:43.639961,lon:3.873716},{lat:43.6400261,lon:3.8736793},{lat:43.6400634,lon:3.8736844},{lat:43.640126,lon:3.8737611},{lat:43.6401932,lon:3.8738433},{lat:43.6402137,lon:3.8738922},{lat:43.6402373,lon:3.8739759},{lat:43.6402992,lon:3.8740146},{lat:43.6403424,lon:3.8741001},{lat:43.6403736,lon:3.8741536},{lat:43.6405061,lon:3.8743074},{lat:43.6405579,lon:3.8743711},{lat:43.640675,lon:3.8744162},{lat:43.6408343,lon:3.8744453},{lat:43.6409226,lon:3.8744559},{lat:43.640959,lon:3.874448},{lat:43.6409917,lon:3.8744162},{lat:43.6410166,lon:3.8743339},{lat:43.641055,lon:3.8741828},{lat:43.6410723,lon:3.8741165},{lat:43.6411049,lon:3.8740687},{lat:43.6411644,lon:3.874013},{lat:43.641222,lon:3.87396},{lat:43.6412639,lon:3.8739463}],[{lat:43.6435031,lon:3.8743018},{lat:43.6437142,lon:3.874549},{lat:43.6439618,lon:3.8748145},{lat:43.644251,lon:3.8751947},{lat:43.6443179,lon:3.8752326},{lat:43.6444323,lon:3.8753375},{lat:43.6444845,lon:3.8754015}],[{lat:43.6430716,lon:3.8790688},{lat:43.6431477,lon:3.8791372},{lat:43.6432504,lon:3.8791451},{lat:43.6433709,lon:3.879142},{lat:43.6434402,lon:3.8790948},{lat:43.6434737,lon:3.878989},{lat:43.643477,lon:3.8788668},{lat:43.643513,lon:3.8787337},{lat:43.6436028,lon:3.8786159},{lat:43.6436969,lon:3.8785667},{lat:43.6438725,lon:3.8784817}],[{lat:43.6436997,lon:3.8769791},{lat:43.6438514,lon:3.8770265},{lat:43.6439634,lon:3.8770713},{lat:43.6440705,lon:3.8771555},{lat:43.6441816,lon:3.8772709},{lat:43.6442464,lon:3.8773361},{lat:43.6443164,lon:3.8774581},{lat:43.6443824,lon:3.8775776},{lat:43.6444534,lon:3.8777018},{lat:43.6444993,lon:3.8777678},{lat:43.6445308,lon:3.8778269},{lat:43.644561,lon:3.8779251},{lat:43.6445721,lon:3.8779709},{lat:43.6446076,lon:3.8780943},{lat:43.6446479,lon:3.8783449},{lat:43.6446781,lon:3.8784821},{lat:43.6447256,lon:3.8786516},{lat:43.6447434,lon:3.8787254},{lat:43.6447802,lon:3.8787801},{lat:43.6448527,lon:3.8788398},{lat:43.6449253,lon:3.8788624},{lat:43.6450125,lon:3.87888},{lat:43.6450924,lon:3.8788373},{lat:43.645176,lon:3.8787545},{lat:43.6452486,lon:3.8786516},{lat:43.6453103,lon:3.8785663},{lat:43.6453812,lon:3.878476},{lat:43.6454066,lon:3.8784709},{lat:43.6454425,lon:3.8784791},{lat:43.6454987,lon:3.8785204}],[{lat:43.6395091,lon:3.8738288},{lat:43.6395541,lon:3.8739774},{lat:43.6396166,lon:3.8740919},{lat:43.6396355,lon:3.8741862},{lat:43.6396724,lon:3.8744261}],[{lat:43.6405322,lon:3.8788815},{lat:43.6405695,lon:3.8787776},{lat:43.6406145,lon:3.8787309},{lat:43.640682,lon:3.8786636},{lat:43.6407682,lon:3.8786014},{lat:43.6408506,lon:3.8785445},{lat:43.6409181,lon:3.8785134},{lat:43.6410381,lon:3.8784457},{lat:43.6411131,lon:3.8784616},{lat:43.6411805,lon:3.8784978},{lat:43.6412255,lon:3.8785341},{lat:43.6413267,lon:3.8785704},{lat:43.6413942,lon:3.8786222},{lat:43.6414518,lon:3.8786553},{lat:43.6414992,lon:3.8786843},{lat:43.6416041,lon:3.8787309},{lat:43.6417054,lon:3.8787827},{lat:43.6417991,lon:3.8788138},{lat:43.6418853,lon:3.8788345},{lat:43.6419237,lon:3.8788246},{lat:43.6419693,lon:3.8787881},{lat:43.6420484,lon:3.8787086},{lat:43.6420724,lon:3.8786456},{lat:43.6421276,lon:3.8785759},{lat:43.642178,lon:3.8785262},{lat:43.6422548,lon:3.8784997},{lat:43.6423723,lon:3.878503}],[{lat:43.6438278,lon:3.8753033},{lat:43.6438174,lon:3.875383},{lat:43.6439212,lon:3.875497}],[{lat:43.6427675,lon:3.8787489},{lat:43.6428356,lon:3.8788197},{lat:43.6429375,lon:3.8789597},{lat:43.6430716,lon:3.8790688},{lat:43.64308,lon:3.8791697},{lat:43.6431475,lon:3.8796179},{lat:43.6431753,lon:3.8798766},{lat:43.6431315,lon:3.8805185},{lat:43.6429431,lon:3.8807407},{lat:43.6428672,lon:3.8808844},{lat:43.6428019,lon:3.8810203},{lat:43.6428037,lon:3.8810879},{lat:43.642873,lon:3.8811983},{lat:43.6429775,lon:3.8812835},{lat:43.6430298,lon:3.8813342},{lat:43.6430335,lon:3.8814517},{lat:43.6430011,lon:3.8815719},{lat:43.6429804,lon:3.8816698},{lat:43.6429838,lon:3.8818388},{lat:43.642968,lon:3.8819239},{lat:43.6429675,lon:3.882146},{lat:43.6429535,lon:3.882245},{lat:43.6428169,lon:3.8823766},{lat:43.6427111,lon:3.8824588}],[{lat:43.6445302,lon:3.8821807},{lat:43.6445473,lon:3.8822109},{lat:43.6445972,lon:3.8822292},{lat:43.6446299,lon:3.882292},{lat:43.6445852,lon:3.8823721},{lat:43.6445236,lon:3.8823786},{lat:43.6445143,lon:3.8822843},{lat:43.6445227,lon:3.8822158},{lat:43.6445302,lon:3.8821807},{lat:43.6444993,lon:3.8820596},{lat:43.6444748,lon:3.8819714},{lat:43.6444535,lon:3.8818921}],[{lat:43.6398105,lon:3.8773804},{lat:43.6398501,lon:3.8774053},{lat:43.6399688,lon:3.8774362},{lat:43.6400535,lon:3.8774978},{lat:43.6401204,lon:3.8775659},{lat:43.640222,lon:3.8776429},{lat:43.6403383,lon:3.8777458},{lat:43.6404233,lon:3.8778141},{lat:43.6405672,lon:3.8779298},{lat:43.6406368,lon:3.878016},{lat:43.6406992,lon:3.8780956},{lat:43.6408263,lon:3.8782348},{lat:43.6409535,lon:3.8783641},{lat:43.6410381,lon:3.8784457}],[{lat:43.6412639,lon:3.8739463},{lat:43.6412712,lon:3.8736559},{lat:43.6412637,lon:3.8735684},{lat:43.6412302,lon:3.873481},{lat:43.64126,lon:3.8734089},{lat:43.6413345,lon:3.8732906},{lat:43.6414127,lon:3.873234},{lat:43.6414871,lon:3.8731311},{lat:43.6415318,lon:3.8730488},{lat:43.6415951,lon:3.8729665},{lat:43.6416621,lon:3.8729305},{lat:43.6417738,lon:3.8728996},{lat:43.6419041,lon:3.8729562},{lat:43.6420382,lon:3.8730539},{lat:43.6421759,lon:3.8731517},{lat:43.6422839,lon:3.8732855},{lat:43.6423547,lon:3.8734861},{lat:43.642377,lon:3.873553},{lat:43.6423807,lon:3.8736662},{lat:43.642418,lon:3.8737897},{lat:43.6424775,lon:3.8739183},{lat:43.6425483,lon:3.8739749},{lat:43.6426414,lon:3.8740367},{lat:43.6427121,lon:3.8740727},{lat:43.6427967,lon:3.8741128},{lat:43.6428424,lon:3.8741344},{lat:43.6428711,lon:3.8741642},{lat:43.6429794,lon:3.8742587},{lat:43.6430124,lon:3.8743177},{lat:43.643078,lon:3.8744383},{lat:43.6431232,lon:3.8744827},{lat:43.6431695,lon:3.8746323},{lat:43.6432386,lon:3.8748127},{lat:43.6433307,lon:3.8749559},{lat:43.6433787,lon:3.875001},{lat:43.6436628,lon:3.8752158},{lat:43.6438278,lon:3.8753033},{lat:43.6439372,lon:3.8753484},{lat:43.6440466,lon:3.87542},{lat:43.6440984,lon:3.8754519},{lat:43.6442136,lon:3.875489},{lat:43.6442942,lon:3.8755341},{lat:43.6443844,lon:3.8756402},{lat:43.6444036,lon:3.8757277},{lat:43.6444036,lon:3.8758064},{lat:43.6444036,lon:3.8758152},{lat:43.6443921,lon:3.8759478},{lat:43.6443863,lon:3.8760672},{lat:43.6443921,lon:3.8763244},{lat:43.6444017,lon:3.8763987},{lat:43.6444324,lon:3.8765393},{lat:43.6444324,lon:3.8766135},{lat:43.6444055,lon:3.87677},{lat:43.6444055,lon:3.8768337},{lat:43.6444324,lon:3.8769689},{lat:43.6444765,lon:3.8771281},{lat:43.6445207,lon:3.8773164},{lat:43.6445475,lon:3.8775153},{lat:43.644561,lon:3.8776824},{lat:43.644561,lon:3.8779251},{lat:43.644561,lon:3.8779529},{lat:43.6445552,lon:3.8781545},{lat:43.6445518,lon:3.8784198},{lat:43.6444292,lon:3.8787917},{lat:43.6443972,lon:3.8788535},{lat:43.6443459,lon:3.879071},{lat:43.6443085,lon:3.8791565},{lat:43.644284,lon:3.8792326},{lat:43.6442722,lon:3.879386}],[{lat:43.6411883,lon:3.8873625},{lat:43.6412451,lon:3.8870843},{lat:43.6412726,lon:3.8869507},{lat:43.6413253,lon:3.8867725},{lat:43.6414047,lon:3.8865704},{lat:43.6414738,lon:3.8864053},{lat:43.6415297,lon:3.8862598},{lat:43.6415918,lon:3.8861229},{lat:43.6416845,lon:3.8859491},{lat:43.6417325,lon:3.8858448},{lat:43.6417718,lon:3.8857046},{lat:43.641815,lon:3.8855189},{lat:43.6418693,lon:3.885344},{lat:43.6419133,lon:3.8851832},{lat:43.6419463,lon:3.885043},{lat:43.641988,lon:3.8848649},{lat:43.6420352,lon:3.8846737},{lat:43.6420855,lon:3.8845129},{lat:43.6421271,lon:3.8843315},{lat:43.6421751,lon:3.8840925},{lat:43.6422042,lon:3.8839187},{lat:43.6422317,lon:3.8837503},{lat:43.6422576,lon:3.8835797},{lat:43.6422663,lon:3.883495},{lat:43.6422753,lon:3.8834443}],[{lat:43.6445856,lon:3.8817477},{lat:43.6444839,lon:3.8818724},{lat:43.6444535,lon:3.8818921},{lat:43.6444086,lon:3.8819},{lat:43.6443534,lon:3.8818491},{lat:43.6442797,lon:3.8817706},{lat:43.644236,lon:3.8816879},{lat:43.6442219,lon:3.8818373},{lat:43.6442641,lon:3.8820032},{lat:43.6443035,lon:3.8820564},{lat:43.6443502,lon:3.8820754},{lat:43.644407,lon:3.8819626},{lat:43.6444535,lon:3.8818921}],[{lat:43.6389674,lon:3.8756984},{lat:43.638959,lon:3.8757968},{lat:43.6390531,lon:3.8759841},{lat:43.6390916,lon:3.8760855},{lat:43.6390894,lon:3.8761356},{lat:43.639102,lon:3.8762011},{lat:43.6390895,lon:3.8762649}],[{lat:43.6391768,lon:3.8764575},{lat:43.6391481,lon:3.8765575},{lat:43.6391209,lon:3.8765878},{lat:43.6390795,lon:3.8766108},{lat:43.6390557,lon:3.8766279},{lat:43.6390333,lon:3.8766628},{lat:43.6390115,lon:3.876723},{lat:43.6389817,lon:3.8767713},{lat:43.6391143,lon:3.8772224},{lat:43.6391537,lon:3.8773034},{lat:43.6392278,lon:3.8773737},{lat:43.6393048,lon:3.8773957},{lat:43.6393789,lon:3.8773857},{lat:43.6394428,lon:3.8773696},{lat:43.6395329,lon:3.8773154},{lat:43.6395924,lon:3.8773034},{lat:43.6396346,lon:3.8772813},{lat:43.6396651,lon:3.8772472},{lat:43.6396753,lon:3.877193},{lat:43.6396781,lon:3.8771446}],[{lat:43.6440584,lon:3.8789904},{lat:43.6442079,lon:3.8789212},{lat:43.6443035,lon:3.8788631},{lat:43.6444292,lon:3.8787917}],[{lat:43.642551,lon:3.8804485},{lat:43.6424912,lon:3.8804485},{lat:43.6424313,lon:3.8804337},{lat:43.6423929,lon:3.8804231},{lat:43.6423315,lon:3.8804209},{lat:43.6422881,lon:3.8804563},{lat:43.6422593,lon:3.880404},{lat:43.6422305,lon:3.8803947}],[{lat:43.6403424,lon:3.8741001},{lat:43.640359,lon:3.8742914},{lat:43.6404479,lon:3.8745424},{lat:43.640556,lon:3.8748734},{lat:43.640614,lon:3.8751083},{lat:43.6406836,lon:3.8753646},{lat:43.6407338,lon:3.8755728},{lat:43.6407446,lon:3.8756754},{lat:43.6407686,lon:3.8757971},{lat:43.6407989,lon:3.8758573},{lat:43.6409027,lon:3.8759735},{lat:43.6410387,lon:3.8761614},{lat:43.6411451,lon:3.8763494},{lat:43.6413033,lon:3.8765373},{lat:43.6413726,lon:3.8766373},{lat:43.6414406,lon:3.8766928},{lat:43.6415086,lon:3.8767782},{lat:43.6415673,lon:3.8768423},{lat:43.6416967,lon:3.8768919}],[{lat:43.6394439,lon:3.8756697},{lat:43.6394367,lon:3.8756683},{lat:43.6393863,lon:3.8756779},{lat:43.6393421,lon:3.8757014},{lat:43.6392746,lon:3.8757549},{lat:43.6392085,lon:3.8757754},{lat:43.6391686,lon:3.8757956},{lat:43.6391293,lon:3.8758297},{lat:43.6390834,lon:3.8758024},{lat:43.6389674,lon:3.8756984},{lat:43.6389355,lon:3.8756479},{lat:43.6389024,lon:3.875614},{lat:43.6388581,lon:3.8756072},{lat:43.6388164,lon:3.8756394},{lat:43.6388031,lon:3.8757022},{lat:43.6387967,lon:3.8757532},{lat:43.638789,lon:3.8759033},{lat:43.6387943,lon:3.8759932},{lat:43.6388151,lon:3.8760672},{lat:43.6388446,lon:3.8761436},{lat:43.6388766,lon:3.8761826},{lat:43.638934,lon:3.8762057},{lat:43.639,lon:3.8762},{lat:43.6390496,lon:3.8761889},{lat:43.6390895,lon:3.8762649},{lat:43.6391031,lon:3.8763262},{lat:43.6391358,lon:3.8763931},{lat:43.6391768,lon:3.8764575},{lat:43.6392623,lon:3.8764237},{lat:43.6393077,lon:3.8764118},{lat:43.6393397,lon:3.8764118},{lat:43.6393692,lon:3.8764321},{lat:43.6394109,lon:3.876444},{lat:43.6394641,lon:3.8764536},{lat:43.6394957,lon:3.8764574}],[{lat:43.6388031,lon:3.8757022},{lat:43.6388351,lon:3.8757871}],[{lat:43.6435031,lon:3.8743018},{lat:43.6435953,lon:3.87429},{lat:43.6437426,lon:3.8741996},{lat:43.6437659,lon:3.874163},{lat:43.6437578,lon:3.8741105},{lat:43.6436448,lon:3.8739578},{lat:43.643483,lon:3.8737428},{lat:43.6434589,lon:3.8736778},{lat:43.6434326,lon:3.8733137},{lat:43.643433,lon:3.8732298},{lat:43.6434806,lon:3.873155},{lat:43.6434889,lon:3.8730873},{lat:43.6434603,lon:3.8730284},{lat:43.6433098,lon:3.8729461},{lat:43.6432652,lon:3.8729269},{lat:43.64318,lon:3.8729093},{lat:43.6431326,lon:3.8730045},{lat:43.6430681,lon:3.8730614}],[{lat:43.6444845,lon:3.8754015},{lat:43.6444909,lon:3.8754467},{lat:43.6444665,lon:3.8755248},{lat:43.6443844,lon:3.8756402}]],limiteZoo=[{lat:43.6401347,lon:3.878581},{lat:43.6390122,lon:3.8778191},{lat:43.6388921,lon:3.8769256},{lat:43.6388579,lon:3.876683},{lat:43.6388505,lon:3.8763913},{lat:43.6388312,lon:3.8762991},{lat:43.6387786,lon:3.8760699},{lat:43.6386942,lon:3.8758805},{lat:43.6386422,lon:3.8756929},{lat:43.6385984,lon:3.8754118},{lat:43.638597,lon:3.8753632},{lat:43.6385937,lon:3.8749886},{lat:43.6385951,lon:3.874905},{lat:43.6386245,lon:3.8746709},{lat:43.6386499,lon:3.8745378},{lat:43.6386591,lon:3.8742072},{lat:43.6386168,lon:3.8740008},{lat:43.6386101,lon:3.8739341},{lat:43.6386262,lon:3.8738766},{lat:43.6389611,lon:3.87373},{lat:43.6393668,lon:3.8735648},{lat:43.6396834,lon:3.8734386},{lat:43.639765,lon:3.8734159},{lat:43.6398446,lon:3.8733463},{lat:43.639865,lon:3.8733381},{lat:43.6398743,lon:3.873336},{lat:43.6399091,lon:3.8733202},{lat:43.6399598,lon:3.8733033},{lat:43.6399828,lon:3.8732969},{lat:43.6400003,lon:3.8732852},{lat:43.6400123,lon:3.8732823},{lat:43.6400123,lon:3.8732653},{lat:43.6400204,lon:3.8732291},{lat:43.6400328,lon:3.8731951},{lat:43.640049,lon:3.8731704},{lat:43.6400574,lon:3.8731462},{lat:43.6400592,lon:3.8731263},{lat:43.6400621,lon:3.8731049},{lat:43.6400723,lon:3.8730897},{lat:43.6403313,lon:3.8728589},{lat:43.6403379,lon:3.8728538},{lat:43.6403439,lon:3.8728523},{lat:43.6403486,lon:3.8728542},{lat:43.640353,lon:3.8728625},{lat:43.6403715,lon:3.8728494},{lat:43.6403885,lon:3.8728341},{lat:43.6403851,lon:3.8728288},{lat:43.6403842,lon:3.8728208},{lat:43.6403854,lon:3.8728115},{lat:43.6403908,lon:3.8728037},{lat:43.6404171,lon:3.8727811},{lat:43.6404509,lon:3.8727521},{lat:43.6405254,lon:3.8726882},{lat:43.6406105,lon:3.8726152},{lat:43.6406788,lon:3.8725566},{lat:43.6410422,lon:3.872249},{lat:43.64135,lon:3.8719883},{lat:43.642044,lon:3.8714709},{lat:43.6437086,lon:3.871428},{lat:43.644055,lon:3.8707816},{lat:43.6442103,lon:3.8707709},{lat:43.6442491,lon:3.871251},{lat:43.6444218,lon:3.8719296},{lat:43.6445905,lon:3.8722238},{lat:43.6449928,lon:3.8724144},{lat:43.6448383,lon:3.8730477},{lat:43.6450055,lon:3.8736873},{lat:43.6451649,lon:3.8742833},{lat:43.6452736,lon:3.8747208},{lat:43.645079,lon:3.8759388},{lat:43.6445036,lon:3.8762088},{lat:43.6444702,lon:3.8764339},{lat:43.6449384,lon:3.8768783},{lat:43.645311,lon:3.8776078},{lat:43.6454601,lon:3.8784919},{lat:43.6456464,lon:3.8800797},{lat:43.6463995,lon:3.880408},{lat:43.6459757,lon:3.8819089},{lat:43.6452344,lon:3.8846396},{lat:43.6438702,lon:3.8854748},{lat:43.6436054,lon:3.8860238},{lat:43.6435149,lon:3.8864069},{lat:43.6430952,lon:3.88712},{lat:43.6418965,lon:3.8881757},{lat:43.6416252,lon:3.8891189},{lat:43.6412956,lon:3.8894825},{lat:43.6411179,lon:3.889738},{lat:43.6410672,lon:3.8898555},{lat:43.6409159,lon:3.8899916},{lat:43.6408148,lon:3.8899982},{lat:43.6406991,lon:3.8899835},{lat:43.6406467,lon:3.8899794},{lat:43.6406573,lon:3.8896385},{lat:43.640664,lon:3.8892935},{lat:43.6406631,lon:3.8887262},{lat:43.6406682,lon:3.8877233},{lat:43.6406175,lon:3.88716},{lat:43.6405578,lon:3.8864227},{lat:43.6404493,lon:3.8859464},{lat:43.6403006,lon:3.885396},{lat:43.6401051,lon:3.884543},{lat:43.6400247,lon:3.883883},{lat:43.6399516,lon:3.8834138},{lat:43.6400882,lon:3.883005},{lat:43.6408523,lon:3.8832521},{lat:43.6401347,lon:3.878581}];

// Site.js
function parseBrevesZoo(t){for(var e=[],i=t.indexOf('<div class="breveListe">'),n=i,o=0;5>o;o++)n=t.indexOf("</div>",n+6);var s=document.createElement("div");s.innerHTML=t.substring(i,n+6);for(var a=s.firstChild;a;){var r="";if(1==a.nodeType){for(var l=a.firstChild;l;){if(1==l.nodeType){if("H5"==l.nodeName&&l.hasChildNodes())var h=l.firstChild.nodeValue.replace(/^\s+/g,"").replace(/\s+$/g,"");if("P"==l.nodeName&&"date"==l.getAttribute("class")){if(l.hasChildNodes())var d=l.firstChild.nodeValue.replace(/^\s+/g,"").replace(/\s+$/g,"").substring(3)}else if("P"==l.nodeName&&l.hasChildNodes())for(var c=l.firstChild;c;)1==c.nodeType?"STRONG"==c.nodeName?c.hasChildNodes()&&(r+="<strong>"+c.firstChild.nodeValue+"</strong>"):"A"==c.nodeName&&c.hasChildNodes()&&(r+='<a href="'+c.getAttribute("href")+'">'+c.firstChild.nodeValue+"</a>"):r+=c.nodeValue.replace(/"/g,""),c=c.nextSibling}l=l.nextSibling}e.push({titre:h,date:d,texte:r})}a=a.nextSibling}return e}function parseUneZoo(t){var e={},i=t.indexOf('<div class="breveAccueilImage">');i=t.indexOf('src="',i);var n=i+5;n=t.indexOf('"',n);var o="http://zoo.montpellier.fr"+t.substring(i+5,n);i=t.indexOf("<h5>",n),n=i;for(var s=0;2>s;s++)n=t.indexOf("</div>",n+6);var a=document.createElement("div");a.innerHTML="<div>"+t.substring(i,n+6);for(var r=a.firstChild;r;){var l="";if(1==r.nodeType){for(var h=r.firstChild;h;){if(1==h.nodeType){if("H5"==h.nodeName&&h.hasChildNodes())for(var d=h.firstChild;d;){if(1==d.nodeType){if("A"==d.nodeName&&d.hasChildNodes())var c=d.getAttribute("href"),u=d.firstChild.nodeValue.replace(/^\s+/g,"").replace(/\s+$/g,"")}else var u=d.nodeValue.replace(/^\s+/g,"").replace(/\s+$/g,"");d=d.nextSibling}if("P"==h.nodeName&&h.hasChildNodes())for(var d=h.firstChild;d;)1==d.nodeType?"STRONG"==d.nodeName?d.hasChildNodes()&&(l+="<strong>"+d.firstChild.nodeValue+"</strong>"):"A"==d.nodeName&&d.hasChildNodes()&&(l+='<a href="'+d.getAttribute("href")+'">'+d.firstChild.nodeValue+"</a>"):l+=d.nodeValue.replace(/"/g,""),d=d.nextSibling}h=h.nextSibling}e={titre:u,lien:c,image:o,texte:l}}r=r.nextSibling}return e}

// App.js
enyo.kind({name:"App",classes:"onyx",published:{map:!1},components:[{kind:"Signals",ondeviceready:"deviceReady"},{kind:"WebService",name:"wsAnimaux",url:"http://cyrilmoral.es/animaux.php",onResponse:"animauxResponse",onError:"wsAnimauxError"},{kind:"WebService",name:"wsEnclos",url:"http://cyrilmoral.es/enclos.php",onResponse:"enclosResponse",onError:"wsEnclosError"},{kind:"WebService",name:"wsPoi",url:"http://cyrilmoral.es/poi.php",onResponse:"poiResponse",onError:"wsPoiError"},{kind:"FittableRows",classes:"enyo-fit",components:[{kind:"Panels",name:"mainPanels",classes:"panels enyo-fit",fit:!0,realtimeFit:!1,arrangerKind:"CollapsingArranger",onTransitionFinish:"updateMap",components:[{kind:"MenuPanel",name:"menu"},{kind:"Panels",name:"contentPanels",classes:"panels enyo-fit",arrangerKind:"CardArranger",draggable:!1,components:[{kind:"MapPanel",name:"map",onLoaded:"mapLoaded"},{kind:"Panels",name:"cardPanels",classes:"panels enyo-fit",arrangerKind:"CardArranger",draggable:!1,components:[{kind:"CardPanel",name:"card"},{kind:"ImagePanel",name:"image"}]}]}]}]},{kind:"onyx.Popup",name:"errorPopup",centered:!0,modal:!1,floating:!0,scrim:!0,classes:"popup-light",components:[{content:"Impossible d'\u00e9tablir la connexion avec la base de donn\u00e9es.",classes:"item-secondary",style:"color: red;"}]}],create:function(){this.inherited(arguments),enyo.zoo={}},rendered:function(){this.inherited(arguments)},deviceReady:function(){},updateMap:function(t,e){"mainPanels"==e.originator.name&&"contentPanels"==t.getControls()[e.toIndex].name&&1==this.map?this.$.map.$.map.invalidateSize(!0):"menuPanels"==e.originator.name&&e.originator.parent.container.$.menuGroupButton.getControls()[e.toIndex].setActive(!0)},mapLoaded:function(){function t(){return!1}this.map=!0,this.$.map.drawZoo(),enyo.ville&&(void 0!==uniTouch&&(document.addEventListener("pinchzoomin",function(){enyo.$.app.$.map.map.zoomIn()}),document.addEventListener("pinchzoomout",function(){enyo.$.app.$.map.map.zoomOut()})),this.$.map.map.touchZoom.enable(),document.onclick=t,this.$.menu.linkDisabled=!0),this.$.wsAnimaux.send(),this.$.wsEnclos.send(),this.$.wsPoi.send()},animauxResponse:function(t,e){enyo.zoo.animaux=e.data.reponse.animaux,enyo.zoo.imagefull=e.data.reponse.path_image_full,localStorage.setItem("animaux",JSON.stringify(e.data.reponse.animaux)),localStorage.setItem("imagefull",JSON.stringify(e.data.reponse.path_image_full)),this.$.menu.setAnimalList()},enclosResponse:function(t,e){enyo.zoo.enclos=e.data.reponse,localStorage.setItem("enclos",JSON.stringify(e.data.reponse)),this.$.map.drawEnclos()},poiResponse:function(t,e){enyo.zoo.poi=e.data.reponse,localStorage.setItem("poi",JSON.stringify(e.data.reponse)),this.$.map.drawPoi()},wsPoiError:function(){enyo.zoo.poi=JSON.parse(localStorage.getItem("poi")),null!==enyo.zoo.poi?this.$.map.drawPoi():this.$.errorPopup.show()},wsAnimauxError:function(){enyo.zoo.animaux=JSON.parse(localStorage.getItem("animaux")),enyo.zoo.imagefull=JSON.parse(localStorage.getItem("imagefull")),null!==enyo.zoo.animaux&&null!=enyo.zoo.imagefull?this.$.menu.setAnimalList():this.$.errorPopup.show()},wsEnclosError:function(){enyo.zoo.enclos=JSON.parse(localStorage.getItem("enclos")),null!==enyo.zoo.enclos?this.$.map.drawEnclos():this.$.errorPopup.show()}});

// Menu.js
enyo.kind({name:"MenuPanel",classes:"onyx enyo-unselectable",events:{onLoaded:""},components:[{kind:"WebService",name:"wsTexte",url:"http://cyrilmoral.es/texte.php",onResponse:"texteResponse",onError:"texteError"},{kind:"WebService",name:"site",url:"http://cyrilmoral.es/sitezoomtp.php",handleAs:"text",onResponse:"siteResponse",onError:"siteError"},{kind:"FittableRows",classes:"enyo-fit",components:[{kind:"onyx.Toolbar",classes:"menu-header",components:[{kind:"Image",src:"assets/logo.png",classes:"menu-header-logo"}]},{kind:"onyx.Toolbar",classes:"menu-group",layoutKind:"FittableColumnsLayout",noStretch:!0,components:[{kind:"Group",name:"menuGroupButton",classes:"menu-group-menu",defaultKind:"onyx.Button",highlander:!0,components:[{kind:"onyx.Button",active:!0,classes:"button menu-group-button",value:0,ontap:"gotoMenuPanel",components:[{kind:"onyx.Icon",classes:"icon",src:"assets/menu-icon-news.png"}]},{kind:"onyx.Button",classes:"button menu-group-button",value:1,ontap:"gotoMenuPanel",components:[{kind:"onyx.Icon",classes:"icon",src:"assets/menu-icon-animals.png"}]},{kind:"onyx.Button",classes:"button menu-group-button",value:2,ontap:"gotoMenuPanel",components:[{kind:"onyx.Icon",classes:"icon",src:"assets/menu-icon-info.png"}]}]},{kind:"onyx.Button",classes:"button menu-group-button",value:"map",ontap:"gotoMapPanel",components:[{kind:"onyx.Icon",classes:"icon",src:"assets/menu-icon-map.png"}]}]},{kind:"Panels",name:"menuPanels",fit:!0,arrangerKind:"CarouselArranger",wrap:!1,classes:"menu-panel menu-panels",components:[{kind:"Scroller",classes:"enyo-fit",components:[{classes:"menu-border",components:[{kind:"onyx.Groupbox",classes:"menu-news-groupbox",components:[{kind:"onyx.GroupboxHeader",content:"\u00c0 la une"},{kind:"FittableRows",components:[{kind:"Image",name:"imageFirstNews",classes:"menu-news-image-first",src:""},{name:"titleFirstNews",classes:"menu-news-title",content:""},{name:"contentFirstNews",classes:"item-secondary",content:""}]}]},{kind:"Repeater",name:"newsList",onSetupItem:"setupNewsItem",components:[{name:"newsDate",classes:"label menu-news-date",content:""},{name:"newsTitle",classes:"menu-news-title",content:""},{name:"newsContent",classes:"item-secondary",content:"",allowHtml:!0}]}]}]},{kind:"FittableRows",classes:"enyo-fit",components:[{kind:"FittableRows",classes:"menu-animal-search",components:[{kind:"onyx.InputDecorator",name:"searchInputContainer",classes:"menu-animal-search-input",showing:!0,components:[{kind:"onyx.Input",style:"width: 100%;",name:"searchInput",value:"",placeholder:"Rechercher",oninput:"animalSearchInput"}]},{kind:"FittableColumns",name:"searchPickerContainer",classes:"menu-animal-search-selection",showing:!0,components:[{content:"Afficher",classes:"label menu-animal-search-selection-label"},{kind:"onyx.PickerDecorator",fit:!0,classes:"menu-animal-search-selection-picker",components:[{},{kind:"onyx.Picker",name:"zonePicker",onSelect:"zoneSelected",components:[{content:"Tous",active:!0}]}]}]}]},{kind:"List",name:"animalList",classes:"menu-animal-list",rowsPerPage:10,fit:!0,multiSelect:!1,onSetupItem:"setupAnimal",components:[{name:"divider",classes:"menu-animal-divider"},{name:"animal",classes:"animal-item",ontap:"animalTap",components:[{kind:"Image",src:"assets/logo2.png",name:"avatar",classes:"animal-icon"},{classes:"animal-text",components:[{name:"name",classes:"animal-name",content:""},{name:"region",classes:"item-secondary",content:""}]}]}]}]},{kind:"Scroller",name:"scrollerInfo",classes:"enyo-fit",components:[{kind:"FittableRows",classes:"item-secondary",components:[{kind:"gts.DividerDrawer",caption:"Venir au zoo",classes:"gts-DividerDrawer",open:!1,components:[{kind:"FittableRows",classes:"info-content",components:[{content:"Vous \u00eates en voiture",classes:"info-name"},{content:"Parc zoologique de Montpellier"},{content:"50, avenue Agropolis"},{content:"34090 Montpellier"},{content:"Un parking gratuit est \u00e0 votre disposition devant l'entr\u00e9e du parc zoologique.",style:"font-weight: bold;"},{tag:"br"},{content:"Vous \u00eates en transports en commun",classes:"info-name"},{content:'Depuis l\'arr\u00eat de Tram "Saint-Eloi" (ligne 1), prendre le bus "La Navette" (ligne 13), direction Universit\u00e9s, et descendre devant l\'entr\u00e9e du parc zoologique (arr\u00eat "zoo").'}]}]},{kind:"gts.DividerDrawer",caption:"Les tarifs",classes:"gts-DividerDrawer",open:!1,components:[{kind:"FittableRows",classes:"info-content",components:[{content:"Le parc zoologique est gratuit !",classes:"info-name"},{content:"Le plan du parc est \u00e0 0,50 \u20ac."}]}]},{kind:"gts.DividerDrawer",caption:"Les horaires",classes:"gts-DividerDrawer",open:!1,components:[{kind:"FittableRows",classes:"info-content",components:[{allowHtml:!0,content:"<table><tr><th>P\u00e9riodes</th><th>Horaires</th></tr><tr><td>Du d\u00e9but des vacances de P\u00e2ques (toutes zones) jusqu'\u00e0 la fin des vacances de Toussaint</td><td>10h - 18h30</td></tr><tr><td>Apr\u00e8s les vacances de Toussaint jusqu'au d\u00e9but des vacances de P\u00e2ques (toutes zones)</td><td>9h - 17h</td></tr></table>"}]}]},{kind:"gts.DividerDrawer",caption:"Se restaurer",classes:"gts-DividerDrawer",open:!1,components:[{kind:"FittableRows",classes:"info-content",components:[{content:"Le restaurant de la serre amazonienne",classes:"info-name"},{content:"Le restaurant l'Amazoone s'\u00e9tend sur deux niveaux. Il permet d'avoir une vue panoramique sur l'ensemble de la serre et plus particuli\u00e8rement sur l'enclos des sakis \u00e0 face blanche et des tamarins. Le restaurant a une capacit\u00e9 de 96 places \u00e0 l'int\u00e9rieur et une terrasse ext\u00e9rieure de 80 places. Contact : 04 67 29 88 35"},{content:"Les tables de pique-nique",classes:"info-name"},{content:"Tout au long de votre parcours dans le parc, vous pourrez profiter de nombreuses tables de pique-nique. Pensez \u00e0 jeter vos d\u00e9chets dans les poubelles et \u00e0 faire le bon tri !"}]}]},{kind:"gts.DividerDrawer",caption:"R\u00e8glement int\u00e9rieur",classes:"gts-DividerDrawer",open:!1,components:[{kind:"FittableRows",classes:"info-content",components:[{content:"Merci de respecter cet espace de nature et le bien-\u00eatre des animaux"},{allowHtml:!0,content:"<ul><li>Ne pas fumer</li><li>Ne pas nourrir les animaux</li><li>Ne pas pratiquer de sport (tricyles pour les enfants autoris\u00e9s)</li><li>Circuler uniquement \u00e0 pied</li><li>Aucun animal n'est autoris\u00e9 \u00e0 entrer, m\u00eame tenu en laisse</li><li>Ne pas jeter vos d\u00e9chets \u00e0 terre</li><li>Ne pas jeter de projectiles sur les animaux</li><li>Rester calme devant les enclos</li><li>Ne pas cueillir la v\u00e9g\u00e9tation</li></ul>"},{content:"Les enfants des groupes scolaires et centres de vacances ou de loisirs doivent imp\u00e9rativement \u00eatre sous surveillance de leurs accompagnateurs et respecter le pr\u00e9c\u00e9dent r\u00e8glement."}]}]},{kind:"gts.DividerDrawer",caption:"Acc\u00e8s handicap\u00e9s",classes:"gts-DividerDrawer",open:!1,components:[{kind:"FittableRows",classes:"info-content",components:[{content:"Le parc zoologique",classes:"info-name"},{allowHtml:!0,content:"Il est accessible \u00e0 moins de 70%. Certaines zones, notamment celles des ours et des lions, sont difficiles d'acc\u00e8s (pente forte).<br />Nous vous proposons ce parcours afin que votre visite soit le plus agr\u00e9able possible.<br />Notez que les zones plates ne sont pas lisses dans tout le parc. Des am\u00e9liorations sont pr\u00e9vues."},{content:"La serre amazonienne",classes:"info-name"},{allowHtml:!0,content:"Elle est totalement \u00e9quip\u00e9e et accessible \u00e0 100%."}]}]}]}]}]},{kind:"onyx.Toolbar",classes:"menu-group",components:[{classes:"menu-toolbar-about",fit:!0,components:[{kind:"onyx.Button",classes:"button",content:"Cr\u00e9dits",ontap:"showPopup",popup:"aboutPopup"}]}]}]},{kind:"onyx.Popup",name:"selectPopup",centered:!1,modal:!1,floating:!0,scrim:!1,classes:"popup-light select-popup",components:[{content:"coucou"}]},{kind:"onyx.Popup",name:"aboutPopup",centered:!0,modal:!0,floating:!0,scrim:!0,classes:"popup-light about-popup",components:[{content:"D\u00e9velopp\u00e9 par Cyril Moral\u00e8s",classes:"item-secondary"},{kind:"onyx.Groupbox",classes:"about-popup-groupbox",components:[{kind:"FittableColumns",fit:!0,value:"http://twitter.com/cyrilmorales",ontap:"openLink",components:[{content:"Twitter",classes:"label",fit:!0},{content:"@cyrilmorales"}]},{kind:"FittableColumns",fit:!0,value:"http://cyrilmoral.es",ontap:"openLink",components:[{content:"Site web",classes:"label",fit:!0},{content:"cyrilmoral.es"}]}]},{content:"En collaboration avec la ville de Montpellier",classes:"item-secondary"},{kind:"Image",src:"assets/montpellier.png",style:"width: 200px; height: 67px;"}]}],create:function(){this.inherited(arguments),enyo.ville?(this.$.searchInputContainer.hide(),this.$.searchPickerContainer.show()):(this.$.searchInputContainer.show(),this.$.searchPickerContainer.hide()),this.$.site.send(),this.$.wsTexte.send()},gotoMenuPanel:function(t){"map"!=t.value?this.$.menuPanels.setIndex(t.value):(this.owner.$.contentPanels.setIndex(0),enyo.Panels.isScreenNarrow()&&this.parent.setIndex(this.parent.index?0:1))},gotoMapPanel:function(){this.owner.$.contentPanels.setIndex(0),enyo.Panels.isScreenNarrow()&&this.parent.setIndex(this.parent.index?0:1)},siteResponse:function(t,e){this.feeds=parseBrevesZoo(e.data);var i=parseUneZoo(e.data);localStorage.setItem("actus",JSON.stringify(this.feeds)),localStorage.setItem("actusUne",JSON.stringify(i)),this.$.imageFirstNews.setSrc(i.image),this.$.titleFirstNews.setContent(i.titre),this.$.contentFirstNews.setContent(i.texte),this.$.newsList.setCount(this.feeds.length>4?4:this.feeds.length)},siteError:function(){this.feeds=JSON.parse(localStorage.getItem("actus"));var t=JSON.parse(localStorage.getItem("actusUne"));null!==this.feeds&&null!==t?(this.$.imageFirstNews.setSrc(t.image),this.$.titleFirstNews.setContent(t.titre),this.$.contentFirstNews.setContent(t.texte),this.$.newsList.setCount(this.feeds.length>4?4:this.feeds.length)):console.log("ajax site error")},texteError:function(){if(enyo.zoo.texte=JSON.parse(localStorage.getItem("texte")),null!==enyo.zoo.texte){var t=[];for(var e in enyo.zoo.texte.zone)t.push({content:enyo.zoo.texte.zone[e].texte});this.$.zonePicker.createComponents(t,{owner:this})}else console.log("ajax texte error")},texteResponse:function(t,e){enyo.zoo.texte=e.data.reponse,localStorage.setItem("texte",JSON.stringify(e.data.reponse));var i=[];for(var n in enyo.zoo.texte.zone)i.push({content:enyo.zoo.texte.zone[n].texte});this.$.zonePicker.createComponents(i,{owner:this})},setupAnimal:function(t,e){var i=e.index,n=this.filter?this.filtered:this.animals,o=n[i];this.$.name.setContent(o.nom),this.$.region.setContent(o.zones),o.images.length>0?this.$.avatar.setSrc(enyo.zoo.imagefull+o.images[0]):this.$.avatar.setSrc("assets/logo2.png");var s=o.nom[0],a=n[i-1],r=s!=(a&&a.nom[0]);this.$.divider.setContent(s),this.$.divider.canGenerate=r,this.$.animal.applyStyle("border-top",r?"none":null)},animalSearchInput:function(t){enyo.job(this.id+":search",enyo.bind(this,"filterAnimalList",t.getValue()),200)},filterAnimalList:function(t){t!=this.filter&&(this.filter=t,this.filtered=this.generateFilteredData(t),this.$.animalList.setCount(this.filtered.length),this.$.animalList.reset())},generateFilteredData:function(t){function e(t){var e=t.replace(/[\u00e0\u00e2\u00e4]/gi,"a");return e=e.replace(/[\u00e9\u00e8\u00ea\u00eb]/gi,"e"),e=e.replace(/[\u00ee\u00ef]/gi,"i"),e=e.replace(/[\u00f4\u00f6]/gi,"o"),e=e.replace(/[\u00f9\u00fb\u00fc]/gi,"u")}for(var i,n=RegExp("^"+e(t),"i"),o=[],s=0;i=this.animals[s];s++)(i.nom.match(n)||i.classe.match(n)||i.zones.match(n))&&o.push(i);return o},sortAnimals:function(){this.animals.sort(function(t,e){return t.nom<e.nom?-1:t.nom>e.nom?1:0})},setAnimalList:function(){this.animals=enyo.zoo.animaux,this.sortAnimals(),this.$.animalList.setCount(this.animals.length),this.$.animalList.reset()},animalTap:function(t,e){var i=this.filter?this.filtered:this.animals;this.owner.$.image.updateImage(i[e.index]),this.owner.$.card.updateCard(i[e.index]),this.owner.$.card.setBack(this),enyo.Panels.isScreenNarrow()&&this.owner.$.mainPanels.setIndex(this.parent.index?0:1),this.owner.$.card.show()},showPopup:function(t){var e=this.$[t.popup];e&&e.show()},openLink:function(t){this.linkDisabled||window.open(t.value,"_blank")},setupNewsItem:function(t,e){var i=e.index,n=this.feeds,o=n[i],s=e.item,a=["Janvier","F\u00e9vrier","Mars","Avril","Mai","Juin","Juillet","Aout","Septembre","Octobre","Novembre","D\u00e9cembre"],r=o.date.split("/");return s?(s.$.newsDate.setContent(r[0]+" "+a[parseInt(r[1],10)-1]+" "+r[2]),s.$.newsTitle.setContent(o.titre),s.$.newsContent.setContent(o.texte),!0):void 0},zoneSelected:function(t,e){var i="Tous"==e.selected.content?"":e.selected.content;this.$.searchInput.setValue(i),this.animalSearchInput(this.$.searchInput)}});

// Map.js
enyo.kind({name:"MapPanel",classes:"wide enyo-unselectable",events:{onLoaded:""},handlers:{onresize:"resized"},components:[{kind:"FittableRows",classes:"enyo-fit",components:[{kind:"Map",name:"map",layer:"bing",bingCredentials:"AqwmKr40FdqD4Ntpo_ik3UOKXqG4uT5niPKJDhXkdNJhDqvwyscuJtWhZ72QVWAI",fit:!0,onLoaded:"setMap"},{kind:"onyx.Toolbar",layoutKind:"FittableColumnsLayout",noStretch:!0,components:[{kind:"onyx.Grabber",name:"grab",ontap:"grabMap"},{kind:"onyx.Button",name:"menu",classes:"button map-toolbar-zoom-button",content:"Menu",ontap:"grabMap",showing:!1,components:[{kind:"onyx.Icon",classes:"icon",src:"assets/accueil.png"}]},{classes:"map-toolbar-group-button",fit:!0,components:[{kind:"onyx.Button",classes:"button map-toolbar-zoom-button",ontap:"btnZoomOut",components:[{kind:"onyx.Icon",classes:"icon",src:"assets/menu-icon-less.png"}]},{kind:"onyx.Button",classes:"button map-toolbar-zoom-button",ontap:"btnZoomIn",components:[{kind:"onyx.Icon",classes:"icon",src:"assets/menu-icon-more.png"}]}]},{kind:"onyx.Button",classes:"button map-toolbar-zoom-button",content:"Options",ontap:"showPopup",popup:"optionsPopup",components:[{kind:"onyx.Icon",classes:"icon",src:"assets/parametres.png"}]}]}]},{kind:"onyx.Popup",name:"optionsPopup",modal:!0,floating:!0,classes:"enyo-unselectable popup-light map-options-popup",components:[{kind:"FittableColumns",fit:!0,components:[{content:"Popup centr\u00e9e",classes:"label map-options-label",fit:!0},{kind:"onyx.Checkbox",name:"centeredCheckbox",classes:"checkbox",checked:!1,onchange:"popupCenteredChanged",disabled:!0}]},{kind:"FittableColumns",fit:!0,components:[{content:"Points d'int\u00e9r\u00eat",classes:"label map-options-label",fit:!0},{kind:"onyx.ToggleButton",name:"poiButton",classes:"map-options-toggle-button",onChange:"poiChanged",onContent:"Oui",offContent:"Non",value:!0,disabled:!0}]},{kind:"FittableColumns",fit:!0,components:[{content:"Parcours",classes:"label map-options-label",fit:!0},{kind:"onyx.ToggleButton",name:"parcoursButton",classes:"map-options-toggle-button",onChange:"wayChanged",onContent:"Oui",offContent:"Non",value:!0,disabled:!0}]},{kind:"FittableColumns",fit:!0,components:[{content:"Carte",classes:"label map-options-map-label",fit:!0},{kind:"onyx.PickerDecorator",components:[{classes:"map-options-map-picker"},{kind:"onyx.Picker",name:"mapPicker",onSelect:"mapSelected",components:[{content:"OpenStreetMap",value:"osm"},{content:"CloudMade",value:"cloudmade"},{content:"WaterColor",value:"watercolor"},{content:"Bing Maps",value:"bing",active:!0}]}]}]}]},{kind:"onyx.Popup",name:"legendPopup",modal:!1,floating:!0,classes:"enyo-unselectable popup-light map-legend-popup",components:[{content:"L\u00e9gende des parcours",classes:"map-legend-popup-title"},{kind:"Scroller",name:"scroller",classes:"map-legend-popup-list",strategyKind:"TouchScrollStrategy",components:[{kind:"Repeater",name:"legendList",onSetupItem:"setupLegendItem",components:[{name:"item",classes:"map-legend-popup-item",onclick:"animalTap",components:[{name:"color",classes:"map-legend-popup-color"},{name:"parcours",content:"",classes:"map-legend-popup-text"}]}]}]}]},{kind:"AnimalPopup",name:"animalPopup"},{kind:"PoiPopup",name:"poiPopup"}],create:function(){this.inherited(arguments),this.resized();for(var t=this.$.mapPicker.components,e=0;t.length>e&&1!=t[e].active;)e++;this.currentLayer=t[e].value},resized:function(){this.$.grab.setShowing(!enyo.Panels.isScreenNarrow()),this.$.menu.setShowing(enyo.Panels.isScreenNarrow())},grabMap:function(){enyo.$.app.$.mainPanels.setIndex(enyo.$.app.$.mainPanels.index?0:1)},btnZoomOut:function(){this.$.map.zoomOut()},btnZoomIn:function(){this.$.map.zoomIn()},setMap:function(){this.map=this.$.map.getMap();var t=new L.LatLngBounds(new L.LatLng(43.634212,3.860836),new L.LatLng(43.650733,3.896198));this.$.map.setMaxBounds(t)},showPopup:function(t){var e=this.$[t.popup];e&&e.show()},showLegend:function(){var t=this.$.legendPopup;t&&t.show()},mapSelected:function(t,e){var i=this.$.map.getMapsLayer();this.$.map.addLayer(i[e.selected.value]),this.$.map.removeLayer(i[this.currentLayer]),this.currentLayer=e.selected.value},wayChanged:function(t){1==t.getValue()?this.$.map.addLayer(this.parcoursGroup):this.$.map.removeLayer(this.parcoursGroup)},poiChanged:function(t){1==t.getValue()?this.$.map.addLayer(this.poiGroup):this.$.map.removeLayer(this.poiGroup)},popupCenteredChanged:function(t){this.$.animalPopup.setCentered(t.getValue()),this.$.poiPopup.setCentered(t.getValue())},drawMap:function(){},drawZoo:function(){for(var t=[],e=0;limiteZoo.length>e;e++)t.push(new L.LatLng(limiteZoo[e].lat,limiteZoo[e].lon));var i=new L.Polygon(t,{fillColor:"brown",stroke:!0,color:"black",opacity:.8,weight:5,fillOpacity:0,clickable:!1});this.$.map.addLayer(i)},drawEnclos:function(){for(var t=0;enyo.zoo.enclos.length>t;t++){for(var e=[],i=0;enyo.zoo.enclos[t].polygone.length>i;i++)e.push(new L.LatLng(enyo.zoo.enclos[t].polygone[i][0],enyo.zoo.enclos[t].polygone[i][1]));var n=new L.Polygon(e,{fillColor:"brown",stroke:!0,color:"brown",opacity:.6,weight:5,fillOpacity:.2});n._leaflet_id="enclos"+enyo.zoo.enclos[t].id,this.$.map.addLayer(n),function(t,e,i){n.on("click",function(n){t.$.animalPopup.setPopup(e,i),t.$.animalPopup.show(n)})}(this,enyo.zoo,t)}},drawParcours:function(){this.parcoursGroup=new L.LayerGroup,this.$.map.addLayer(this.parcoursGroup);for(var t=[],e=0;parcours.length>e;e++){for(var i=[],n=0;parcours[e].length>n;n++)i.push(new L.LatLng(parcours[e][n].lat,parcours[e][n].lon));t.push(i);var o=new L.MultiPolyline(t,{color:"green",weight:3,clickable:!1,opacity:.8});this.parcoursGroup.addLayer(o)}this.$.parcoursButton.setDisabled(!1)},drawPointsDeVue:function(){var t=enyo.zoo.enclos_vue;this.pointsDeVueGroup=new L.LayerGroup,this.$.map.addLayer(this.pointsDeVueGroup);for(var e=0;t.length>e;e++){var i=new L.Circle(new L.LatLng(t[e].lat,t[e].long),2,{fillColor:"red",stroke:!1,fillOpacity:1,clickable:!1});this.pointsDeVueGroup.addLayer(i)}},drawPoi:function(){this.poiGroup=new L.LayerGroup;var t=enyo.zoo.poi;enyo.zoo.texte.poi;var e=L.Icon.extend({options:{shadowUrl:null,iconSize:new L.Point(32,37),className:"map-icon"}}),i={"default":new e({iconUrl:"assets/default.png"}),secours:new e({iconUrl:"assets/firstaid.png"}),eau:new e({iconUrl:"assets/drinkingfountain.png"}),wc:new e({iconUrl:"assets/toilets.png"}),jeu:new e({iconUrl:"assets/playground.png"}),parking:new e({iconUrl:"assets/car.png"}),tour:new e({iconUrl:"assets/tower.png"}),zoo:new e({iconUrl:"assets/zoo.png"}),serre:new e({iconUrl:"assets/frog-2.png"}),picnic:new e({iconUrl:"assets/picnic-2.png"})};this.$.map.addLayer(this.poiGroup);for(var n=0;t.length>n;n++){var o=new L.Marker(new L.LatLng(t[n].lat,t[n].lon),{icon:t[n].type in i?i[t[n].type]:i["default"]});this.poiGroup.addLayer(o),function(t,e){o.on("click",function(i){t.$.poiPopup.setPopup(t.zoo,e),t.$.poiPopup.show(i)})}(this,n)}this.$.poiButton.setDisabled(!1)},setupLegendItem:function(t,e){var i=e.index,n=this.zoo.parcours,o=n[i],s=e.item;return s?(s.$.parcours.setContent(o.nom),s.$.color.applyStyle("background-color",o.couleur),!0):void 0},sortLegend:function(){this.zoo.parcours.sort(function(t,e){return t.nom<e.nom?-1:t.nom>e.nom?1:0})},clearEnclosStyle:function(){for(var t=0;enyo.zoo.animaux.length>t;t++)for(var e=0;enyo.zoo.animaux[t].enclos.length>e;e++);}});

// Card.js
enyo.kind({name:"CardPanel",classes:"onyx wide enyo-unselectable",kind:"FittableRows",components:[{kind:"onyx.Toolbar",components:[{name:"nom",content:"Animal"}]},{kind:"Scroller",name:"scroller",fit:!0,components:[{classes:"card-border",components:[{kind:"Scroller",name:"imageScroller",vertical:"hidden",components:[{kind:"Repeater",name:"list",onSetupItem:"setupItem",classes:"card-images-container",showing:!0,components:[{kind:"Image",name:"image",classes:"card-image",ontap:"showImages"}]}]},{name:"description",classes:"card-description",content:"",allowHtml:!0},{kind:"onyx.Groupbox",classes:"card-groupbox-details",components:[{kind:"onyx.GroupboxHeader",content:"D\u00e9tails"},{kind:"FittableColumns",fit:!0,components:[{content:"Nom scientifique",classes:"label",fit:!0},{name:"sciName",content:""}]},{kind:"FittableColumns",fit:!0,components:[{content:"Classe",classes:"label",fit:!0},{name:"class",content:""}]},{kind:"FittableColumns",fit:!0,components:[{content:"Cat\u00e9gorie",classes:"label",fit:!0},{name:"category",content:""}]},{kind:"FittableColumns",fit:!0,components:[{content:"Ordre",classes:"label",fit:!0},{name:"ordre",content:""}]},{kind:"FittableColumns",fit:!0,components:[{content:"Long\u00e9vit\u00e9",classes:"label",fit:!0},{name:"longevite",content:""}]},{kind:"FittableColumns",fit:!0,components:[{content:"Gestation",classes:"label",fit:!0},{name:"gestation",content:""}]},{kind:"FittableColumns",fit:!0,components:[{content:"Poids",classes:"label",fit:!0},{name:"poids",content:""}]},{kind:"FittableColumns",fit:!0,components:[{content:"Zones",classes:"label",fit:!0},{name:"zones",content:""}]},{kind:"FittableColumns",fit:!0,components:[{content:"Lieux",classes:"label",fit:!0},{name:"lieux",content:""}]}]}]}]},{kind:"onyx.Toolbar",classes:"enyo-unselectable",layoutKind:"FittableColumnsLayout",components:[{classes:"card-toolbar",components:[{kind:"onyx.Button",content:"Retour",classes:"button",ontap:"hide"},{kind:"onyx.Button",content:"Enclos",classes:"button",ontap:"showEnclos"}]}]}],create:function(){this.inherited(arguments)},updateCard:function(t){this.$.scroller.scrollToTop(),this.owner.$.map.clearEnclosStyle(),this.animal=t,this.$.nom.setContent(t.nom),t.images.length>0?this.$.list.show():this.$.list.hide(),this.$.list.setCount(t.images.length),this.$.description.setContent(t.description),this.$.sciName.setContent(t.nom_scientifique),this.$.class.setContent(t.classe),this.$.category.setContent(t.categories),this.$.ordre.setContent(t.ordre),this.$.longevite.setContent(t.longevite),this.$.gestation.setContent(t.gestation.duree),this.$.poids.setContent(t.poids),this.$.zones.setContent(t.zones),this.$.lieux.setContent(t.zones_detail),this.owner.$.image.updateImage(t)},setBack:function(t){this.origin=t},show:function(){this.owner.$.contentPanels.setIndex(1)},hide:function(){enyo.Panels.isScreenNarrow()&&"menu"==this.origin.name?this.owner.$.mainPanels.setIndex(0):this.owner.$.contentPanels.setIndex(0)},showEnclos:function(){this.owner.zoo;for(var t=this.owner.$.map.map,e={fillColor:"purple",stroke:!0,color:"pink",opacity:1,weight:5,fillOpacity:1},i=0;this.animal.enclos.length>i;i++)t._layers["enclos"+this.animal.enclos[i]].setStyle(e);this.owner.$.contentPanels.setIndex(0)},showImages:function(){this.owner.$.cardPanels.setIndex(1)},setupItem:function(t,e){var i=e.index,n=this.animal.images,o=n[i],s=e.item;return s?(s.$.image.setSrc(enyo.zoo.imagefull+o),!0):void 0}});

// Image.js
enyo.kind({name:"ImagePanel",classes:"onyx enyo-unselectable image-body",kind:"FittableRows",components:[{kind:"onyx.Toolbar",name:"header",showing:!0,components:[{name:"nom",content:"Images"}]},{name:"carousel",kind:"ImageCarousel",fit:!0},{kind:"onyx.Toolbar",name:"footer",classes:"enyo-unselectable",layoutKind:"FittableColumnsLayout",showing:!0,components:[{classes:"image-toolbar",components:[{kind:"onyx.Button",content:"Retour fiche",classes:"button",ontap:"showCard"}]}]}],create:function(){this.inherited(arguments)},rendered:function(){this.inherited(arguments)},showCard:function(){this.owner.$.cardPanels.setIndex(0)},updateImage:function(t){this.animal=t;for(var e=[],i=0;t.images.length>i;i++)e.push(enyo.zoo.imagefull+t.images[i]);this.$.carousel.setImages(e),this.$.nom.setContent(t.nom)},showFullScreen:function(){}});

// PoiPopup.js
enyo.kind({name:"PoiPopup",components:[{kind:"onyx.Popup",name:"popup",modal:!0,centered:!1,floating:!0,scrim:!1,classes:"enyo-unselectable map-popup",components:[{classes:"popup-light",name:"container",components:[{name:"title",content:"Poi"},{kind:"Image",name:"image",src:"",showing:!1},{name:"text",content:"",className:"item-secondary",showing:!1}]},{classes:"popup-tip-container",name:"tip",showing:!0,components:[{classes:"popup-light-tip"}]}]}],handlers:{ondragstart:"drag"},drag:function(){return!0},rendered:function(){this.inherited(arguments),this.$.popup.removeClass("onyx-popup")},setPopup:function(t,e){this.$.title.setContent(enyo.zoo.poi[e].nom)},show:function(t){var e=this.$.popup;if(e.show(),!e.centered){var i=this.owner.owner.$.mainPanels.index?0:this.owner.owner.$.menu.getBounds().width,n=t.target._map;if(t.target._icon){var o=n.layerPointToContainerPoint(n.latLngToLayerPoint(t.target._latlng));o.x+=i}else var o=n.layerPointToContainerPoint(t.layerPoint);var s={top:parseInt(e.getComputedStyleValue("margin-top").replace(/px/g,"")),right:parseInt(e.getComputedStyleValue("margin-right").replace(/px/g,"")),left:parseInt(e.getComputedStyleValue("margin-left").replace(/px/g,"")),bottom:parseInt(e.getComputedStyleValue("margin-bottom").replace(/px/g,""))},a={top:parseInt(e.getComputedStyleValue("padding-top").replace(/px/g,"")),right:parseInt(e.getComputedStyleValue("padding-right").replace(/px/g,"")),left:parseInt(e.getComputedStyleValue("padding-left").replace(/px/g,"")),bottom:parseInt(e.getComputedStyleValue("padding-bottom").replace(/px/g,""))},r=e.getBounds(),l=r.width+a.left+a.right+s.left+s.right,h=r.height+a.top+a.bottom+s.top+s.bottom,c={x:0,y:0};h>o.y&&(c.y=h-o.y);var d=this.parent.$.map.getBounds().width;l/2+i>o.x&&(c.x=l/2+i-o.x),l/2+o.x>d+i&&(c.x=-(l/2+o.x-(d+i))),e.setBounds({left:o.x-l/2+c.x,top:o.y-h+c.y},"px"),c.y*=-1,c.x*=-1,n.panBy(c)}},setCentered:function(t){this.$.popup.setProperty("scrim",t),this.$.popup.setProperty("centered",t),this.$.tip.setShowing(!t)}});

// AnimalPopup.js
enyo.kind({name:"AnimalPopup",components:[{kind:"onyx.Popup",name:"popup",modal:!0,centered:!1,floating:!0,scrim:!1,classes:"enyo-unselectable map-animal-popup",components:[{classes:"popup-light",components:[{name:"title",classes:"map-animal-popup-title",content:"Enclos"},{kind:"onyx.Groupbox",name:"noAnimal",classes:"map-animal-popup-groupbox",showing:!1,components:[{content:"Enclos vide.",classes:"map-animal-popup-empty"}]},{kind:"onyx.Groupbox",name:"groupbox",classes:"map-animal-popup-groupbox",showing:!0,components:[{kind:"Scroller",name:"scroller",classes:"map-animal-popup-list",components:[{kind:"Repeater",name:"list",onSetupItem:"setupItem",components:[{name:"item",classes:"animal-item",onclick:"animalTap",components:[{kind:"Image",src:"",name:"icon",classes:"animal-icon"},{classes:"animal-text",components:[{name:"name",classes:"animal-name",content:""},{name:"region",classes:"item-secondary",content:""}]}]}]}]}]}]},{classes:"popup-tip-container",name:"tip",showing:!0,components:[{classes:"popup-light-tip"}]}]}],handlers:{ondragstart:"drag"},drag:function(){return!0},create:function(){this.inherited(arguments)},rendered:function(){this.inherited(arguments),this.$.popup.removeClass("onyx-popup"),this.parent.$.centeredCheckbox.setValue(this.$.popup.centered),this.parent.$.centeredCheckbox.setDisabled(!1)},setPopup:function(t,e){this.$.title.setContent("Enclos "+enyo.zoo.enclos[e].num),this.animals=this.getAnimals(enyo.zoo.animaux,enyo.zoo.enclos[e].id),this.sortAnimals(),this.$.list.setCount(this.animals.length),this.$.noAnimal.setShowing(this.animals.length?!1:!0),this.$.groupbox.setShowing(this.animals.length?!0:!1),this.animals.length>0&&this.$.list.getControls()[0].$.item.applyStyle("border-top","none")},getAnimals:function(t,e){for(var i=[],n=0;t.length>n;n++)for(var o=0;t[n].enclos.length>o;o++)t[n].enclos[o]==e&&i.push(t[n]);return i},setupItem:function(t,e){var i=e.index,n=this.animals,o=n[i],s=e.item;return s?(s.$.name.setContent(o.nom),s.$.region.setContent(o.zones),o.images.length>0?s.$.icon.setSrc(enyo.zoo.imagefull+o.images[0]):s.$.icon.setSrc("assets/logo2.png"),!0):void 0},sortAnimals:function(){this.animals.sort(function(t,e){return t.nom<e.nom?-1:t.nom>e.nom?1:0})},animalTap:function(t,e){this.$.popup.hide(),this.owner.owner.$.image.updateImage(this.animals[e.index]),this.owner.owner.$.card.updateCard(this.animals[e.index]),this.owner.owner.$.card.setBack(this.parent),this.owner.owner.$.card.show()},show:function(t){var e=this.$.popup;if(e.show(),!e.centered){var i=this.owner.owner.$.mainPanels.index?0:this.owner.owner.$.menu.getBounds().width,n=t.target._map;if(t.target._icon){var o=n.latLngToLayerPoint(t.target._latlng);o.x+=i}else var o=n.layerPointToContainerPoint(t.layerPoint);var s={top:parseInt(e.getComputedStyleValue("margin-top").replace(/px/g,"")),right:parseInt(e.getComputedStyleValue("margin-right").replace(/px/g,"")),left:parseInt(e.getComputedStyleValue("margin-left").replace(/px/g,"")),bottom:parseInt(e.getComputedStyleValue("margin-bottom").replace(/px/g,""))},a={top:parseInt(e.getComputedStyleValue("padding-top").replace(/px/g,"")),right:parseInt(e.getComputedStyleValue("padding-right").replace(/px/g,"")),left:parseInt(e.getComputedStyleValue("padding-left").replace(/px/g,"")),bottom:parseInt(e.getComputedStyleValue("padding-bottom").replace(/px/g,""))},r=e.getBounds(),l=r.width+a.left+a.right+s.left+s.right,h=r.height+a.top+a.bottom+s.top+s.bottom,c={x:0,y:0};h>o.y&&(c.y=h-o.y);var d=this.parent.$.map.getBounds().width;l/2+i>o.x&&(c.x=l/2+i-o.x),l/2+o.x>d+i&&(c.x=-(l/2+o.x-(d+i))),e.setBounds({left:o.x-l/2+c.x,top:o.y-h+c.y},"px"),c.y*=-1,c.x*=-1,n.panBy(c)}},setCentered:function(t){this.$.popup.setProperty("scrim",t),this.$.popup.setProperty("centered",t),this.$.tip.setShowing(!t)}});
